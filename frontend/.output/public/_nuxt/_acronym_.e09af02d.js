import{a as P,r as g,b as z,e as G,f as x,h as a,i as h,j as e,k as u,t as i,u as t,l as b,w as y,F as d,m as c,p as O,o as n,c as C,s as A}from"./entry.6c939bcc.js";import{a as T,M as H}from"./menu.da64e2da.js";const K={class:"flex flex-column gap-3"},Q={key:0},X=e("br",null,null,-1),Y={class:"flex gap-2"},Z={class:"flex flex-column gap-2"},ee={key:0},te=e("b",null,"Origin Datasets",-1),le=["onClick"],ne={key:1},se=e("b",null,"Related Datasets",-1),oe=["onClick"],ae={key:2},ie=e("b",null,"Datasets With the Same Origin",-1),re=["onClick"],ue={style:{"list-style":"none"},class:"flex flex-column gap-2"},de={class:"flex gap-2"},ce=e("b",null,"Acronym Aliases: ",-1),_e=e("b",null,"Dataset Title: ",-1),he=e("b",null,"Paper Title: ",-1),pe={class:"flex gap-2"},me=e("b",null,"Authors: ",-1),ge=e("b",null,"Date Submitted: ",-1),fe=e("b",null,"Submitter: ",-1),ye=e("b",null,"Name: ",-1),be=e("b",null,"Email: ",-1),ke=e("b",null,"Description: ",-1),ve=e("b",null,"DOI: ",-1),we=["href"],xe=e("b",null,"Origins DOI: ",-1),Ce=["href"],De={class:"flex gap-2"},Re=e("b",null,"Tags: ",-1),Ue=e("b",null,"Data URL: ",-1),$e=["href"],Be={style:{"list-style":"none"},class:"flex flex-column gap-1"},Ae=["href"],Ie={key:1,class:"styled-table"},Ne={key:2,style:{"white-space":"pre"}},je={__name:"[acronym]",setup(Oe){const I=P(),D=g("Unknown"),l=g(),k=g(),v=g(),R=g(),N=g(),U=g(),E=z(),j=r=>"/jupyter/notebooks/"+r,L=r=>{if(typeof r!="string"||!r.includes("{")||!r.includes("}"))return!1;try{return JSON.parse(r),!0}catch{return!1}},$=r=>{O(`/detail/${encodeURIComponent(r)}`)},S=r=>{T.get(`/api/datasets/${encodeURIComponent(r)}`).then(o=>{console.log(o.data),l.value=o.data.dataset,l.value.authors=l.value.authors.filter(p=>p!==""),l.value.tags=l.value.tags.filter(p=>p!==""),N.value=o.data.analysis,U.value=o.data.edit_analysis_url,k.value=o.data.related_datasets,v.value=o.data.origin_datasets,R.value=o.data.same_origin_datasets,console.log(l.value),console.log(k.value),console.log(v.value)}).catch(o=>{I.add({severity:"error",summary:"Error while getting dataset",detail:o.response.data,life:3e3})})},F=r=>{O(`/edit/${encodeURIComponent(r)}`)},M=()=>{console.log(U.value),window.open(U.value,"_blank")},V=r=>{if(l.value.url){window.open(l.value.url,"_blank");return}else console.log("No URL - trying local file");T.get(`/api/files/${encodeURIComponent(r)}`).then(o=>{const p=new Blob([o.data],{type:o.headers["content-type"]}),B=window.URL.createObjectURL(p),_=document.createElement("a");_.href=B;let f="filename";const s=o.headers["content-disposition"].match(/filename="(.+)"/);s&&s[1]&&(f=s[1]),_.setAttribute("download",f),document.body.appendChild(_),_.click()}).catch(o=>{I.add({severity:"error",summary:"Error while downloading dataset",detail:o.response.data,life:3e3})})};return G(()=>{D.value=decodeURIComponent(E.params.acronym),S(D.value)}),(r,o)=>{const p=x("Toast"),B=x("Badge"),_=x("Button"),f=x("Fieldset");return n(),a("div",K,[h(p,{position:"bottom-right"}),h(H),e("h1",null,[u(" Details of "+i(t(D))+" ",1),t(l).status=="requested"?(n(),a("div",Q,[h(B,{value:"Requested",severity:"info"}),X])):b("",!0)]),e("h2",Y,[h(_,{onClick:o[0]||(o[0]=s=>V(t(l).acronym)),label:"Download",icon:"pi pi-download",severity:"success"}),h(_,{onClick:o[1]||(o[1]=s=>F(t(l).acronym)),label:"Edit Info",icon:"pi pi-pencil"}),h(_,{onClick:o[2]||(o[2]=s=>M(t(l).acronym)),label:"Edit Analysis",icon:"pi pi-external-link",severity:"secondary"})]),h(f,{legend:"Related Datasets",toggleable:!0,collapsed:""},{default:y(()=>[e("ul",Z,[t(v).length>0?(n(),a("div",ee,[te,(n(!0),a(d,null,c(t(v),s=>(n(),a("li",null,[e("span",{class:"detail-link",onClick:w=>$(s)},i(s),9,le)]))),256))])):b("",!0),t(k).length>0?(n(),a("div",ne,[se,(n(!0),a(d,null,c(t(k),s=>(n(),a("li",null,[e("span",{class:"detail-link",onClick:w=>$(s)},i(s),9,oe)]))),256))])):b("",!0),t(R).length>0?(n(),a("div",ae,[ie,(n(!0),a(d,null,c(t(R),s=>(n(),a("li",null,[e("span",{class:"detail-link",onClick:w=>$(s)},i(s),9,re)]))),256))])):b("",!0)])]),_:1}),h(f,{legend:"Details",toggleable:!0},{default:y(()=>[e("ul",ue,[e("li",de,[ce,(n(!0),a(d,null,c(t(l).acronym_aliases,s=>(n(),C(t(A),null,{default:y(()=>[u(i(s),1)]),_:2},1024))),256))]),e("li",null,[_e,u(" "+i(t(l).title),1)]),e("li",null,[he,u(" "+i(t(l).paper_title),1)]),e("li",pe,[me,(n(!0),a(d,null,c(t(l).authors,s=>(n(),C(t(A),null,{default:y(()=>[u(i(s),1)]),_:2},1024))),256))]),e("li",null,[ge,u(" "+i(t(l).date_submitted),1)]),e("li",null,[fe,e("ul",null,[e("li",null,[ye,u(" "+i(t(l).submitter.name),1)]),e("li",null,[be,u(" "+i(t(l).submitter.email),1)])])]),e("li",null,[ke,u(" "+i(t(l).description),1)]),e("li",null,[ve,u(),e("a",{href:t(l).doi,target:"_blank"},i(t(l).doi),9,we)]),e("li",null,[xe,u(),e("a",{href:t(l).origins_doi,target:"_blank"},i(t(l).origins_doi),9,Ce)]),e("li",De,[Re,(n(!0),a(d,null,c(t(l).tags,s=>(n(),C(t(A),null,{default:y(()=>[u(i(s),1)]),_:2},1024))),256))]),e("li",null,[Ue,u(),e("a",{href:t(l).url,target:"_blank"},i(t(l).url),9,$e)])])]),_:1}),(n(!0),a(d,null,c(t(N).analysis,(s,w)=>(n(),a(d,null,[typeof s=="object"?(n(),C(f,{key:0,legend:w.replaceAll("_"," "),toggleable:!0},{default:y(()=>[e("ul",Be,[(n(!0),a(d,null,c(s,(m,q)=>(n(),a("li",null,[e("b",null,i(q.replaceAll("_"," "))+": ",1),typeof m=="string"&&m.endsWith(".ipynb")?(n(),a("a",{key:0,href:j(t(l).acronym+"/"+m),target:"_blank"},i(m),9,Ae)):L(m)?(n(),a("table",Ie,[e("tbody",null,[(n(!0),a(d,null,c(JSON.parse(m),(J,W)=>(n(),a("tr",null,[e("td",null,i(W),1),e("td",null,i(J),1)]))),256))])])):(n(),a("span",Ne,i(m),1))]))),256))])]),_:2},1032,["legend"])):b("",!0)],64))),256))])}}};export{je as default};
