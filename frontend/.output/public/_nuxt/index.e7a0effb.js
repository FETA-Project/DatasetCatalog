import{E as B,G as F,a as N,H as O,r as m,e as L,f as s,h as x,i as l,w as c,u as i,I as C,j as e,o as y,k as d,t as n,F as j,m as q,c as G,J as H,p as J,d as z,_ as K}from"./entry.0ea88f22.js";import{a as w,M as Q}from"./menu.5bf7707e.js";const W=e("h1",null,"Dataset Catalog",-1),X={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},Y={class:"p-input-icon-left"},Z=e("i",{class:"pi pi-search"},null,-1),P=["href"],ee={class:"flex gap-1"},te={class:"flex"},ae={style:{"list-style":"none"}},le=e("b",null,"Paper Title: ",-1),oe=e("b",null,"Author: ",-1),ne=e("b",null,"Date Submitted: ",-1),se=e("b",null,"Submitter: ",-1),ie=e("b",null,"Name: ",-1),de=e("b",null,"Email: ",-1),re=e("b",null,"Description: ",-1),ue=e("b",null,"Origins DOI: ",-1),ce=e("b",null,"Data URL: ",-1),_e=["href"],fe={__name:"index",setup(me){B();const T=F(),_=N(),k=O(),r=m([]),p=m([]),h=m({global:{value:null,matchMode:H.CONTAINS}}),f=m([]),S=z(()=>K(()=>import("./upload.ec9e8519.js"),["./upload.ec9e8519.js","./entry.0ea88f22.js","./entry.076fc270.css","./menu.5bf7707e.js","./menu.16430c06.css","./upload.8026df64.css"],import.meta.url)),b=()=>{w.get("/api/datasets").then(o=>{f.value=o.data,console.log(f.value)}).catch(o=>{_.add({severity:"error",summary:"Error while getting datasets",detail:o.response.data,life:3e3})})};L(()=>{b()});const E=o=>{J(`/detail/${encodeURIComponent(o)}`)},I=()=>{let o=[];r.value.forEach(a=>{o.push(a.acronym)}),T.require({message:`Are you sure you want to delete ${o.length} files`,header:"Delete Confirmation",icon:"pi pi-exclemation-triangle",accept:()=>{r.value=null,o.forEach(a=>{w.delete(`/api/datasets/${a}`).then(()=>{_.add({severity:"success",summary:"Delete Successful",detail:`Dataset ${a} deleted successfully.`,life:3e3}),b()}).catch(g=>{_.add({severity:"error",summary:"Delete Failed",detail:g.response.data,life:3e3})})})}})},M=()=>{k.open(S,{props:{header:"Submit Dataset",modal:!0},onClose:o=>{const a=o.data;a&&(_.add({severity:"success",summary:"Upload Successful",detail:`File ${a} uploaded successfully.`,life:3e3}),b())}})};return(o,a)=>{const g=s("Toast"),U=s("ConfirmDialog"),D=s("Button"),R=s("InputText"),u=s("Column"),V=s("Chip"),$=s("DataTable"),A=s("DynamicDialog");return y(),x("div",null,[l(g,{position:"bottom-right"}),l(Q),W,l(U),l($,{value:i(f),scrollable:"",filters:i(h),selection:i(r),"onUpdate:selection":a[2]||(a[2]=t=>C(r)?r.value=t:null),"expanded-rows":i(p),"onUpdate:expandedRows":a[3]||(a[3]=t=>C(p)?p.value=t:null)},{header:c(()=>[e("div",X,[e("div",null,[l(D,{label:"Submit Dataset",icon:"pi pi-ticket",class:"mr-2",onClick:M}),l(D,{label:"Delete",icon:"pi pi-trash",class:"mr-2",severity:"danger",onClick:a[0]||(a[0]=t=>I()),disabled:!i(r)||!i(r).length},null,8,["disabled"])]),e("span",Y,[Z,l(R,{modelValue:i(h).global.value,"onUpdate:modelValue":a[1]||(a[1]=t=>i(h).global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),expansion:c(t=>[e("div",te,[e("ul",ae,[e("li",null,[le,d(" "+n(t.data.paper_title),1)]),e("li",null,[oe,d(" "+n(t.data.author),1)]),e("li",null,[ne,d(" "+n(t.data.date_submitted),1)]),e("li",null,[se,e("ul",null,[e("li",null,[ie,d(" "+n(t.data.submitter.name),1)]),e("li",null,[de,d(" "+n(t.data.submitter.email),1)])])]),e("li",null,[re,d(" "+n(t.data.description),1)]),e("li",null,[ue,d(" "+n(t.data.origins_doi),1)]),e("li",null,[ce,d(),e("a",{href:t.data.url,target:"_blank"},n(t.data.url),9,_e)])])])]),default:c(()=>[l(u,{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(u,{expander:"",style:{width:"3rem"}}),l(u,{field:"acronym",header:"Acronym",sortable:""}),l(u,{field:"title",header:"Title",sortable:""}),l(u,{header:"DOI"},{body:c(t=>[e("a",{href:"https://doi.org/"+t.data.doi,target:"_blank"},n(t.data.doi),9,P)]),_:1}),l(u,{field:"tags",header:"Tags"},{body:c(t=>[e("div",ee,[(y(!0),x(j,null,q(t.data.tags,v=>(y(),G(V,{label:v},null,8,["label"]))),256))])]),_:1}),l(u,null,{body:c(t=>[l(D,{onClick:v=>E(t.data.acronym),label:"Details",icon:"pi pi-info-circle",rounded:"",outlined:""},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters","selection","expanded-rows"]),l(A)])}}};export{fe as default};
