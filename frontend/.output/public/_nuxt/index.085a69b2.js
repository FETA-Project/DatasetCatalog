import{G as O,H as j,b as q,a as L,m as h,q as G,r as s,e as x,h as a,w as r,u as n,I as w,j as e,o as _,k as u,t as c,F as T,f as k,c as S,J as H,s as J,d as z,_ as K}from"./entry.c1549a97.js";import{a as M,M as Q}from"./menu.0f9d3c11.js";import{_ as W}from"./date.b0c2944e.js";const X=e("h1",null,"Dataset Catalog",-1),Y={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},Z={class:"p-input-icon-left"},P=e("i",{class:"pi pi-search"},null,-1),ee=["href"],te={class:"flex gap-1"},ae={class:"flex"},le={style:{"list-style":"none"}},oe=e("b",null,"Paper Title: ",-1),se={class:"flex gap-2"},ne=e("b",null,"Authors: ",-1),ie=e("b",null,"Date Submitted: ",-1),de=e("b",null,"Submitter: ",-1),re=e("b",null,"Name: ",-1),ue=e("b",null,"Email: ",-1),ce=e("b",null,"Description: ",-1),_e=e("b",null,"Origins: ",-1),me=["href"],ge={__name:"index",setup(pe){O();const $=j(),m=q(),E=L(),i=h([]),f=h([]),b=h({global:{value:null,matchMode:H.CONTAINS}}),g=h([]),I=z(()=>K(()=>import("./upload.546e82bd.js"),["./upload.546e82bd.js","./entry.c1549a97.js","./entry.076fc270.css","./menu.0f9d3c11.js","./menu.16430c06.css","./upload.edc01548.css"],import.meta.url)),y=()=>{M.get("/api/datasets").then(o=>{g.value=o.data,console.log(g.value)}).catch(o=>{m.add({severity:"error",summary:"Error while getting datasets",detail:o.response.data,life:3e3})})};G(()=>{y()});const U=o=>{J(`/detail/${encodeURIComponent(o)}`)},V=()=>{let o=[];i.value.forEach(l=>{o.push(l.acronym)}),$.require({message:`Are you sure you want to delete ${o.length} files`,header:"Delete Confirmation",icon:"pi pi-exclemation-triangle",accept:()=>{i.value=null,o.forEach(l=>{M.delete(`/api/datasets/${l}`).then(()=>{m.add({severity:"success",summary:"Delete Successful",detail:`Dataset ${l} deleted successfully.`,life:3e3}),y()}).catch(v=>{m.add({severity:"error",summary:"Delete Failed",detail:v.response.data,life:3e3})})})}})},A=()=>{E.open(I,{props:{header:"Submit Dataset",modal:!0},onClose:o=>{const l=o.data;l&&(m.add({severity:"success",summary:"Upload Successful",detail:`File ${l} uploaded successfully.`,life:3e3}),y())}})};return(o,l)=>{const v=s("Toast"),B=s("ConfirmDialog"),D=s("Button"),F=s("InputText"),d=s("Column"),C=s("Chip"),N=s("DataTable"),R=s("DynamicDialog");return _(),x("div",null,[a(v,{position:"bottom-right"}),a(Q),X,a(B),a(N,{value:n(g),scrollable:"",filters:n(b),selection:n(i),"onUpdate:selection":l[2]||(l[2]=t=>w(i)?i.value=t:null),"expanded-rows":n(f),"onUpdate:expandedRows":l[3]||(l[3]=t=>w(f)?f.value=t:null)},{header:r(()=>[e("div",Y,[e("div",null,[a(D,{label:"Submit Dataset",icon:"pi pi-ticket",class:"mr-2",onClick:A}),a(D,{label:"Delete",icon:"pi pi-trash",class:"mr-2",severity:"danger",onClick:l[0]||(l[0]=t=>V()),disabled:!n(i)||!n(i).length},null,8,["disabled"])]),e("span",Z,[P,a(F,{modelValue:n(b).global.value,"onUpdate:modelValue":l[1]||(l[1]=t=>n(b).global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),expansion:r(t=>[e("div",ae,[e("ul",le,[e("li",null,[oe,u(" "+c(t.data.paper_title),1)]),e("li",se,[ne,(_(!0),x(T,null,k(t.data.authors,p=>(_(),S(C,null,{default:r(()=>[u(c(p),1)]),_:2},1024))),256))]),e("li",null,[ie,u(),a(W,{datetime:t.data.date_submitted},null,8,["datetime"])]),e("li",null,[de,e("ul",null,[e("li",null,[re,u(" "+c(t.data.submitter.name),1)]),e("li",null,[ue,u(" "+c(t.data.submitter.email),1)])])]),e("li",null,[ce,u(" "+c(t.data.description),1)]),e("li",null,[_e,u(),e("a",{href:t.data.origins_doi,target:"_blank"},c(t.data.origins_doi),9,me)])])])]),default:r(()=>[a(d,{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(d,{expander:"",style:{width:"3rem"}}),a(d,{field:"acronym",header:"Acronym",sortable:""}),a(d,{field:"title",header:"Title",sortable:""}),a(d,{header:"DOI"},{body:r(t=>[e("a",{href:"https://doi.org/"+t.data.doi,target:"_blank"},c(t.data.doi),9,ee)]),_:1}),a(d,{field:"tags",header:"Tags"},{body:r(t=>[e("div",te,[(_(!0),x(T,null,k(t.data.tags,p=>(_(),S(C,{label:p},null,8,["label"]))),256))])]),_:1}),a(d,null,{body:r(t=>[a(D,{onClick:p=>U(t.data.acronym),label:"Details",icon:"pi pi-info-circle",rounded:"",outlined:""},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters","selection","expanded-rows"]),a(R)])}}};export{ge as default};
