import{E as O,G as j,a as L,H as q,r as h,e as G,f as s,h as x,i as l,w as u,u as n,I as w,j as e,o as _,k as c,t as i,F as T,m as k,c as S,J as H,p as J,d as z,_ as K}from"./entry.8ea22a4f.js";import{a as E,M as Q}from"./menu.6343a78a.js";const W=e("h1",null,"Dataset Catalog",-1),X={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},Y={class:"p-input-icon-left"},Z=e("i",{class:"pi pi-search"},null,-1),P=["href"],ee={class:"flex gap-1"},te={class:"flex"},ae={style:{"list-style":"none"}},le=e("b",null,"Paper Title: ",-1),oe={class:"flex gap-2"},se=e("b",null,"Authors: ",-1),ne=e("b",null,"Date Submitted: ",-1),ie=e("b",null,"Submitter: ",-1),de=e("b",null,"Name: ",-1),re=e("b",null,"Email: ",-1),ue=e("b",null,"Description: ",-1),ce=e("b",null,"Origins: ",-1),_e=["href"],fe={__name:"index",setup(me){O();const M=j(),m=L(),I=q(),d=h([]),f=h([]),g=h({global:{value:null,matchMode:H.CONTAINS}}),b=h([]),U=z(()=>K(()=>import("./upload.cb32bf6f.js"),["./upload.cb32bf6f.js","./entry.8ea22a4f.js","./entry.076fc270.css","./menu.6343a78a.js","./menu.16430c06.css","./upload.72d457da.css"],import.meta.url)),y=()=>{E.get("/api/datasets").then(o=>{b.value=o.data,console.log(b.value)}).catch(o=>{m.add({severity:"error",summary:"Error while getting datasets",detail:o.response.data,life:3e3})})};G(()=>{y()});const V=o=>{J(`/detail/${encodeURIComponent(o)}`)},$=()=>{let o=[];d.value.forEach(a=>{o.push(a.acronym)}),M.require({message:`Are you sure you want to delete ${o.length} files`,header:"Delete Confirmation",icon:"pi pi-exclemation-triangle",accept:()=>{d.value=null,o.forEach(a=>{E.delete(`/api/datasets/${a}`).then(()=>{m.add({severity:"success",summary:"Delete Successful",detail:`Dataset ${a} deleted successfully.`,life:3e3}),y()}).catch(v=>{m.add({severity:"error",summary:"Delete Failed",detail:v.response.data,life:3e3})})})}})},A=()=>{I.open(U,{props:{header:"Submit Dataset",modal:!0},onClose:o=>{const a=o.data;a&&(m.add({severity:"success",summary:"Upload Successful",detail:`File ${a} uploaded successfully.`,life:3e3}),y())}})};return(o,a)=>{const v=s("Toast"),B=s("ConfirmDialog"),D=s("Button"),F=s("InputText"),r=s("Column"),C=s("Chip"),N=s("DataTable"),R=s("DynamicDialog");return _(),x("div",null,[l(v,{position:"bottom-right"}),l(Q),W,l(B),l(N,{value:n(b),scrollable:"",filters:n(g),selection:n(d),"onUpdate:selection":a[2]||(a[2]=t=>w(d)?d.value=t:null),"expanded-rows":n(f),"onUpdate:expandedRows":a[3]||(a[3]=t=>w(f)?f.value=t:null)},{header:u(()=>[e("div",X,[e("div",null,[l(D,{label:"Submit Dataset",icon:"pi pi-ticket",class:"mr-2",onClick:A}),l(D,{label:"Delete",icon:"pi pi-trash",class:"mr-2",severity:"danger",onClick:a[0]||(a[0]=t=>$()),disabled:!n(d)||!n(d).length},null,8,["disabled"])]),e("span",Y,[Z,l(F,{modelValue:n(g).global.value,"onUpdate:modelValue":a[1]||(a[1]=t=>n(g).global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),expansion:u(t=>[e("div",te,[e("ul",ae,[e("li",null,[le,c(" "+i(t.data.paper_title),1)]),e("li",oe,[se,(_(!0),x(T,null,k(t.data.authors,p=>(_(),S(C,null,{default:u(()=>[c(i(p),1)]),_:2},1024))),256))]),e("li",null,[ne,c(" "+i(t.data.date_submitted),1)]),e("li",null,[ie,e("ul",null,[e("li",null,[de,c(" "+i(t.data.submitter.name),1)]),e("li",null,[re,c(" "+i(t.data.submitter.email),1)])])]),e("li",null,[ue,c(" "+i(t.data.description),1)]),e("li",null,[ce,c(),e("a",{href:t.data.origins_doi,target:"_blank"},i(t.data.origins_doi),9,_e)])])])]),default:u(()=>[l(r,{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(r,{expander:"",style:{width:"3rem"}}),l(r,{field:"acronym",header:"Acronym",sortable:""}),l(r,{field:"title",header:"Title",sortable:""}),l(r,{header:"DOI"},{body:u(t=>[e("a",{href:"https://doi.org/"+t.data.doi,target:"_blank"},i(t.data.doi),9,P)]),_:1}),l(r,{field:"tags",header:"Tags"},{body:u(t=>[e("div",ee,[(_(!0),x(T,null,k(t.data.tags,p=>(_(),S(C,{label:p},null,8,["label"]))),256))])]),_:1}),l(r,null,{body:u(t=>[l(D,{onClick:p=>V(t.data.acronym),label:"Details",icon:"pi pi-info-circle",rounded:"",outlined:""},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters","selection","expanded-rows"]),l(R)])}}};export{fe as default};
