import{J as z,N as P,p as S,O as A,r as o,P as _,i as s,o as q,e as w,h as d,f as a,Q as h,j as k,R as C,w as y,L as J,M}from"./entry.ef179a0b.js";import{a as Q}from"./menu.f2730974.js";const R=m=>(J("data-v-6f73c5b7"),m=m(),M(),m),G={id:"container",class:"card flex justify-content-center"},H={class:"flex flex-column gap-2 container"},K={key:0,class:"p-error"},W=R(()=>d("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),X={key:1,class:"p-error"},Y=R(()=>d("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Z={class:"card p-fluid p-hidden-label"},ee={class:"flex justify-content-center gap-2"},le=R(()=>d("p",{class:"flex justify-content-center"}," Drag and drop file here to upload. ",-1)),ae={__name:"upload",setup(m){P();const V=S(),E=A("dialogRef"),i=o(""),v=o(!1),n=o(""),u=o(!1),g=o(""),p=o(""),b=o(!1),c=o(""),x=o(!1),T=o(null),U=o();_(i,t=>{v.value=t.length===0}),_(n,t=>{u.value=t.length===0}),_(p,t=>{b.value=t.length===0}),_(c,t=>{x.value=t.length===0});function B(){T.value.clear(),T.value.uploadedFileCount=0}async function N(t){V.add({severity:"success",summary:"Request Local",detail:"Local Upload...",life:3e3})}async function D(t){const e=new FormData;if(e.append("title",i.value),e.append("requester_name",n.value),e.append("requester_email",p.value),e.append("description",g.value),e.append("doi",c.value),e.append("tags",U.value),console.log(e),n.value.length==0){B(),u.value=!0,V.add({severity:"error",summary:"Request Error",detail:"Name is required.",life:3e3});return}await Q.post("/api/requests",e).then(r=>{console.log(r.data),E.value.close(n.value)}).catch(r=>{console.log(r),V.add({severity:"error",summary:"Upload Error",detail:r.response.data.detail,life:3e3}),B()})}return(t,e)=>{const r=s("Toast"),f=s("InputText"),L=s("TextArea"),j=s("Chips"),F=s("Button"),I=s("TabPanel"),O=s("FileUpload"),$=s("TabView");return q(),w("div",G,[d("div",H,[a(r,{position:"bottom-right"}),a(f,{id:"title",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),class:h({error:v.value}),"aria-describedby":"title-help",placeholder:"Title",onBlur:e[1]||(e[1]=l=>v.value=i.value.length===0)},null,8,["modelValue","class"]),v.value?(q(),w("small",K,[W,k(" Title is required. ")])):C("",!0),a(f,{id:"name",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=l=>n.value=l),class:h({error:u.value}),"aria-describedby":"name-help",placeholder:"Name",onBlur:e[3]||(e[3]=l=>u.value=n.value.length===0)},null,8,["modelValue","class"]),u.value?(q(),w("small",X,[Y,k(" Name is required. ")])):C("",!0),a(f,{id:"email",modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=l=>p.value=l),class:h({error:b.value}),"aria-describedby":"email-help",placeholder:"Email",onBlur:e[5]||(e[5]=l=>b.value=p.value.length===0)},null,8,["modelValue","class"]),a(L,{id:"description",modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=l=>g.value=l),"aria-describedby":"description-help",placeholder:"Description...",rows:"5",cols:"30"},null,8,["modelValue"]),d("div",Z,[a(j,{id:"tags",modelValue:U.value,"onUpdate:modelValue":e[7]||(e[7]=l=>U.value=l),separator:",",placeholder:"Tag"},null,8,["modelValue"])]),a($,null,{default:y(()=>[a(I,{header:"DOI"},{default:y(()=>[d("div",ee,[a(f,{id:"doi",modelValue:c.value,"onUpdate:modelValue":e[8]||(e[8]=l=>c.value=l),class:h([{error:x.value},"w-8"]),"aria-describedby":"doi-help",placeholder:"DOI or URL",onBlur:e[9]||(e[9]=l=>x.value=c.value.length===0)},null,8,["modelValue","class"]),a(F,{label:"Request",icon:"pi pi-upload",onClick:D,class:"w-4"})])]),_:1}),a(I,{header:"Local File"},{default:y(()=>[a(O,{name:"upload",auto:!1,multiple:!1,fileLimit:1,"custom-upload":"",ref_key:"fileUpload",ref:T,onUploader:N,"upload-label":"Request"},{empty:y(()=>[le]),_:1},512)]),_:1})]),_:1})])])}}},se=z(ae,[["__scopeId","data-v-6f73c5b7"]]);export{se as default};
