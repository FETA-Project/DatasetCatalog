import{_ as te,R as se,n as oe,r as a,f as ie,q as ne,c as v,b as o,a as l,t as X,P as d,d as i,X as m,C as U,w as re,v as de,Y as ue,G as pe,Z as me,$ as ce,a0 as fe,V as G,D as ve,a1 as be,K as he,o as b,y as _e,T as ye}from"./DU3s_J-k.js";import{M as ge}from"./CeymNAjJ.js";import{a as S}from"./DW_MHI2K.js";const xe={class:"flex flex-col gap-4"},Ve={id:"container",class:"card flex justify-center"},Ue={class:"flex flex-col gap-4 container"},Te={class:"mt-4 mb-4 text-3xl font-bold"},Ce={id:"analysis_status",class:"flex flex-col gap-2"},De={for:"analysis_status"},Ee={class:"pi pi-info-circle"},$e={for:"title"},Re={class:"pi pi-info-circle"},Ie={key:0,class:"p-error"},we={id:"versions",class:"flex flex-col gap-2"},Se={for:"versions"},ke={class:"pi pi-info-circle"},Fe={for:"name"},Ae={class:"pi pi-info-circle"},Ne={key:0,class:"p-error"},qe={for:"email"},Le={class:"pi pi-info-circle"},ze={key:0,class:"p-error"},Be={for:"paperTitle"},je={class:"pi pi-info-circle"},Pe={key:0,class:"p-error"},Me={for:"authors"},Oe={class:"pi pi-info-circle"},Xe={key:0,class:"p-error"},Ge={id:"description",class:"flex flex-col gap-2"},Ke={for:"Description"},Ye={class:"pi pi-info-circle"},Ze={id:"format",class:"flex flex-col gap-2"},He={for:"format"},Je={class:"pi pi-info-circle"},Qe={id:"label_name",class:"flex flex-col gap-2"},We={for:"label_name"},el={class:"pi pi-info-circle"},ll={id:"tags",class:"flex flex-col gap-2"},al={for:"tags"},tl={class:"pi pi-info-circle"},sl={id:"doi",class:"flex flex-col gap-2"},ol={for:"doi"},il={class:"pi pi-info-circle"},nl={for:"url"},rl={class:"pi pi-info-circle"},dl={for:"url"},ul={class:"pi pi-info-circle"},pl={key:0},ml={key:1},cl={class:"flex justify-between mb-4"},fl={__name:"[versions]",setup(vl){be();const N=se(),g=oe();he("dialogRef");const f=a(""),_=a(""),n=a({filename:""}),K=a([{status:"Requested"},{status:"In Progress"},{status:"Completed"}]),h=a(""),T=a(!1),C=a("");a(!1);const y=a(""),Y=a(!1);a(""),a(!1);const D=a(""),q=a(!1),x=a(""),L=a(!1),E=a("");a(!1);const $=a(""),Z=a(!1),R=a(""),H=a(!1),I=a(""),J=a(!1),k=a(""),z=a(!1),w=a(""),B=a(!1),F=a(""),j=a(!1),V=a(),A=a(null);ie(h,s=>{T.value=s.length===0});const Q=(s,e)=>{S.get(`/api/datasets/${encodeURIComponent(s)}/${e}`).then(u=>{n.value=u.data.dataset,console.log(n.value),h.value=n.value.acronym,y.value=n.value.versions.filter(p=>p!==""),D.value=n.value.paper_title,x.value=n.value.authors.filter(p=>p!==""),E.value=n.value.description,$.value=n.value.format,I.value=n.value.doi,k.value=n.value.submitter.name,F.value=n.value.submitter.email,V.value=n.value.tags.filter(p=>p!==""),w.value=n.value.url,C.value={status:n.value.analysis_status},R.value=n.value.label_name}).catch(u=>{g.add({severity:"error",summary:"Error while getting dataset",detail:u.response.data,life:3e3})})};async function W(){const s=new FormData;s.append("acronym",h.value),s.append("versions",y.value===void 0?[]:y.value),s.append("paper_title",D.value),s.append("authors",x.value===void 0?[]:x.value),s.append("description",E.value),s.append("format",$.value),s.append("doi",I.value),s.append("tags",V.value===void 0?[]:V.value),s.append("url",w.value),s.append("analysis_status",C.value.status),s.append("label_name",R.value),await S.post(`/api/datasets/${encodeURIComponent(f.value)}/${encodeURIComponent(_.value)}/edit`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{let e=y.value,u=h.value;e==""&&(e="*"),G(`/detail/${encodeURIComponent(u)}/${encodeURIComponent(e)}`)}).catch(e=>{console.log(e),g.add({severity:"error",summary:"Edit Error",detail:e.response.data.detail,life:3e3})})}function P(){A.value.clear(),A.value.uploadedFileCount=0}async function ee(s){const e=new FormData;s.files!==void 0&&e.append("file",s.files[0]),e.forEach(u=>{console.log(u)}),await S.post(`/api/datasets/${encodeURIComponent(f.value)}/${encodeURIComponent(_.value)}/upload`,e,{headers:{"Content-Type":"multipart/form-data"}}).then(u=>{console.log(u.data),g.add({severity:"success",summary:"File Uploaded",detail:`File for ${f.value} has been uploaded.`,life:3e3}),P(),S.get(`/api/datasets/${encodeURIComponent(f.value)}/${encodeURIComponent(_.value)}`).then(p=>{n.value.filename=p.data.dataset.filename}).catch(p=>{g.add({severity:"error",summary:"Error while getting dataset",detail:p.response.data,life:3e3})})}).catch(u=>{console.log(u),g.add({severity:"error",summary:"Upload Error",detail:u.response.data.detail,life:3e3}),P()})}return ne(()=>{f.value=decodeURIComponent(N.params.acronym),_.value=decodeURIComponent(N.params.versions),Q(f.value,_.value)}),(s,e)=>{const u=_e,p=ue,c=pe,M=me,le=ce,ae=fe,O=ve,r=ye;return b(),v("div",xe,[o(u,{position:"bottom-right"}),o(ge),l("div",Ve,[l("div",Ue,[o(u,{position:"bottom-right"}),l("h1",Te," Editing "+X(f.value),1),l("div",Ce,[l("label",De,[d(l("i",Ee,null,512),[[r,"The status of analysis.",void 0,{right:!0}]]),e[16]||(e[16]=i(" Dataset Analysis Status "))]),o(p,{id:"analysis_status",modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=t=>C.value=t),options:K.value,"option-label":"status",placeholder:"Analysis Status","aria-describedby":"analysis_status-help"},null,8,["modelValue","options"])]),l("div",{id:"acronym",class:m([{error:T.value},"flex flex-col gap-2"])},[l("label",$e,[d(l("i",Re,null,512),[[r,"Short name of the dataset (e.g. CESNET-TLS22) which is used as the unique identifier",void 0,{right:!0}]]),e[17]||(e[17]=i(" Dataset Title* "))]),o(c,{id:"acronym",modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=t=>h.value=t),"aria-describedby":"acronym-help",placeholder:"Dataset Title",onBlur:e[2]||(e[2]=t=>T.value=h.value.length===0)},null,8,["modelValue"]),T.value?(b(),v("small",Ie,e[18]||(e[18]=[l("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1),i(" Dataset Acronym is required and must be unique. ")]))):U("",!0)],2),l("div",we,[l("label",Se,[d(l("i",ke,null,512),[[r,`Additional version for the Dataset Acronym (e.g. CESNET-TLS22-XS).
Used to filter the different subsection of the original dataset`,void 0,{right:!0}]]),e[19]||(e[19]=i(" Dataset Versions "))]),o(c,{id:"versions",modelValue:y.value,"onUpdate:modelValue":e[3]||(e[3]=t=>y.value=t),class:m({error:Y.value}),"aria-describedby":"versions",placeholder:"Versions..."},null,8,["modelValue","class"])]),l("div",{id:"name",class:m([{error:z.value},"flex flex-col gap-2"])},[l("label",Fe,[d(l("i",Ae,null,512),[[r,"Full name of the submitter",void 0,{right:!0}]]),e[20]||(e[20]=i(" Submitter Name "))]),o(c,{id:"name",modelValue:k.value,"onUpdate:modelValue":e[4]||(e[4]=t=>k.value=t),"aria-describedby":"name-help",placeholder:"Name Surname",disabled:""},null,8,["modelValue"]),z.value?(b(),v("small",Ne,e[21]||(e[21]=[l("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1),i(" Submitter Name is required. ")]))):U("",!0)],2),l("div",{id:"email",class:m([{error:j.value},"flex flex-col gap-2"])},[l("label",qe,[d(l("i",Le,null,512),[[r,"Email of the submitter",void 0,{right:!0}]]),e[22]||(e[22]=i(" Submitter Email "))]),o(c,{id:"email",modelValue:F.value,"onUpdate:modelValue":e[5]||(e[5]=t=>F.value=t),"aria-describedby":"email-help",placeholder:"submitter@email",disabled:""},null,8,["modelValue"]),j.value?(b(),v("small",ze,e[23]||(e[23]=[l("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1),i(" Submitter Email is required. ")]))):U("",!0)],2),l("div",{id:"paperTitle",class:m([{error:q.value},"flex flex-col gap-2"])},[l("label",Be,[d(l("i",je,null,512),[[r,"Full title of the paper describing the dataset",void 0,{right:!0}]]),e[24]||(e[24]=i(" Paper Title "))]),o(c,{id:"paperTitle",modelValue:D.value,"onUpdate:modelValue":e[6]||(e[6]=t=>D.value=t),"aria-describedby":"paperTitle-help",placeholder:"Paper Title"},null,8,["modelValue"]),q.value?(b(),v("small",Pe,e[25]||(e[25]=[l("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1),i(" Paper Title is required. ")]))):U("",!0)],2),l("div",{id:"datasetAuthors",class:m([{error:L.value},"flex flex-col gap-2"])},[l("label",Me,[d(l("i",Oe,null,512),[[r,"Authors of the dataset (comma separated)",void 0,{right:!0}]]),e[26]||(e[26]=i(" Dataset Authors "))]),d(o(M,{id:"authors",modelValue:x.value,"onUpdate:modelValue":e[7]||(e[7]=t=>x.value=t),placeholder:"Authors...","aria-describedby":"authors-help",multiple:!0,typeahead:!1},null,8,["modelValue"]),[[r,"The dataset authors.",void 0,{bottom:!0}]]),L.value?(b(),v("small",Xe,e[27]||(e[27]=[l("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1),i(" Dataset Author is required. ")]))):U("",!0)],2),l("div",Ge,[l("label",Ke,[d(l("i",Ye,null,512),[[r,"Short overview description of the dataset",void 0,{right:!0}]]),e[28]||(e[28]=i(" Description "))]),d(o(le,{id:"description",modelValue:E.value,"onUpdate:modelValue":e[8]||(e[8]=t=>E.value=t),"aria-describedby":"description-help",placeholder:"Description...",rows:"5",cols:"30"},null,8,["modelValue"]),[[r,"The description of the dataset.",void 0,{bottom:!0}]])]),l("div",Ze,[l("label",He,[d(l("i",Je,null,512),[[r,"Identify file format of the dataset (e.g. pcap, json, txt, â€¦)",void 0,{right:!0}]]),e[29]||(e[29]=i(" Dataset Format "))]),o(c,{id:"format",modelValue:$.value,"onUpdate:modelValue":e[9]||(e[9]=t=>$.value=t),class:m({error:Z.value}),"aria-describedby":"format-help",placeholder:"Format"},null,8,["modelValue","class"])]),l("div",Qe,[l("label",We,[d(l("i",el,null,512),[[r,"The Label",void 0,{right:!0}]]),e[30]||(e[30]=i(" Dataset Label Name "))]),o(c,{id:"label_name",modelValue:R.value,"onUpdate:modelValue":e[10]||(e[10]=t=>R.value=t),class:m({error:H.value}),"aria-describedby":"label_name-help",placeholder:"Label Name"},null,8,["modelValue","class"])]),l("div",ll,[l("label",al,[d(l("i",tl,null,512),[[r,"Use tags to categorize the dataset (comma separated)",void 0,{right:!0}]]),e[31]||(e[31]=i(" Tags "))]),d(o(M,{id:"tags",modelValue:V.value,"onUpdate:modelValue":e[11]||(e[11]=t=>V.value=t),placeholder:"Tags...","aria-describedby":"tags-help",multiple:!0,typeahead:!1},null,8,["modelValue"]),[[r,"Tags to describe the dataset.",void 0,{bottom:!0}]])]),l("div",sl,[l("label",ol,[d(l("i",il,null,512),[[r,"DOI of the dataset.",void 0,{right:!0}]]),e[32]||(e[32]=i(" DOI "))]),o(c,{id:"doi",modelValue:I.value,"onUpdate:modelValue":e[12]||(e[12]=t=>I.value=t),class:m({error:J.value}),"aria-describedby":"doi-help",placeholder:"DOI"},null,8,["modelValue","class"])]),l("div",{id:"url",class:m([{error:B.value},"flex flex-col gap-2"])},[l("label",nl,[d(l("i",rl,null,512),[[r,"URL of the dataset.",void 0,{right:!0}]]),e[33]||(e[33]=i(" Dataset File URL "))]),o(c,{id:"url",modelValue:w.value,"onUpdate:modelValue":e[13]||(e[13]=t=>w.value=t),"aria-describedby":"url-help",placeholder:"URL"},null,8,["modelValue"])],2),l("div",{id:"url",class:m([{error:B.value},"flex flex-col gap-2"])},[l("label",dl,[d(l("i",ul,null,512),[[r,"Upload new file.",void 0,{right:!0}]]),e[34]||(e[34]=i(" Dataset File Upload "))]),n.value.filename?(b(),v("em",pl,"(Current file: "+X(n.value.filename)+")",1)):(b(),v("em",ml,"(No file uploaded yet)")),o(ae,{name:"upload",auto:!1,multiple:!1,fileLimit:1,"custom-upload":"",ref_key:"fileUpload",ref:A,onUploader:ee,"upload-label":"Upload"},{empty:re(()=>e[35]||(e[35]=[l("p",{class:"flex justify-center"}," Drag and drop file here to upload. ",-1)])),_:1},512)],2),l("footer",cl,[o(O,{label:"Save",icon:"pi pi-save",class:"mr-2",severity:"success",onClick:e[14]||(e[14]=t=>W())}),o(O,{label:"Back",icon:"pi pi-arrow-left",class:"mr-2",severity:"secondary",onClick:e[15]||(e[15]=t=>("navigateTo"in s?s.navigateTo:de(G))(`/detail/${encodeURIComponent(f.value)}/${encodeURIComponent(_.value)}`))})])])])])}}},yl=te(fl,[["__scopeId","data-v-c072b599"]]);export{yl as default};
