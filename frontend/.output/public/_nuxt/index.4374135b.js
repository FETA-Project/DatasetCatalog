import{G as q,H as J,b as L,a as G,q as b,v as A,r as d,e as v,h as l,w as r,u as n,I as M,j as e,o as c,c as D,l as H,k as m,t as _,F as k,f as I,J as z,x as K,d as Q,_ as W}from"./entry.e2054ab2.js";import{a as U,M as X}from"./menu.f5e3f6dc.js";import{_ as Y}from"./date.d6442393.js";const Z=e("h1",null,"Dataset Catalog",-1),P={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},ee={class:"p-input-icon-left"},te=e("i",{class:"pi pi-search"},null,-1),ae={class:"flex gap-1"},le=["href"],oe={class:"flex gap-1"},ne={class:"flex"},se={style:{"list-style":"none"}},ie=e("b",null,"Paper Title: ",-1),de={class:"flex gap-2"},re=e("b",null,"Authors: ",-1),ce=e("b",null,"Date Submitted: ",-1),ue=e("b",null,"Submitter: ",-1),me=e("b",null,"Name: ",-1),_e=e("b",null,"Email: ",-1),pe=e("b",null,"Description: ",-1),fe=e("b",null,"Origins: ",-1),he=["href"],De={__name:"index",setup(be){q();const R=J(),g=L(),E=G(),C=b(null),u=b([]),x=b([]),w=b({global:{value:null,matchMode:z.CONTAINS}}),T=b([]),N=Q(()=>W(()=>import("./upload.2a7fc98a.js"),["./upload.2a7fc98a.js","./entry.e2054ab2.js","./entry.076fc270.css","./menu.f5e3f6dc.js","./menu.d6419823.css","./upload.6918fed0.css"],import.meta.url)),S=()=>{U.get("/api/datasets").then(o=>{T.value=o.data,T.value.forEach(t=>{t.metadata=JSON.stringify(t,function(y,i){if(i&&typeof i=="object"){var p={};for(var f in i)Object.hasOwnProperty.call(i,f)&&(p[f&&f.replaceAll("_"," ")]=i[f]);return p}return i})})}).catch(o=>{g.add({severity:"error",summary:"Error while getting datasets",detail:o.response.data,life:3e3})})};A(()=>{S()});const V=(o,t)=>{console.log(o,t),t==""&&(t=o),K(`/detail/${encodeURIComponent(o)}/${encodeURIComponent(t)}`)},O=()=>{let o=[];u.value.forEach(t=>{o.push({acronym:t.acronym,aliases:t.acronym_aliases})}),R.require({message:`Are you sure you want to delete ${o.length} files`,header:"Delete Confirmation",icon:"pi pi-exclemation-triangle",accept:()=>{u.value=null,o.forEach(t=>{U.delete(`/api/datasets/${encodeURIComponent(t.acronym)}/${encodeURIComponent(t.aliases)}`).then(()=>{g.add({severity:"success",summary:"Delete Successful",detail:`Dataset ${t.acronym}/${t.aliases} deleted successfully.`,life:3e3}),S()}).catch(y=>{g.add({severity:"error",summary:"Delete Failed",detail:y.response.data,life:3e3})})})}})},B=()=>{E.open(N,{props:{header:"Submit Dataset",modal:!0},onClose:o=>{const t=o.data;t&&(g.add({severity:"success",summary:"Upload Successful",detail:`File ${t} uploaded successfully.`,life:3e3}),S())}})};return A(()=>{U.get("/api/users/me").then(o=>{C.value=o.data}).catch()}),(o,t)=>{const y=d("Toast"),i=d("ConfirmDialog"),p=d("Button"),f=d("InputText"),s=d("Column"),$=d("Chip"),F=d("DataTable"),j=d("DynamicDialog");return c(),v("div",null,[l(y,{position:"bottom-right"}),l(X),Z,l(i),l(F,{value:n(T),scrollable:"",filters:n(w),selection:n(u),"onUpdate:selection":t[2]||(t[2]=a=>M(u)?u.value=a:null),"expanded-rows":n(x),"onUpdate:expandedRows":t[3]||(t[3]=a=>M(x)?x.value=a:null)},{header:r(()=>[e("div",P,[e("div",null,[l(p,{label:"Submit Dataset",icon:"pi pi-ticket",class:"mr-2",onClick:B}),n(C)&&n(C).is_admin?(c(),D(p,{key:0,label:"Delete",icon:"pi pi-trash",class:"mr-2",severity:"danger",onClick:t[0]||(t[0]=a=>O()),disabled:!n(u)||!n(u).length},null,8,["disabled"])):H("",!0)]),e("span",ee,[te,l(f,{modelValue:n(w).global.value,"onUpdate:modelValue":t[1]||(t[1]=a=>n(w).global.value=a),placeholder:"Search..."},null,8,["modelValue"])])])]),expansion:r(a=>[e("div",ne,[e("ul",se,[e("li",null,[ie,m(" "+_(a.data.paper_title),1)]),e("li",de,[re,(c(!0),v(k,null,I(a.data.authors,h=>(c(),D($,null,{default:r(()=>[m(_(h),1)]),_:2},1024))),256))]),e("li",null,[ce,m(),l(Y,{datetime:a.data.date_submitted},null,8,["datetime"])]),e("li",null,[ue,e("ul",null,[e("li",null,[me,m(" "+_(a.data.submitter.name),1)]),e("li",null,[_e,m(" "+_(a.data.submitter.email),1)])])]),e("li",null,[pe,m(" "+_(a.data.description),1)]),e("li",null,[fe,m(),e("a",{href:a.data.origins_doi,target:"_blank"},_(a.data.origins_doi),9,he)])])])]),default:r(()=>[l(s,{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(s,{expander:"",style:{width:"3rem"}}),l(s,{field:"metadata",header:"Metadata",hidden:""}),l(s,{field:"acronym",header:"Acronym",sortable:""}),l(s,{field:"acronym_aliases",header:"Acronym Aliases","sortable.multiple":""},{body:r(a=>[e("div",ae,[(c(!0),v(k,null,I(a.data.acronym_aliases,h=>(c(),D($,{label:h},null,8,["label"]))),256))])]),_:1}),l(s,{field:"title",header:"Title",sortable:""}),l(s,{field:"doi",header:"DOI"},{body:r(a=>[e("a",{href:"https://doi.org/"+a.data.doi,target:"_blank"},_(a.data.doi),9,le)]),_:1}),l(s,{field:"tags",header:"Tags"},{body:r(a=>[e("div",oe,[(c(!0),v(k,null,I(a.data.tags,h=>(c(),D($,{label:h},null,8,["label"]))),256))])]),_:1}),l(s,null,{body:r(a=>[l(p,{onClick:h=>V(a.data.acronym,a.data.acronym_aliases),label:"Details",icon:"pi pi-info-circle",rounded:"",outlined:""},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters","selection","expanded-rows"]),l(j)])}}};export{De as default};
