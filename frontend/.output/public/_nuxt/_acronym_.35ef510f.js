import{q as W,v as X,b as Y,a as Z,x as ee,r as a,y as le,e as ae,f as x,z as te,h as m,i as r,j as e,t as oe,A as u,B as n,k as o,l as _,p as se,o as v,C as ie,D as re}from"./entry.6c939bcc.js";import{a as $,M as ne}from"./menu.da64e2da.js";const f=V=>(ie("data-v-6c68cb50"),V=V(),re(),V),de={class:"flex flex-column gap-3"},ue={id:"container",class:"card flex justify-content-center"},ce={class:"flex flex-column gap-3 container"},pe={for:"acronym_alias"},me={class:"pi pi-info-circle"},ve={class:"card p-fluid p-hidden-label"},_e={key:0,class:"p-error"},fe=f(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),he={for:"title"},ge={class:"pi pi-info-circle"},be={key:0,class:"p-error"},ye=f(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),xe={for:"name"},Ve={class:"pi pi-info-circle"},Te={key:0,class:"p-error"},De=f(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Ee={for:"email"},Ie={class:"pi pi-info-circle"},Ue={key:0,class:"p-error"},Ce=f(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),we={for:"paperTitle"},ke={class:"pi pi-info-circle"},Ae={key:0,class:"p-error"},Oe=f(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Se={for:"author"},Ne={class:"pi pi-info-circle"},ze={class:"card p-fluid p-hidden-label"},Re={key:0,class:"p-error"},qe=f(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Be={id:"description",class:"flex flex-column gap-2"},Me={for:"Description"},$e={class:"pi pi-info-circle"},je={id:"tags",class:"flex flex-column gap-2"},Pe={for:"tags"},Fe={class:"pi pi-info-circle"},Je={class:"card p-fluid p-hidden-label"},Le={id:"doi",class:"flex flex-column gap-2"},Ge={for:"doi"},He={class:"pi pi-info-circle"},Ke={id:"originsDoi",class:"flex flex-column gap-2"},Qe={for:"originsDoi"},We={class:"pi pi-info-circle"},Xe={for:"url"},Ye={class:"pi pi-info-circle"},Ze={__name:"[acronym]",setup(V){X();const j=Y(),O=Z();ee("dialogRef");const h=a(""),d=a(),S=a(""),P=a(!1),g=a(""),N=a(!1),T=a(""),z=a(!1),D=a(""),R=a(!1),b=a(""),q=a(!1),E=a("");a(!1);const I=a(""),F=a(!1),U=a(""),J=a(!1),C=a(""),B=a(!1),k=a(""),L=a(!1),w=a(""),M=a(!1),y=a();le(S,s=>{P.value=s.length===0});const G=s=>{$.get(`/api/datasets/${encodeURIComponent(s)}`).then(l=>{d.value=l.data.dataset,console.log(d.value),S.value=d.value.acronym,g.value=d.value.acronym_aliases.filter(c=>c!==""),T.value=d.value.title,D.value=d.value.paper_title,b.value=d.value.authors.filter(c=>c!==""),E.value=d.value.description,I.value=d.value.doi,U.value=d.value.origins_doi,C.value=d.value.submitter.name,w.value=d.value.submitter.email,y.value=d.value.tags.filter(c=>c!==""),k.value=d.value.url}).catch(l=>{O.add({severity:"error",summary:"Error while getting dataset",detail:l.response.data,life:3e3})})};async function H(){const s=new FormData;s.append("acronym_aliases",g.value===void 0?[]:g.value),s.append("title",T.value),s.append("paper_title",D.value),s.append("authors",b.value===void 0?[]:b.value),s.append("description",E.value),s.append("doi",I.value),s.append("origins_doi",U.value),s.append("submitter",JSON.stringify({name:C.value,email:w.value})),s.append("tags",y.value===void 0?[]:y.value),await $.post(`/api/datasets/${encodeURIComponent(h.value)}/edit`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{se(`/detail/${encodeURIComponent(h.value)}`)}).catch(l=>{console.log(l),O.add({severity:"error",summary:"Edit Error",detail:l.response.data.detail,life:3e3})})}return ae(()=>{h.value=decodeURIComponent(j.params.acronym),G(h.value)}),(s,l)=>{const c=x("Toast"),A=x("Chips"),p=x("InputText"),K=x("TextArea"),Q=x("Button"),i=te("tooltip");return v(),m("div",de,[r(c,{position:"bottom-right"}),r(ne),e("div",ue,[e("div",ce,[r(c,{position:"bottom-right"}),e("h1",null," Editing "+oe(h.value),1),e("div",{id:"acronym_alias",class:u([{error:N.value},"flex flex-column gap-2"])},[e("label",pe,[n(e("i",me,null,512),[[i,"The acronym aliases.",void 0,{right:!0}]]),o(" Dataset Acronym Aliases ")]),e("div",ve,[n(r(A,{id:"acronym_aliases",modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=t=>g.value=t),separator:",",placeholder:"Aliases...","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[i,"The dataset acronym aliases.",void 0,{bottom:!0}]])]),N.value?(v(),m("small",_e,[fe,o(" Dataset Aliases are required. ")])):_("",!0)],2),e("div",{id:"title",class:u([{error:z.value},"flex flex-column gap-2"])},[e("label",he,[n(e("i",ge,null,512),[[i,"Title of the dataset",void 0,{right:!0}]]),o(" Dataset Title ")]),r(p,{id:"title",modelValue:T.value,"onUpdate:modelValue":l[1]||(l[1]=t=>T.value=t),"aria-describedby":"title-help",placeholder:"Dataset Title"},null,8,["modelValue"]),z.value?(v(),m("small",be,[ye,o(" Dataset Title is required. ")])):_("",!0)],2),e("div",{id:"name",class:u([{error:B.value},"flex flex-column gap-2"])},[e("label",xe,[n(e("i",Ve,null,512),[[i,"Name and surname of the submitter.",void 0,{right:!0}]]),o(" Submitter Name ")]),r(p,{id:"name",modelValue:C.value,"onUpdate:modelValue":l[2]||(l[2]=t=>C.value=t),"aria-describedby":"name-help",placeholder:"Name Surname"},null,8,["modelValue"]),B.value?(v(),m("small",Te,[De,o(" Submitter Name is required. ")])):_("",!0)],2),e("div",{id:"email",class:u([{error:M.value},"flex flex-column gap-2"])},[e("label",Ee,[n(e("i",Ie,null,512),[[i,"Email of the submitter.",void 0,{right:!0}]]),o(" Submitter Email ")]),r(p,{id:"email",modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=t=>w.value=t),"aria-describedby":"email-help",placeholder:"submitter@email"},null,8,["modelValue"]),M.value?(v(),m("small",Ue,[Ce,o(" Submitter Email is required. ")])):_("",!0)],2),e("div",{id:"paperTitle",class:u([{error:R.value},"flex flex-column gap-2"])},[e("label",we,[n(e("i",ke,null,512),[[i,"Title of the dataset",void 0,{right:!0}]]),o(" Paper Title ")]),r(p,{id:"paperTitle",modelValue:D.value,"onUpdate:modelValue":l[4]||(l[4]=t=>D.value=t),"aria-describedby":"paperTitle-help",placeholder:"Paper Title"},null,8,["modelValue"]),R.value?(v(),m("small",Ae,[Oe,o(" Paper Title is required. ")])):_("",!0)],2),e("div",{id:"author",class:u([{error:q.value},"flex flex-column gap-2"])},[e("label",Se,[n(e("i",Ne,null,512),[[i,"Title of the dataset",void 0,{right:!0}]]),o(" Dataset Authors ")]),e("div",ze,[n(r(A,{id:"authors",modelValue:b.value,"onUpdate:modelValue":l[5]||(l[5]=t=>b.value=t),separator:",",placeholder:"Authors...","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[i,"The dataset authors.",void 0,{bottom:!0}]])]),q.value?(v(),m("small",Re,[qe,o(" Dataset Author is required. ")])):_("",!0)],2),e("div",Be,[e("label",Me,[n(e("i",$e,null,512),[[i,"Description of the dataset.",void 0,{right:!0}]]),o(" Description ")]),n(r(K,{id:"description",modelValue:E.value,"onUpdate:modelValue":l[6]||(l[6]=t=>E.value=t),"aria-describedby":"description-help",placeholder:"Description...",rows:"5",cols:"30"},null,8,["modelValue"]),[[i,"The description of the dataset.",void 0,{bottom:!0}]])]),e("div",je,[e("label",Pe,[n(e("i",Fe,null,512),[[i,"Tags (words split by comma) to describe the dataset.",void 0,{right:!0}]]),o(" Tags ")]),e("div",Je,[n(r(A,{id:"tags",modelValue:y.value,"onUpdate:modelValue":l[7]||(l[7]=t=>y.value=t),separator:",",placeholder:"Tag","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[i,"Tags to describe the dataset.",void 0,{bottom:!0}]])])]),e("div",Le,[e("label",Ge,[n(e("i",He,null,512),[[i,"DOI of the dataset.",void 0,{right:!0}]]),o(" DOI ")]),r(p,{id:"doi",modelValue:I.value,"onUpdate:modelValue":l[8]||(l[8]=t=>I.value=t),class:u({error:F.value}),"aria-describedby":"doi-help",placeholder:"DOI"},null,8,["modelValue","class"])]),e("div",Ke,[e("label",Qe,[n(e("i",We,null,512),[[i,"Origins DOI of the dataset.",void 0,{right:!0}]]),o(" Origins DOI ")]),r(p,{id:"originsDoi",modelValue:U.value,"onUpdate:modelValue":l[9]||(l[9]=t=>U.value=t),class:u({error:J.value}),"aria-describedby":"originsDoi-help",placeholder:"Origins DOI"},null,8,["modelValue","class"])]),e("div",{id:"url",class:u([{error:L.value},"flex flex-column gap-2"])},[e("label",Xe,[n(e("i",Ye,null,512),[[i,"Title of the dataset",void 0,{right:!0}]]),o(" Dataset File URL ")]),r(p,{id:"url",modelValue:k.value,"onUpdate:modelValue":l[10]||(l[10]=t=>k.value=t),"aria-describedby":"url-help",placeholder:"Dataset Title"},null,8,["modelValue"])],2),e("footer",null,[r(Q,{label:"Edit",icon:"pi pi-pencil",class:"mr-2",onClick:l[11]||(l[11]=t=>H())})])])])])}}},al=W(Ze,[["__scopeId","data-v-6c68cb50"]]);export{al as default};
