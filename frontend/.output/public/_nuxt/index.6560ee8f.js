import{l as R,m as S,p as F,r as p,b as O,e as h,f as a,w as r,u as n,q as C,h as e,i,o as _,j as m,t as u,F as w,k as T,s as j,c as U}from"./entry.ef179a0b.js";import{a as k,_ as A}from"./menu.f2730974.js";const H=e("h1",null,"Dataset Catalog",-1),L={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},z={class:"p-input-icon-left"},G=e("i",{class:"pi pi-search"},null,-1),J=["href"],K={class:"flex gap-1"},Q={class:"flex justify-content-center"},W={style:{"list-style":"none"}},X=e("b",null,"Requester",-1),Y=e("b",null,"Name:",-1),Z=e("b",null,"Email:",-1),P=e("b",null,"Description:",-1),ee=e("b",null,"Date:",-1),te=e("b",null,"Origins DOI:",-1),le=["href"],oe={__name:"index",setup(ae){const $=R(),B=S(),f=F(),o=p([]),g=p([]),b=p({global:{value:null,matchMode:j.CONTAINS}}),v=p([]),y=()=>{k.get("/api/datasets").then(s=>{v.value=s.data,console.log(v.value)}).catch(s=>{f.add({severity:"error",summary:"Error while getting datasets",detail:s.response.data,life:3e3})})};O(()=>y());const N=s=>{$.push({path:`/detail/${s}`})},V=()=>{let s=[];o.value.forEach(l=>{s.push(l.title)}),B.require({message:`Are you sure you want to delete ${s.length} files`,header:"Delete Confirmation",icon:"pi pi-exclemation-triangle",accept:()=>{o.value=null,s.forEach(l=>{k.delete(`/api/datasets/${l}`).then(()=>{f.add({severity:"success",summary:"Delete Successful",detail:`Dataset ${l} deleted successfully.`,life:3e3}),y()}).catch(x=>{f.add({severity:"error",summary:"Delete Failed",detail:x.response.data,life:3e3})})})}})};return(s,l)=>{const x=i("Toast"),q=i("ConfirmDialog"),D=i("Button"),E=i("InputText"),d=i("Column"),I=i("Chip"),M=i("DataTable");return _(),h("div",null,[a(x,{position:"bottom-right"}),a(A),H,a(q),a(M,{value:n(v),scrollable:"",scrollHeight:"500px",filters:n(b),selection:n(o),"onUpdate:selection":l[2]||(l[2]=t=>C(o)?o.value=t:null),"expanded-rows":n(g),"onUpdate:expandedRows":l[3]||(l[3]=t=>C(g)?g.value=t:null)},{header:r(()=>[e("div",L,[e("div",null,[a(D,{label:"Delete",icon:"pi pi-trash",severity:"danger",onClick:l[0]||(l[0]=t=>V()),disabled:!n(o)||!n(o).length},null,8,["disabled"])]),e("span",z,[G,a(E,{modelValue:n(b).global.value,"onUpdate:modelValue":l[1]||(l[1]=t=>n(b).global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),expansion:r(t=>[e("div",Q,[e("ul",W,[e("li",null,[X,e("ul",null,[e("li",null,[Y,m(" "+u(t.data.requester.name),1)]),e("li",null,[Z,m(" "+u(t.data.requester.email),1)])])]),e("li",null,[P,m(" "+u(t.data.description),1)]),e("li",null,[ee,m(" "+u(t.data.date),1)]),e("li",null,[te,e("ul",null,[(_(!0),h(w,null,T(t.data.origins_doi,c=>(_(),h("li",null,[e("a",{href:"https://doi.org/"+c,target:"_blank"},u(c),9,le)]))),256))])])])])]),default:r(()=>[a(d,{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(d,{expander:"",style:{width:"3rem"}}),a(d,{field:"title",header:"Title",sortable:""}),a(d,{header:"DOI"},{body:r(t=>[e("a",{href:"https://doi.org/"+t.data.doi,target:"_blank"},u(t.data.doi),9,J)]),_:1}),a(d,{field:"tags",header:"Tags"},{body:r(t=>[e("div",K,[(_(!0),h(w,null,T(t.data.tags,c=>(_(),U(I,{label:c},null,8,["label"]))),256))])]),_:1}),a(d,null,{body:r(t=>[a(D,{onClick:c=>N(t.data.title),label:"Details",icon:"pi pi-info-circle",rounded:"",outlined:""},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters","selection","expanded-rows"])])}}};export{oe as default};
