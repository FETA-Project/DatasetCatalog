const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BnPsqSLd.js","./DU3s_J-k.js","./DW_MHI2K.js","./create_tool.XTPOQ1uw.css","./YSSZQ9Kb.js","./edit_tool.BLEh1jSC.css"])))=>i.map(i=>d[i]);
import{u as j,m as z,n as G,p as H,r as u,q as w,c as J,b as l,a as n,w as r,s as x,v as s,x as K,o as b,y as P,z as Q,A as W,t as v,B as D,C as k,D as X,d as T,E as Y,F as Z,G as ee,H as te,I as $,J as E}from"./DU3s_J-k.js";import{a as y}from"./DW_MHI2K.js";import{M as oe}from"./CeymNAjJ.js";const le={class:"flex flex-wrap gap-2 items-center justify-between"},ne=["href"],se={class:"flex"},ae={style:{"list-style":"none"}},pe={__name:"collection_tools",setup(ie){j();const I=z(),m=G(),C=H(),d=u(null),a=u([]),_=u([]),f=u({global:{value:null,matchMode:"contains"}}),h=u([]),R=$(()=>E(()=>import("./BnPsqSLd.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),V=$(()=>E(()=>import("./YSSZQ9Kb.js"),__vite__mapDeps([4,1,2,5]),import.meta.url)),p=()=>{y.get("/api/collectionTools").then(t=>{h.value=t.data}).catch(t=>{m.add({severity:"error",summary:"Error while getting datasets",detail:t.response.data,life:3e3})})};w(()=>{p()});const U=(t,e=!1)=>{let i=t;return/^https?:\/\//i.test(t)||(i=`https://${t}`),e?window.open(i,"_blank"):i},B=()=>{let t=[];a.value.forEach(e=>{t.push({name:e.name})}),I.require({message:`Are you sure you want to delete ${t.length} collection tools`,header:"Delete Confirmation",icon:"pi pi-exclemation-triangle",accept:()=>{a.value=null,t.forEach(e=>{y.delete(`/api/collectionTools/${encodeURIComponent(e.name)}`).then(()=>{m.add({severity:"success",summary:"Delete Successful",detail:`Collection tool ${e.name} deleted successfully.`,life:3e3}),p()}).catch(i=>{m.add({severity:"error",summary:"Delete Failed",detail:i.response.data,life:3e3})})})}})},M=()=>{C.open(R,{props:{header:"Create Collection Tool",modal:!0},onClose:t=>{console.log("Dialog closed: "+t),p()}})},A=t=>{C.open(V,{props:{header:"Edit Collection Tool",modal:!0},data:{name:t.name,description:t.description,known_issues:t.known_issues,url:t.url},onClose:()=>{p()}})};return w(()=>{y.get("/api/users/me").then(t=>{d.value=t.data}).catch()}),(t,e)=>{const i=P,N=Q,g=X,L=Z,S=ee,F=Y,c=W,q=K,O=te;return b(),J("div",null,[l(i,{position:"bottom-right"}),l(oe),e[8]||(e[8]=n("h1",{class:"m-4 text-3xl font-bold"},"Collection Tools",-1)),l(N),l(q,{value:s(h),scrollable:"",filters:s(f),selection:s(a),"onUpdate:selection":e[2]||(e[2]=o=>x(a)?a.value=o:null),"expanded-rows":s(_),"onUpdate:expandedRows":e[3]||(e[3]=o=>x(_)?_.value=o:null)},{header:r(()=>[n("div",le,[n("div",null,[l(g,{label:"Create Collection Tool",icon:"pi pi-ticket",class:"mr-2",onClick:M}),s(d)&&s(d).is_admin?(b(),D(g,{key:0,label:"Delete",icon:"pi pi-trash",class:"mr-2",severity:"danger",onClick:e[0]||(e[0]=o=>B()),disabled:!s(a)||!s(a).length},null,8,["disabled"])):k("",!0)]),l(F,null,{default:r(()=>[l(L,null,{default:r(()=>e[4]||(e[4]=[n("i",{class:"pi pi-search"},null,-1)])),_:1}),l(S,{modelValue:s(f).global.value,"onUpdate:modelValue":e[1]||(e[1]=o=>s(f).global.value=o),placeholder:"Search..."},null,8,["modelValue"])]),_:1})])]),expansion:r(o=>[n("div",se,[n("ul",ae,[n("li",null,[e[5]||(e[5]=n("b",null,"Description: ",-1)),T(" "+v(o.data.description),1)]),e[7]||(e[7]=n("br",null,null,-1)),n("li",null,[e[6]||(e[6]=n("b",null,"Known Issues: ",-1)),T(" "+v(o.data.known_issues),1)])])])]),default:r(()=>[l(c,{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(c,{expander:"",style:{width:"3rem"}}),l(c,{field:"name",header:"Name",sortable:""}),l(c,{field:"url",header:"URL"},{body:r(o=>[n("a",{href:U(o.data.url),about:"_blank"},v(o.data.url),9,ne)]),_:1}),l(c,null,{body:r(o=>[s(d)&&s(d).is_admin?(b(),D(g,{key:0,onClick:re=>A(o.data),label:"Edit",icon:"pi pi-pencil",rounded:"",outlined:""},null,8,["onClick"])):k("",!0)]),_:1})]),_:1},8,["value","filters","selection","expanded-rows"]),l(O)])}}};export{pe as default};
