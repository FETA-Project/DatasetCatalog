import{D as F,E as N,a as R,G as O,r as p,e as j,f as s,h as x,i as l,w as u,u as n,H as C,j as e,o as D,k as c,t as i,F as H,m as L,c as q,I as G,p as z,d as J,_ as K}from"./entry.16541f52.js";import{a as w,M as Q}from"./menu.4725e800.js";const W=e("h1",null,"Dataset Catalog",-1),X={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},Y={class:"p-input-icon-left"},Z=e("i",{class:"pi pi-search"},null,-1),P=["href"],ee={class:"flex gap-1"},te={class:"flex justify-content-center"},ae={style:{"list-style":"none"}},le=e("b",null,"Paper Title: ",-1),oe=e("b",null,"Author: ",-1),se=e("b",null,"Date Submitted: ",-1),ne=e("b",null,"Submitter: ",-1),ie=e("b",null,"Name: ",-1),de=e("b",null,"Email: ",-1),re=e("b",null,"Description: ",-1),ce=e("b",null,"Origins DOI: ",-1),_e={__name:"index",setup(ue){F();const T=N(),m=R(),k=O(),d=p([]),_=p([]),h=p({global:{value:null,matchMode:G.CONTAINS}}),f=p([]),S=J(()=>K(()=>import("./upload.7b46dc80.js"),["./upload.7b46dc80.js","./entry.16541f52.js","./entry.076fc270.css","./menu.4725e800.js","./menu.16430c06.css","./upload.191c3399.css"],import.meta.url)),b=()=>{w.get("/api/datasets").then(o=>{f.value=o.data,console.log(f.value)}).catch(o=>{m.add({severity:"error",summary:"Error while getting datasets",detail:o.response.data,life:3e3})})};j(()=>{b()});const E=o=>{z(`/detail/${encodeURIComponent(o)}`)},I=()=>{let o=[];d.value.forEach(a=>{o.push(a.acronym)}),T.require({message:`Are you sure you want to delete ${o.length} files`,header:"Delete Confirmation",icon:"pi pi-exclemation-triangle",accept:()=>{d.value=null,o.forEach(a=>{w.delete(`/api/datasets/${a}`).then(()=>{m.add({severity:"success",summary:"Delete Successful",detail:`Dataset ${a} deleted successfully.`,life:3e3}),b()}).catch(g=>{m.add({severity:"error",summary:"Delete Failed",detail:g.response.data,life:3e3})})})}})},M=()=>{k.open(S,{props:{header:"Submit Dataset",modal:!0},onClose:o=>{const a=o.data;a&&(m.add({severity:"success",summary:"Upload Successful",detail:`File ${a} uploaded successfully.`,life:3e3}),b())}})};return(o,a)=>{const g=s("Toast"),U=s("ConfirmDialog"),y=s("Button"),V=s("InputText"),r=s("Column"),$=s("Chip"),A=s("DataTable"),B=s("DynamicDialog");return D(),x("div",null,[l(g,{position:"bottom-right"}),l(Q),W,l(U),l(A,{value:n(f),scrollable:"",scrollHeight:"500px",filters:n(h),selection:n(d),"onUpdate:selection":a[2]||(a[2]=t=>C(d)?d.value=t:null),"expanded-rows":n(_),"onUpdate:expandedRows":a[3]||(a[3]=t=>C(_)?_.value=t:null)},{header:u(()=>[e("div",X,[e("div",null,[l(y,{label:"Submit Dataset",icon:"pi pi-ticket",class:"mr-2",onClick:M}),l(y,{label:"Delete",icon:"pi pi-trash",class:"mr-2",severity:"danger",onClick:a[0]||(a[0]=t=>I()),disabled:!n(d)||!n(d).length},null,8,["disabled"])]),e("span",Y,[Z,l(V,{modelValue:n(h).global.value,"onUpdate:modelValue":a[1]||(a[1]=t=>n(h).global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),expansion:u(t=>[e("div",te,[e("ul",ae,[e("li",null,[le,c(" "+i(t.data.paper_title),1)]),e("li",null,[oe,c(" "+i(t.data.author),1)]),e("li",null,[se,c(" "+i(t.data.date_submitted),1)]),e("li",null,[ne,e("ul",null,[e("li",null,[ie,c(" "+i(t.data.submitter_name),1)]),e("li",null,[de,c(" "+i(t.data.submitter_email),1)])])]),e("li",null,[re,c(" "+i(t.data.description),1)]),e("li",null,[ce,c(" "+i(t.data.origins_doi),1)])])])]),default:u(()=>[l(r,{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(r,{expander:"",style:{width:"3rem"}}),l(r,{field:"acronym",header:"Acronym",sortable:""}),l(r,{field:"title",header:"Title",sortable:""}),l(r,{header:"DOI"},{body:u(t=>[e("a",{href:"https://doi.org/"+t.data.doi,target:"_blank"},i(t.data.doi),9,P)]),_:1}),l(r,{field:"tags",header:"Tags"},{body:u(t=>[e("div",ee,[(D(!0),x(H,null,L(t.data.tags,v=>(D(),q($,{label:v},null,8,["label"]))),256))])]),_:1}),l(r,null,{body:u(t=>[l(y,{onClick:v=>E(t.data.acronym),label:"Details",icon:"pi pi-info-circle",rounded:"",outlined:""},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters","selection","expanded-rows"]),l(B)])}}};export{_e as default};
