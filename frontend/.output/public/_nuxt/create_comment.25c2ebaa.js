import{z as A,A as B,b as I,i as D,q as l,v as R,B as E,r as m,m as z,o as p,e as _,j as t,h as v,C as j,p as g,k as f,l as T,D as S,E as U}from"./entry.18922f6a.js";import{a as $}from"./menu.f91da9d2.js";const C=i=>(S("data-v-0bf11fa0"),i=i(),U(),i),F={id:"container",class:"card flex justify-content-center"},M={class:"flex flex-column gap-3 container"},G={for:"author"},H={class:"pi pi-info-circle"},J={key:0,class:"p-error"},K=C(()=>t("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),L={id:"text",class:"flex flex-column gap-2"},O={for:"Text"},P={class:"pi pi-info-circle"},Q={key:0,class:"p-error"},W=C(()=>t("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),X=C(()=>t("footer",null,[t("small",null,"* required field")],-1)),Y={__name:"create_comment",setup(i){B();const c=I(),r=D("dialogRef"),s=l(""),h=l(!1),n=l(""),d=l(!1),x=l(""),o=l(!1),u=l("");R(()=>{x.value=r.value.data.belongs_to,o.value=r.value.data.edit,s.value=r.value.data.text,u.value=r.value.data.comment_id});async function V(){const e=new FormData;if(e.append("text",s.value),s.value.length==0){h.value=!0,c.add({severity:"error",summary:"Request Error",detail:"Text is required.",life:3e3});return}if(!o.value){if(e.append("author",n.value),e.append("belongs_to",x.value),n.value.length==0){d.value=!0,c.add({severity:"error",summary:"Request Error",detail:"Name is required.",life:3e3});return}u.value!=null&&e.append("parent_id",u.value)}await $.post(`/api/comments${o.value?`/${u.value}`:""}`,e,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{c.add({severity:"success",summary:o?"Comment Edited":"Comment Added",life:1e3}),r.value.close(x.value)}).catch(a=>{console.log(a),c.add({severity:"error",summary:o?"Comment Edit Error":"Comment Add Error",detail:a.response.data.detail,life:3e3})})}return E(n,e=>{o.value||(d.value=e.length===0)}),E(s,e=>{h.value=e.length===0}),(e,a)=>{const q=m("Toast"),N=m("InputText"),k=m("TextArea"),w=m("Button"),y=z("tooltip");return p(),_("div",F,[t("div",M,[v(q,{position:"bottom-right"}),o.value?T("",!0):(p(),_("div",{key:0,id:"author",class:j([{error:d.value},"flex flex-column gap-2"])},[t("label",G,[g(t("i",H,null,512),[[y,"Name of the commentor.",void 0,{right:!0}]]),f(" Name ")]),v(N,{id:"author",modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=b=>n.value=b),"aria-describedby":"author-help",placeholder:"Name"},null,8,["modelValue"]),d.value?(p(),_("small",J,[K,f(" Name is required. ")])):T("",!0)],2)),t("div",L,[t("label",O,[g(t("i",P,null,512),[[y,"Text of the comment.",void 0,{right:!0}]]),f(" Text ")]),g(v(k,{id:"text",modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=b=>s.value=b),"aria-describedby":"text-help",placeholder:"Text...",rows:"5",cols:"30",required:""},null,8,["modelValue"]),[[y,"The text of the comment.",void 0,{bottom:!0}]]),h.value?(p(),_("small",Q,[W,f(" Text is required. ")])):T("",!0)]),v(w,{label:o.value?"Edit Comment":"Add Comment",onClick:V},null,8,["label"]),X])])}}},te=A(Y,[["__scopeId","data-v-0bf11fa0"]]);export{te as default};
