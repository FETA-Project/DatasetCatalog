import{q as H,s as K,b as L,a as Q,v as W,r as l,x as X,e as Y,f,y as Z,h as p,i as s,j as e,t as ee,z as c,A as d,k as i,l as h,p as te,o as m,B as le,C as ae}from"./entry.36ad8f8e.js";import{a as q,M as oe}from"./menu.de1ac60a.js";const g=b=>(le("data-v-6e530f1e"),b=b(),ae(),b),ie={class:"flex flex-column gap-3"},se={id:"container",class:"card flex justify-content-center"},re={class:"flex flex-column gap-3 container"},ne={for:"title"},de={class:"pi pi-info-circle"},ue={key:0,class:"p-error"},ce=g(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),pe={for:"name"},me={class:"pi pi-info-circle"},ve={key:0,class:"p-error"},_e=g(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),fe={for:"email"},he={class:"pi pi-info-circle"},ge={key:0,class:"p-error"},be=g(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),xe={for:"paperTitle"},ye={class:"pi pi-info-circle"},Te={key:0,class:"p-error"},Ve=g(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),De={for:"author"},Ee={class:"pi pi-info-circle"},Ie={key:0,class:"p-error"},Ue=g(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Ce={id:"description",class:"flex flex-column gap-2"},Oe={for:"Description"},Se={class:"pi pi-info-circle"},ke={id:"tags",class:"flex flex-column gap-2"},we={for:"tags"},Ne={class:"pi pi-info-circle"},ze={class:"card p-fluid p-hidden-label"},Re={id:"doi",class:"flex flex-column gap-2"},qe={for:"doi"},Ae={class:"pi pi-info-circle"},Be={id:"originsDoi",class:"flex flex-column gap-2"},Me={for:"originsDoi"},$e={class:"pi pi-info-circle"},je={__name:"[acronym]",setup(b){K();const A=L(),C=Q();W("dialogRef");const v=l(""),r=l(),O=l(""),B=l(!1),x=l(""),S=l(!1),y=l(""),k=l(!1),T=l(""),w=l(!1),V=l("");l(!1);const D=l(""),M=l(!1),E=l(""),$=l(!1),I=l(""),N=l(!1),U=l(""),z=l(!1),_=l();X(O,o=>{B.value=o.length===0});const j=o=>{q.get(`/api/datasets/${encodeURIComponent(o)}`).then(t=>{r.value=t.data.dataset,console.log(r.value),O.value=r.value.acronym,x.value=r.value.title,y.value=r.value.paper_title,T.value=r.value.author,V.value=r.value.description,D.value=r.value.doi,E.value=r.value.origins_doi,I.value=r.value.submitter.name,U.value=r.value.submitter.email,_.value=r.value.tags}).catch(t=>{C.add({severity:"error",summary:"Error while getting dataset",detail:t.response.data,life:3e3})})};async function P(){const o=new FormData;o.append("title",x.value),o.append("paper_title",y.value),o.append("author",T.value),o.append("description",V.value),o.append("doi",D.value),o.append("origins_doi",E.value),o.append("submitter",JSON.stringify({name:I.value,email:U.value})),o.append("tags",_.value===void 0?[]:_.value),await q.post(`/api/datasets/${encodeURIComponent(v.value)}/edit`,o,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{te(`/detail/${encodeURIComponent(v.value)}`)}).catch(t=>{console.log(t),C.add({severity:"error",summary:"Edit Error",detail:t.response.data.detail,life:3e3})})}return Y(()=>{v.value=decodeURIComponent(A.params.acronym),j(v.value)}),(o,t)=>{const R=f("Toast"),u=f("InputText"),F=f("TextArea"),J=f("Chips"),G=f("Button"),n=Z("tooltip");return m(),p("div",ie,[s(R,{position:"bottom-right"}),s(oe),e("div",se,[e("div",re,[s(R,{position:"bottom-right"}),e("h1",null," Editing "+ee(v.value),1),e("div",{id:"title",class:c([{error:S.value},"flex flex-column gap-2"])},[e("label",ne,[d(e("i",de,null,512),[[n,"Title of the dataset",void 0,{right:!0}]]),i(" Dataset Title ")]),s(u,{id:"title",modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=a=>x.value=a),"aria-describedby":"title-help",placeholder:"Dataset Title"},null,8,["modelValue"]),S.value?(m(),p("small",ue,[ce,i(" Dataset Title is required. ")])):h("",!0)],2),e("div",{id:"name",class:c([{error:N.value},"flex flex-column gap-2"])},[e("label",pe,[d(e("i",me,null,512),[[n,"Name and surname of the submitter.",void 0,{right:!0}]]),i(" Submitter Name ")]),s(u,{id:"name",modelValue:I.value,"onUpdate:modelValue":t[1]||(t[1]=a=>I.value=a),"aria-describedby":"name-help",placeholder:"Name Surname"},null,8,["modelValue"]),N.value?(m(),p("small",ve,[_e,i(" Submitter Name is required. ")])):h("",!0)],2),e("div",{id:"email",class:c([{error:z.value},"flex flex-column gap-2"])},[e("label",fe,[d(e("i",he,null,512),[[n,"Email of the submitter.",void 0,{right:!0}]]),i(" Submitter Email ")]),s(u,{id:"email",modelValue:U.value,"onUpdate:modelValue":t[2]||(t[2]=a=>U.value=a),"aria-describedby":"email-help",placeholder:"submitter@email"},null,8,["modelValue"]),z.value?(m(),p("small",ge,[be,i(" Submitter Email is required. ")])):h("",!0)],2),e("div",{id:"paperTitle",class:c([{error:k.value},"flex flex-column gap-2"])},[e("label",xe,[d(e("i",ye,null,512),[[n,"Title of the dataset",void 0,{right:!0}]]),i(" Paper Title ")]),s(u,{id:"paperTitle",modelValue:y.value,"onUpdate:modelValue":t[3]||(t[3]=a=>y.value=a),"aria-describedby":"paperTitle-help",placeholder:"Paper Title"},null,8,["modelValue"]),k.value?(m(),p("small",Te,[Ve,i(" Paper Title is required. ")])):h("",!0)],2),e("div",{id:"paperTitle",class:c([{error:w.value},"flex flex-column gap-2"])},[e("label",De,[d(e("i",Ee,null,512),[[n,"Title of the dataset",void 0,{right:!0}]]),i(" Dataset Author ")]),s(u,{id:"author",modelValue:T.value,"onUpdate:modelValue":t[4]||(t[4]=a=>T.value=a),"aria-describedby":"author-help",placeholder:"Dataset Author"},null,8,["modelValue"]),w.value?(m(),p("small",Ie,[Ue,i(" Dataset Author is required. ")])):h("",!0)],2),e("div",Ce,[e("label",Oe,[d(e("i",Se,null,512),[[n,"Description of the dataset.",void 0,{right:!0}]]),i(" Description ")]),d(s(F,{id:"description",modelValue:V.value,"onUpdate:modelValue":t[5]||(t[5]=a=>V.value=a),"aria-describedby":"description-help",placeholder:"Description...",rows:"5",cols:"30"},null,8,["modelValue"]),[[n,"The description of the dataset.",void 0,{bottom:!0}]])]),e("div",ke,[e("label",we,[d(e("i",Ne,null,512),[[n,"Tags (words split by comma) to describe the dataset.",void 0,{right:!0}]]),i(" Tags ")]),e("div",ze,[d(s(J,{id:"tags",modelValue:_.value,"onUpdate:modelValue":t[6]||(t[6]=a=>_.value=a),separator:",",placeholder:"Tag","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[n,"Tags to describe the dataset.",void 0,{bottom:!0}]])])]),e("div",Re,[e("label",qe,[d(e("i",Ae,null,512),[[n,"DOI of the dataset.",void 0,{right:!0}]]),i(" DOI ")]),s(u,{id:"doi",modelValue:D.value,"onUpdate:modelValue":t[7]||(t[7]=a=>D.value=a),class:c({error:M.value}),"aria-describedby":"doi-help",placeholder:"DOI"},null,8,["modelValue","class"])]),e("div",Be,[e("label",Me,[d(e("i",$e,null,512),[[n,"Origins DOI of the dataset.",void 0,{right:!0}]]),i(" Origins DOI ")]),s(u,{id:"originsDoi",modelValue:E.value,"onUpdate:modelValue":t[8]||(t[8]=a=>E.value=a),class:c({error:$.value}),"aria-describedby":"originsDoi-help",placeholder:"Origins DOI"},null,8,["modelValue","class"])]),e("footer",null,[s(G,{label:"Edit",icon:"pi pi-pencil",class:"mr-2",onClick:t[9]||(t[9]=a=>P())})])])])])}}},Je=H(je,[["__scopeId","data-v-6e530f1e"]]);export{Je as default};
