import{_ as te,ad as se,n as oe,r as l,f as ie,q as ne,c as v,b as o,a,t as G,aa as d,d as i,a9 as m,C as U,w as re,v as de,ah as ue,G as pe,ai as me,aj as ce,ak as fe,af as X,D as ve,al as be,T as he,o as b,y as _e,ab as ye}from"./NsHqofmf.js";import{M as ge}from"./BhSyuozP.js";import{a as S}from"./DW_MHI2K.js";const xe={class:"flex flex-col gap-4"},Ve={id:"container",class:"card flex justify-center"},Ue={class:"flex flex-col gap-4 container"},Te={class:"mt-4 mb-4 text-3xl font-bold"},Ce={id:"analysis_status",class:"flex flex-col gap-2"},De={for:"analysis_status"},Ee={class:"pi pi-info-circle"},$e={for:"title"},Ie={class:"pi pi-info-circle"},Re={key:0,class:"p-error"},we={id:"versions",class:"flex flex-col gap-2"},Se={for:"versions"},ke={class:"pi pi-info-circle"},Fe={for:"name"},Ae={class:"pi pi-info-circle"},Ne={key:0,class:"p-error"},qe={for:"email"},Le={class:"pi pi-info-circle"},ze={key:0,class:"p-error"},je={for:"paperTitle"},Be={class:"pi pi-info-circle"},Me={key:0,class:"p-error"},Pe={for:"authors"},Oe={class:"pi pi-info-circle"},Ge={key:0,class:"p-error"},Xe={id:"description",class:"flex flex-col gap-2"},He={for:"Description"},Je={class:"pi pi-info-circle"},Ke={id:"format",class:"flex flex-col gap-2"},Qe={for:"format"},We={class:"pi pi-info-circle"},Ye={id:"label_name",class:"flex flex-col gap-2"},Ze={for:"label_name"},ea={class:"pi pi-info-circle"},aa={id:"tags",class:"flex flex-col gap-2"},la={for:"tags"},ta={class:"pi pi-info-circle"},sa={id:"doi",class:"flex flex-col gap-2"},oa={for:"doi"},ia={class:"pi pi-info-circle"},na={for:"url"},ra={class:"pi pi-info-circle"},da={for:"url"},ua={class:"pi pi-info-circle"},pa={key:0},ma={key:1},ca={class:"flex justify-between mb-4"},fa={__name:"[versions]",setup(va){be();const N=se(),g=oe();he("dialogRef");const f=l(""),_=l(""),n=l({filename:""}),H=l([{status:"Requested"},{status:"In Progress"},{status:"Completed"}]),h=l(""),T=l(!1),C=l("");l(!1);const y=l(""),J=l(!1);l(""),l(!1);const D=l(""),q=l(!1),x=l(""),L=l(!1),E=l("");l(!1);const $=l(""),K=l(!1),I=l(""),Q=l(!1),R=l(""),W=l(!1),k=l(""),z=l(!1),w=l(""),j=l(!1),F=l(""),B=l(!1),V=l(),A=l(null);ie(h,s=>{T.value=s.length===0});const Y=(s,e)=>{S.get(`/api/datasets/${encodeURIComponent(s)}/${e}`).then(u=>{n.value=u.data.dataset,console.log(n.value),h.value=n.value.acronym,y.value=n.value.versions.filter(p=>p!==""),D.value=n.value.paper_title,x.value=n.value.authors.filter(p=>p!==""),E.value=n.value.description,$.value=n.value.format,R.value=n.value.doi,k.value=n.value.submitter.name,F.value=n.value.submitter.email,V.value=n.value.tags.filter(p=>p!==""),w.value=n.value.url,C.value={status:n.value.analysis_status},I.value=n.value.label_name}).catch(u=>{g.add({severity:"error",summary:"Error while getting dataset",detail:u.response.data,life:3e3})})};async function Z(){const s=new FormData;s.append("acronym",h.value),s.append("versions",y.value===void 0?[]:y.value),s.append("paper_title",D.value),s.append("authors",x.value===void 0?[]:x.value),s.append("description",E.value),s.append("format",$.value),s.append("doi",R.value),s.append("tags",V.value===void 0?[]:V.value),s.append("url",w.value),s.append("analysis_status",C.value.status),s.append("label_name",I.value),await S.post(`/api/datasets/${encodeURIComponent(f.value)}/${encodeURIComponent(_.value)}/edit`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{let e=y.value,u=h.value;e==""&&(e="*"),X(`/detail/${encodeURIComponent(u)}/${encodeURIComponent(e)}`)}).catch(e=>{console.log(e),g.add({severity:"error",summary:"Edit Error",detail:e.response.data.detail,life:3e3})})}function M(){A.value.clear(),A.value.uploadedFileCount=0}async function ee(s){const e=new FormData;s.files!==void 0&&e.append("file",s.files[0]),e.forEach(u=>{console.log(u)}),await S.post(`/api/datasets/${encodeURIComponent(f.value)}/${encodeURIComponent(_.value)}/upload`,e,{headers:{"Content-Type":"multipart/form-data"}}).then(u=>{console.log(u.data),g.add({severity:"success",summary:"File Uploaded",detail:`File for ${f.value} has been uploaded.`,life:3e3}),M(),S.get(`/api/datasets/${encodeURIComponent(f.value)}/${encodeURIComponent(_.value)}`).then(p=>{n.value.filename=p.data.dataset.filename}).catch(p=>{g.add({severity:"error",summary:"Error while getting dataset",detail:p.response.data,life:3e3})})}).catch(u=>{console.log(u),g.add({severity:"error",summary:"Upload Error",detail:u.response.data.detail,life:3e3}),M()})}return ne(()=>{f.value=decodeURIComponent(N.params.acronym),_.value=decodeURIComponent(N.params.versions),Y(f.value,_.value)}),(s,e)=>{const u=_e,p=ue,c=pe,P=me,ae=ce,le=fe,O=ve,r=ye;return b(),v("div",xe,[o(u,{position:"bottom-right"}),o(ge),a("div",Ve,[a("div",Ue,[o(u,{position:"bottom-right"}),a("h1",Te," Editing "+G(f.value),1),a("div",Ce,[a("label",De,[d(a("i",Ee,null,512),[[r,"The status of analysis.",void 0,{right:!0}]]),e[16]||(e[16]=i(" Dataset Analysis Status "))]),o(p,{id:"analysis_status",modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=t=>C.value=t),options:H.value,"option-label":"status",placeholder:"Analysis Status","aria-describedby":"analysis_status-help"},null,8,["modelValue","options"])]),a("div",{id:"acronym",class:m([{error:T.value},"flex flex-col gap-2"])},[a("label",$e,[d(a("i",Ie,null,512),[[r,"Short name of the dataset (e.g. CESNET-TLS22) which is used as the unique identifier",void 0,{right:!0}]]),e[17]||(e[17]=i(" Dataset Title* "))]),o(c,{id:"acronym",modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=t=>h.value=t),"aria-describedby":"acronym-help",placeholder:"Dataset Title",onBlur:e[2]||(e[2]=t=>T.value=h.value.length===0)},null,8,["modelValue"]),T.value?(b(),v("small",Re,e[18]||(e[18]=[a("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1),i(" Dataset Acronym is required and must be unique. ")]))):U("",!0)],2),a("div",we,[a("label",Se,[d(a("i",ke,null,512),[[r,`Additional version for the Dataset Acronym (e.g. CESNET-TLS22-XS).
Used to filter the different subsection of the original dataset`,void 0,{right:!0}]]),e[19]||(e[19]=i(" Dataset Versions "))]),o(c,{id:"versions",modelValue:y.value,"onUpdate:modelValue":e[3]||(e[3]=t=>y.value=t),class:m({error:J.value}),"aria-describedby":"versions",placeholder:"Versions..."},null,8,["modelValue","class"])]),a("div",{id:"name",class:m([{error:z.value},"flex flex-col gap-2"])},[a("label",Fe,[d(a("i",Ae,null,512),[[r,"Full name of the submitter",void 0,{right:!0}]]),e[20]||(e[20]=i(" Submitter Name "))]),o(c,{id:"name",modelValue:k.value,"onUpdate:modelValue":e[4]||(e[4]=t=>k.value=t),"aria-describedby":"name-help",placeholder:"Name Surname",disabled:""},null,8,["modelValue"]),z.value?(b(),v("small",Ne,e[21]||(e[21]=[a("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1),i(" Submitter Name is required. ")]))):U("",!0)],2),a("div",{id:"email",class:m([{error:B.value},"flex flex-col gap-2"])},[a("label",qe,[d(a("i",Le,null,512),[[r,"Email of the submitter",void 0,{right:!0}]]),e[22]||(e[22]=i(" Submitter Email "))]),o(c,{id:"email",modelValue:F.value,"onUpdate:modelValue":e[5]||(e[5]=t=>F.value=t),"aria-describedby":"email-help",placeholder:"submitter@email",disabled:""},null,8,["modelValue"]),B.value?(b(),v("small",ze,e[23]||(e[23]=[a("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1),i(" Submitter Email is required. ")]))):U("",!0)],2),a("div",{id:"paperTitle",class:m([{error:q.value},"flex flex-col gap-2"])},[a("label",je,[d(a("i",Be,null,512),[[r,"Full title of the paper describing the dataset",void 0,{right:!0}]]),e[24]||(e[24]=i(" Paper Title "))]),o(c,{id:"paperTitle",modelValue:D.value,"onUpdate:modelValue":e[6]||(e[6]=t=>D.value=t),"aria-describedby":"paperTitle-help",placeholder:"Paper Title"},null,8,["modelValue"]),q.value?(b(),v("small",Me,e[25]||(e[25]=[a("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1),i(" Paper Title is required. ")]))):U("",!0)],2),a("div",{id:"datasetAuthors",class:m([{error:L.value},"flex flex-col gap-2"])},[a("label",Pe,[d(a("i",Oe,null,512),[[r,"Authors of the dataset (comma separated)",void 0,{right:!0}]]),e[26]||(e[26]=i(" Dataset Authors "))]),d(o(P,{id:"authors",modelValue:x.value,"onUpdate:modelValue":e[7]||(e[7]=t=>x.value=t),placeholder:"Authors...","aria-describedby":"authors-help",multiple:!0,typeahead:!1},null,8,["modelValue"]),[[r,"The dataset authors.",void 0,{bottom:!0}]]),L.value?(b(),v("small",Ge,e[27]||(e[27]=[a("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1),i(" Dataset Author is required. ")]))):U("",!0)],2),a("div",Xe,[a("label",He,[d(a("i",Je,null,512),[[r,"Short overview description of the dataset",void 0,{right:!0}]]),e[28]||(e[28]=i(" Description "))]),d(o(ae,{id:"description",modelValue:E.value,"onUpdate:modelValue":e[8]||(e[8]=t=>E.value=t),"aria-describedby":"description-help",placeholder:"Description...",rows:"5",cols:"30"},null,8,["modelValue"]),[[r,"The description of the dataset.",void 0,{bottom:!0}]])]),a("div",Ke,[a("label",Qe,[d(a("i",We,null,512),[[r,"Identify file format of the dataset (e.g. pcap, json, txt, â€¦)",void 0,{right:!0}]]),e[29]||(e[29]=i(" Dataset Format "))]),o(c,{id:"format",modelValue:$.value,"onUpdate:modelValue":e[9]||(e[9]=t=>$.value=t),class:m({error:K.value}),"aria-describedby":"format-help",placeholder:"Format"},null,8,["modelValue","class"])]),a("div",Ye,[a("label",Ze,[d(a("i",ea,null,512),[[r,"The Label",void 0,{right:!0}]]),e[30]||(e[30]=i(" Dataset Label Name "))]),o(c,{id:"label_name",modelValue:I.value,"onUpdate:modelValue":e[10]||(e[10]=t=>I.value=t),class:m({error:Q.value}),"aria-describedby":"label_name-help",placeholder:"Label Name"},null,8,["modelValue","class"])]),a("div",aa,[a("label",la,[d(a("i",ta,null,512),[[r,"Use tags to categorize the dataset (comma separated)",void 0,{right:!0}]]),e[31]||(e[31]=i(" Tags "))]),d(o(P,{id:"tags",modelValue:V.value,"onUpdate:modelValue":e[11]||(e[11]=t=>V.value=t),placeholder:"Tags...","aria-describedby":"tags-help",multiple:!0,typeahead:!1},null,8,["modelValue"]),[[r,"Tags to describe the dataset.",void 0,{bottom:!0}]])]),a("div",sa,[a("label",oa,[d(a("i",ia,null,512),[[r,"DOI of the dataset.",void 0,{right:!0}]]),e[32]||(e[32]=i(" DOI "))]),o(c,{id:"doi",modelValue:R.value,"onUpdate:modelValue":e[12]||(e[12]=t=>R.value=t),class:m({error:W.value}),"aria-describedby":"doi-help",placeholder:"DOI"},null,8,["modelValue","class"])]),a("div",{id:"url",class:m([{error:j.value},"flex flex-col gap-2"])},[a("label",na,[d(a("i",ra,null,512),[[r,"URL of the dataset.",void 0,{right:!0}]]),e[33]||(e[33]=i(" Dataset File URL "))]),o(c,{id:"url",modelValue:w.value,"onUpdate:modelValue":e[13]||(e[13]=t=>w.value=t),"aria-describedby":"url-help",placeholder:"URL"},null,8,["modelValue"])],2),a("div",{id:"url",class:m([{error:j.value},"flex flex-col gap-2"])},[a("label",da,[d(a("i",ua,null,512),[[r,"Upload new file.",void 0,{right:!0}]]),e[34]||(e[34]=i(" Dataset File Upload "))]),n.value.filename?(b(),v("em",pa,"(Current file: "+G(n.value.filename)+")",1)):(b(),v("em",ma,"(No file uploaded yet)")),o(le,{name:"upload",auto:!1,multiple:!1,fileLimit:1,"custom-upload":"",ref_key:"fileUpload",ref:A,onUploader:ee,"upload-label":"Upload"},{empty:re(()=>e[35]||(e[35]=[a("p",{class:"flex justify-center"}," Drag and drop file here to upload. ",-1)])),_:1},512)],2),a("footer",ca,[o(O,{label:"Save",icon:"pi pi-save",class:"mr-2",severity:"success",onClick:e[14]||(e[14]=t=>Z())}),o(O,{label:"Back",icon:"pi pi-arrow-left",class:"mr-2",severity:"secondary",onClick:e[15]||(e[15]=t=>("navigateTo"in s?s.navigateTo:de(X))(`/detail/${encodeURIComponent(f.value)}/${encodeURIComponent(_.value)}`))})])])])])}}},ya=te(fa,[["__scopeId","data-v-c072b599"]]);export{ya as default};
