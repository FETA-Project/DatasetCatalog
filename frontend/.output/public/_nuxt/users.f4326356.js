import{G as M,b as T,H as w,a as B,q as m,v as E,r as l,e as I,h as e,w as h,u as o,I as N,j as i,o as S,J as V}from"./entry.18922f6a.js";import{a as _,M as A}from"./menu.f91da9d2.js";const U=i("h1",null," Users ",-1),$={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},k={class:"p-input-icon-left"},q=i("i",{class:"pi pi-search"},null,-1),R={__name:"users",setup(j){M();const u=T(),g=w();B();const s=m([]),c=m({global:{value:null,matchMode:V.CONTAINS}}),p=m([]),f=()=>{_.get("/api/users").then(a=>{p.value=a.data}).catch(a=>{u.add({severity:"error",summary:"Error while getting requests",detail:a.response.data,life:3e3})})};E(()=>f());const v=()=>{let a=[];console.log(s),s.value.forEach(t=>{a.push(t.email)}),console.log(a),g.require({message:`Are you sure you want to delete ${a.length} users`,header:"Delete Confirmation",icon:"pi pi-exclemation-triangle",accept:()=>{s.value=null,a.forEach(t=>{_.delete(`/api/users/${t}`).then(()=>{u.add({severity:"success",summary:"Delete Successful",detail:`User ${t} deleted successfully.`,life:3e3}),f()}).catch(d=>{u.add({severity:"error",summary:"Delete Failed",detail:d.response.data,life:3e3})})})}})};return(a,t)=>{const d=l("ConfirmDialog"),D=l("Toast"),y=l("Button"),b=l("InputText"),n=l("Column"),C=l("DataTable"),x=l("DynamicDialog");return S(),I("div",null,[e(A),U,e(d),e(C,{value:o(p),scrollable:"",scrollHeight:"500px",filters:o(c),selection:o(s),"onUpdate:selection":t[2]||(t[2]=r=>N(s)?s.value=r:null)},{header:h(()=>[i("div",$,[i("div",null,[e(y,{label:"Delete",icon:"pi pi-trash",severity:"danger",onClick:t[0]||(t[0]=r=>v()),disabled:!o(s)||!o(s).length},null,8,["disabled"])]),i("span",k,[q,e(b,{modelValue:o(c).global.value,"onUpdate:modelValue":t[1]||(t[1]=r=>o(c).global.value=r),placeholder:"Search..."},null,8,["modelValue"])])])]),default:h(()=>[e(D,{position:"bottom-right"}),e(n,{selectionMode:"multiple",headerStyle:"width: 3rem"}),e(n,{field:"email",header:"Email",sortable:""}),e(n,{field:"name",header:"Name"}),e(n,{field:"surname",header:"Surname"}),e(n,{field:"created_at",header:"Created At"}),e(n,{field:"is_admin",header:"Is Admin"})]),_:1},8,["value","filters","selection"]),e(x)])}}};export{R as default};
