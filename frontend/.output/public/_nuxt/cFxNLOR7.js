import{_ as g,al as C,n as E,T as V,r as n,q,f as w,c as p,o as f,a,b as u,y as k,aa as v,C as A,d as _,aj as B,D,ab as N}from"./NsHqofmf.js";import{a as R}from"./DW_MHI2K.js";const $={id:"container",class:"card flex justify-center"},j={class:"flex flex-col gap-4 container"},z={id:"text",class:"flex flex-col gap-2"},F={for:"Text"},I={class:"pi pi-info-circle"},M={key:0,class:"p-error"},U={__name:"create_comment",setup(G){C();const i=E(),l=V("dialogRef"),o=n(""),d=n(!1),c=n(""),s=n(!1),r=n("");q(()=>{c.value=l.value.data.belongs_to,s.value=l.value.data.edit,o.value=l.value.data.text,r.value=l.value.data.comment_id});async function x(){const t=new FormData;if(t.append("text",o.value),o.value.length==0){d.value=!0,i.add({severity:"error",summary:"Request Error",detail:"Text is required.",life:3e3});return}s.value||(t.append("belongs_to",c.value),r.value!=null&&t.append("parent_id",r.value)),await R.post(`/api/comments${s.value?`/${r.value}`:""}`,t,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{i.add({severity:"success",summary:s?"Comment Edited":"Comment Added",life:1e3}),l.value.close(c.value)}).catch(e=>{console.log(e),i.add({severity:"error",summary:s?"Comment Edit Error":"Comment Add Error",detail:e.response.data.detail,life:3e3})})}return w(o,t=>{d.value=t.length===0}),(t,e)=>{const T=k,h=B,y=D,m=N;return f(),p("div",$,[a("div",j,[u(T,{position:"bottom-right"}),a("div",z,[a("label",F,[v(a("i",I,null,512),[[m,"Text of the comment.",void 0,{right:!0}]]),e[1]||(e[1]=_(" Text "))]),v(u(h,{id:"text",modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=b=>o.value=b),"aria-describedby":"text-help",placeholder:"Text...",rows:"5",cols:"30",required:""},null,8,["modelValue"]),[[m,"The text of the comment.",void 0,{bottom:!0}]]),d.value?(f(),p("small",M,e[2]||(e[2]=[a("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1),_(" Text is required. ")]))):A("",!0)]),u(y,{label:s.value?"Edit Comment":"Add Comment",onClick:x},null,8,["label"]),e[3]||(e[3]=a("footer",null,[a("small",null,"* required field")],-1))])])}}},K=g(U,[["__scopeId","data-v-a85dd18f"]]);export{K as default};
