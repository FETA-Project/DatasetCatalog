import{q as K,v as Q,b as W,a as X,x as Y,r as t,y as Z,e as ee,f as g,z as le,h as m,i as s,j as e,t as te,A as u,B as d,k as o,l as b,p as ae,o as v,C as oe,D as ie}from"./entry.8ea22a4f.js";import{a as B,M as se}from"./menu.6343a78a.js";const x=y=>(oe("data-v-a82a1680"),y=y(),ie(),y),re={class:"flex flex-column gap-3"},ne={id:"container",class:"card flex justify-content-center"},de={class:"flex flex-column gap-3 container"},ue={for:"title"},ce={class:"pi pi-info-circle"},pe={key:0,class:"p-error"},me=x(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),ve={for:"name"},_e={class:"pi pi-info-circle"},fe={key:0,class:"p-error"},he=x(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),ge={for:"email"},be={class:"pi pi-info-circle"},xe={key:0,class:"p-error"},ye=x(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Ve={for:"paperTitle"},Te={class:"pi pi-info-circle"},De={key:0,class:"p-error"},Ee=x(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Ie={for:"author"},Ue={class:"pi pi-info-circle"},Ce={class:"card p-fluid p-hidden-label"},we={key:0,class:"p-error"},Oe=x(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Se={id:"description",class:"flex flex-column gap-2"},ke={for:"Description"},Ne={class:"pi pi-info-circle"},Re={id:"tags",class:"flex flex-column gap-2"},ze={for:"tags"},qe={class:"pi pi-info-circle"},Ae={class:"card p-fluid p-hidden-label"},Be={id:"doi",class:"flex flex-column gap-2"},Me={for:"doi"},$e={class:"pi pi-info-circle"},je={id:"originsDoi",class:"flex flex-column gap-2"},Pe={for:"originsDoi"},Fe={class:"pi pi-info-circle"},Je={for:"url"},Le={class:"pi pi-info-circle"},Ge={__name:"[acronym]",setup(y){Q();const M=W(),O=X();Y("dialogRef");const _=t(""),r=t(),S=t(""),$=t(!1),V=t(""),k=t(!1),T=t(""),N=t(!1),f=t(""),R=t(!1),D=t("");t(!1);const E=t(""),j=t(!1),I=t(""),P=t(!1),U=t(""),z=t(!1),w=t(""),F=t(!1),C=t(""),q=t(!1),h=t();Z(S,i=>{$.value=i.length===0});const J=i=>{B.get(`/api/datasets/${encodeURIComponent(i)}`).then(l=>{r.value=l.data.dataset,console.log(r.value),S.value=r.value.acronym,V.value=r.value.title,T.value=r.value.paper_title,f.value=r.value.authors.filter(p=>p!==""),D.value=r.value.description,E.value=r.value.doi,I.value=r.value.origins_doi,U.value=r.value.submitter.name,C.value=r.value.submitter.email,h.value=r.value.tags.filter(p=>p!==""),w.value=r.value.url}).catch(l=>{O.add({severity:"error",summary:"Error while getting dataset",detail:l.response.data,life:3e3})})};async function L(){const i=new FormData;i.append("title",V.value),i.append("paper_title",T.value),i.append("authors",f.value===void 0?[]:f.value),i.append("description",D.value),i.append("doi",E.value),i.append("origins_doi",I.value),i.append("submitter",JSON.stringify({name:U.value,email:C.value})),i.append("tags",h.value===void 0?[]:h.value),await B.post(`/api/datasets/${encodeURIComponent(_.value)}/edit`,i,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{ae(`/detail/${encodeURIComponent(_.value)}`)}).catch(l=>{console.log(l),O.add({severity:"error",summary:"Edit Error",detail:l.response.data.detail,life:3e3})})}return ee(()=>{_.value=decodeURIComponent(M.params.acronym),J(_.value)}),(i,l)=>{const p=g("Toast"),c=g("InputText"),A=g("Chips"),G=g("TextArea"),H=g("Button"),n=le("tooltip");return v(),m("div",re,[s(p,{position:"bottom-right"}),s(se),e("div",ne,[e("div",de,[s(p,{position:"bottom-right"}),e("h1",null," Editing "+te(_.value),1),e("div",{id:"title",class:u([{error:k.value},"flex flex-column gap-2"])},[e("label",ue,[d(e("i",ce,null,512),[[n,"Title of the dataset",void 0,{right:!0}]]),o(" Dataset Title ")]),s(c,{id:"title",modelValue:V.value,"onUpdate:modelValue":l[0]||(l[0]=a=>V.value=a),"aria-describedby":"title-help",placeholder:"Dataset Title"},null,8,["modelValue"]),k.value?(v(),m("small",pe,[me,o(" Dataset Title is required. ")])):b("",!0)],2),e("div",{id:"name",class:u([{error:z.value},"flex flex-column gap-2"])},[e("label",ve,[d(e("i",_e,null,512),[[n,"Name and surname of the submitter.",void 0,{right:!0}]]),o(" Submitter Name ")]),s(c,{id:"name",modelValue:U.value,"onUpdate:modelValue":l[1]||(l[1]=a=>U.value=a),"aria-describedby":"name-help",placeholder:"Name Surname"},null,8,["modelValue"]),z.value?(v(),m("small",fe,[he,o(" Submitter Name is required. ")])):b("",!0)],2),e("div",{id:"email",class:u([{error:q.value},"flex flex-column gap-2"])},[e("label",ge,[d(e("i",be,null,512),[[n,"Email of the submitter.",void 0,{right:!0}]]),o(" Submitter Email ")]),s(c,{id:"email",modelValue:C.value,"onUpdate:modelValue":l[2]||(l[2]=a=>C.value=a),"aria-describedby":"email-help",placeholder:"submitter@email"},null,8,["modelValue"]),q.value?(v(),m("small",xe,[ye,o(" Submitter Email is required. ")])):b("",!0)],2),e("div",{id:"paperTitle",class:u([{error:N.value},"flex flex-column gap-2"])},[e("label",Ve,[d(e("i",Te,null,512),[[n,"Title of the dataset",void 0,{right:!0}]]),o(" Paper Title ")]),s(c,{id:"paperTitle",modelValue:T.value,"onUpdate:modelValue":l[3]||(l[3]=a=>T.value=a),"aria-describedby":"paperTitle-help",placeholder:"Paper Title"},null,8,["modelValue"]),N.value?(v(),m("small",De,[Ee,o(" Paper Title is required. ")])):b("",!0)],2),e("div",{id:"author",class:u([{error:R.value},"flex flex-column gap-2"])},[e("label",Ie,[d(e("i",Ue,null,512),[[n,"Title of the dataset",void 0,{right:!0}]]),o(" Dataset Author ")]),e("div",Ce,[d(s(A,{id:"authors",modelValue:f.value,"onUpdate:modelValue":l[4]||(l[4]=a=>f.value=a),separator:",",placeholder:"Authors...","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[n,"The dataset authors.",void 0,{bottom:!0}]])]),R.value?(v(),m("small",we,[Oe,o(" Dataset Author is required. ")])):b("",!0)],2),e("div",Se,[e("label",ke,[d(e("i",Ne,null,512),[[n,"Description of the dataset.",void 0,{right:!0}]]),o(" Description ")]),d(s(G,{id:"description",modelValue:D.value,"onUpdate:modelValue":l[5]||(l[5]=a=>D.value=a),"aria-describedby":"description-help",placeholder:"Description...",rows:"5",cols:"30"},null,8,["modelValue"]),[[n,"The description of the dataset.",void 0,{bottom:!0}]])]),e("div",Re,[e("label",ze,[d(e("i",qe,null,512),[[n,"Tags (words split by comma) to describe the dataset.",void 0,{right:!0}]]),o(" Tags ")]),e("div",Ae,[d(s(A,{id:"tags",modelValue:h.value,"onUpdate:modelValue":l[6]||(l[6]=a=>h.value=a),separator:",",placeholder:"Tag","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[n,"Tags to describe the dataset.",void 0,{bottom:!0}]])])]),e("div",Be,[e("label",Me,[d(e("i",$e,null,512),[[n,"DOI of the dataset.",void 0,{right:!0}]]),o(" DOI ")]),s(c,{id:"doi",modelValue:E.value,"onUpdate:modelValue":l[7]||(l[7]=a=>E.value=a),class:u({error:j.value}),"aria-describedby":"doi-help",placeholder:"DOI"},null,8,["modelValue","class"])]),e("div",je,[e("label",Pe,[d(e("i",Fe,null,512),[[n,"Origins DOI of the dataset.",void 0,{right:!0}]]),o(" Origins DOI ")]),s(c,{id:"originsDoi",modelValue:I.value,"onUpdate:modelValue":l[8]||(l[8]=a=>I.value=a),class:u({error:P.value}),"aria-describedby":"originsDoi-help",placeholder:"Origins DOI"},null,8,["modelValue","class"])]),e("div",{id:"url",class:u([{error:F.value},"flex flex-column gap-2"])},[e("label",Je,[d(e("i",Le,null,512),[[n,"Title of the dataset",void 0,{right:!0}]]),o(" Dataset File URL ")]),s(c,{id:"url",modelValue:w.value,"onUpdate:modelValue":l[9]||(l[9]=a=>w.value=a),"aria-describedby":"url-help",placeholder:"Dataset Title"},null,8,["modelValue"])],2),e("footer",null,[s(H,{label:"Edit",icon:"pi pi-pencil",class:"mr-2",onClick:l[10]||(l[10]=a=>L())})])])])])}}},Qe=K(Ge,[["__scopeId","data-v-a82a1680"]]);export{Qe as default};
