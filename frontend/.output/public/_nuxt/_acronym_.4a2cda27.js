import{a as M,r as y,b as V,e as q,f as b,h as r,i as p,j as e,k as u,t as o,u as l,l as R,w as g,F as h,m as f,p as J,o as s,c as x,s as U}from"./entry.8ea22a4f.js";import{a as B,M as P}from"./menu.6343a78a.js";const W={class:"flex flex-column gap-3"},z={key:0},G=e("br",null,null,-1),H={class:"flex gap-2"},K={style:{"list-style":"none"},class:"flex flex-column gap-2"},Q=e("b",null,"Dataset Title: ",-1),X=e("b",null,"Paper Title: ",-1),Y={class:"flex gap-2"},Z=e("b",null,"Authors: ",-1),ee=e("b",null,"Date Submitted: ",-1),te=e("b",null,"Submitter: ",-1),le=e("b",null,"Name: ",-1),ne=e("b",null,"Email: ",-1),oe=e("b",null,"Description: ",-1),se=e("b",null,"DOI: ",-1),ae=["href"],ie=e("b",null,"Origins DOI: ",-1),re=["href"],ue={class:"flex gap-2"},ce=e("b",null,"Tags: ",-1),de=e("b",null,"Data URL: ",-1),_e=["href"],pe={style:{"list-style":"none"},class:"flex flex-column gap-1"},he=["href"],me={key:1,class:"json-table"},fe={key:2,style:{"white-space":"pre"}},ke={__name:"[acronym]",setup(ye){const D=M(),k=y("Unknown"),t=y(),C=y(),v=y(),N=V(),T=a=>"/jupyter/notebooks/"+a,j=a=>{if(typeof a!="string"||!a.includes("{")||!a.includes("}"))return!1;try{return JSON.parse(a),!0}catch{return!1}},E=a=>{B.get(`/api/datasets/${encodeURIComponent(a)}`).then(n=>{console.log(n.data),t.value=n.data.dataset,t.value.authors=t.value.authors.filter(d=>d!==""),t.value.tags=t.value.tags.filter(d=>d!==""),C.value=n.data.analysis,v.value=n.data.edit_analysis_url,console.log(t.value)}).catch(n=>{D.add({severity:"error",summary:"Error while getting dataset",detail:n.response.data,life:3e3})})},I=a=>{J(`/edit/${encodeURIComponent(a)}`)},A=()=>{console.log(v.value),window.open(v.value,"_blank")},L=a=>{if(t.value.url){window.open(t.value.url,"_blank");return}else console.log("No URL - trying local file");B.get(`/api/files/${encodeURIComponent(a)}`).then(n=>{const d=new Blob([n.data],{type:n.headers["content-type"]}),w=window.URL.createObjectURL(d),c=document.createElement("a");c.href=w;let m="filename";const i=n.headers["content-disposition"].match(/filename="(.+)"/);i&&i[1]&&(m=i[1]),c.setAttribute("download",m),document.body.appendChild(c),c.click()}).catch(n=>{D.add({severity:"error",summary:"Error while downloading dataset",detail:n.response.data,life:3e3})})};return q(()=>{k.value=decodeURIComponent(N.params.acronym),E(k.value)}),(a,n)=>{const d=b("Toast"),w=b("Badge"),c=b("Button"),m=b("Fieldset");return s(),r("div",W,[p(d,{position:"bottom-right"}),p(P),e("h1",null,[u(" Details of "+o(l(k))+" ",1),l(t).status=="requested"?(s(),r("div",z,[p(w,{value:"Requested",severity:"info"}),G])):R("",!0)]),e("h2",H,[p(c,{onClick:n[0]||(n[0]=i=>L(l(t).acronym)),label:"Download",icon:"pi pi-download",severity:"success"}),p(c,{onClick:n[1]||(n[1]=i=>I(l(t).acronym)),label:"Edit Info",icon:"pi pi-pencil"}),p(c,{onClick:n[2]||(n[2]=i=>A(l(t).acronym)),label:"Edit Analysis",icon:"pi pi-external-link",severity:"secondary"})]),p(m,{legend:"Details",toggleable:!0},{default:g(()=>[e("ul",K,[e("li",null,[Q,u(" "+o(l(t).title),1)]),e("li",null,[X,u(" "+o(l(t).paper_title),1)]),e("li",Y,[Z,(s(!0),r(h,null,f(l(t).authors,i=>(s(),x(l(U),null,{default:g(()=>[u(o(i),1)]),_:2},1024))),256))]),e("li",null,[ee,u(" "+o(l(t).date_submitted),1)]),e("li",null,[te,e("ul",null,[e("li",null,[le,u(" "+o(l(t).submitter.name),1)]),e("li",null,[ne,u(" "+o(l(t).submitter.email),1)])])]),e("li",null,[oe,u(" "+o(l(t).description),1)]),e("li",null,[se,u(),e("a",{href:l(t).doi,target:"_blank"},o(l(t).doi),9,ae)]),e("li",null,[ie,u(),e("a",{href:l(t).origins_doi,target:"_blank"},o(l(t).origins_doi),9,re)]),e("li",ue,[ce,(s(!0),r(h,null,f(l(t).tags,i=>(s(),x(l(U),null,{default:g(()=>[u(o(i),1)]),_:2},1024))),256))]),e("li",null,[de,u(),e("a",{href:l(t).url,target:"_blank"},o(l(t).url),9,_e)])])]),_:1}),(s(!0),r(h,null,f(l(C).analysis,(i,O)=>(s(),r(h,null,[typeof i=="object"?(s(),x(m,{key:0,legend:O.replaceAll("_"," "),toggleable:!0},{default:g(()=>[e("ul",pe,[(s(!0),r(h,null,f(i,(_,$)=>(s(),r("li",null,[e("b",null,o($.replaceAll("_"," "))+": ",1),typeof _=="string"&&_.endsWith(".ipynb")?(s(),r("a",{key:0,href:T(l(t).acronym+"/"+_),target:"_blank"},o(_),9,he)):j(_)?(s(),r("table",me,[(s(!0),r(h,null,f(JSON.parse(_),(S,F)=>(s(),r("tr",null,[e("td",null,o(F),1),e("td",null,o(S),1)]))),256))])):(s(),r("span",fe,o(_),1))]))),256))])]),_:2},1032,["legend"])):R("",!0)],64))),256))])}}};export{ke as default};
