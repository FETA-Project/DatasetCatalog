import{a as F,r as h,b as M,e as V,f,h as i,i as _,j as e,k as r,t as o,u as n,l as C,w,F as y,m as b,p as q,o as s,c as R,s as J}from"./entry.0ea88f22.js";import{a as U,M as P}from"./menu.5bf7707e.js";const W={class:"flex flex-column gap-3"},z={key:0},G=e("br",null,null,-1),H={class:"flex gap-2"},K={style:{"list-style":"none"},class:"flex flex-column gap-2"},Q=e("b",null,"Dataset Title: ",-1),X=e("b",null,"Paper Title: ",-1),Y=e("b",null,"Author: ",-1),Z=e("b",null,"Date Submitted: ",-1),ee=e("b",null,"Submitter: ",-1),te=e("b",null,"Name: ",-1),le=e("b",null,"Email: ",-1),ne=e("b",null,"Description: ",-1),oe=e("b",null,"DOI: ",-1),se=e("b",null,"Origins DOI: ",-1),ae={class:"flex gap-2"},ie=e("b",null,"Tags: ",-1),re=e("b",null,"Data URL: ",-1),ce=["href"],ue={style:{"list-style":"none"},class:"flex flex-column gap-1"},de=["href"],_e={key:1,class:"json-table"},pe={key:2,style:{"white-space":"pre"}},fe={__name:"[acronym]",setup(me){const x=F(),g=h("Unknown"),t=h(),D=h(),k=h(),B=M(),N=a=>"/jupyter/notebooks/"+a,T=a=>{if(typeof a!="string"||!a.includes("{")||!a.includes("}"))return!1;try{return JSON.parse(a),!0}catch{return!1}},j=a=>{U.get(`/api/datasets/${encodeURIComponent(a)}`).then(l=>{console.log(l.data),t.value=l.data.dataset,t.value.tags=t.value.tags.filter(p=>p!==""),D.value=l.data.analysis,k.value=l.data.edit_analysis_url,console.log(t.value)}).catch(l=>{x.add({severity:"error",summary:"Error while getting dataset",detail:l.response.data,life:3e3})})},E=a=>{q(`/edit/${encodeURIComponent(a)}`)},I=()=>{console.log(k.value),window.open(k.value,"_blank")},A=a=>{if(t.value.url){window.open(t.value.url,"_blank");return}else console.log("No URL - trying local file");U.get(`/api/files/${encodeURIComponent(a)}`).then(l=>{const p=new Blob([l.data],{type:l.headers["content-type"]}),v=window.URL.createObjectURL(p),u=document.createElement("a");u.href=v;let m="filename";const c=l.headers["content-disposition"].match(/filename="(.+)"/);c&&c[1]&&(m=c[1]),u.setAttribute("download",m),document.body.appendChild(u),u.click()}).catch(l=>{x.add({severity:"error",summary:"Error while downloading dataset",detail:l.response.data,life:3e3})})};return V(()=>{g.value=decodeURIComponent(B.params.acronym),j(g.value)}),(a,l)=>{const p=f("Toast"),v=f("Badge"),u=f("Button"),m=f("Fieldset");return s(),i("div",W,[_(p,{position:"bottom-right"}),_(P),e("h1",null,[r(" Details of "+o(n(g))+" ",1),n(t).status=="requested"?(s(),i("div",z,[_(v,{value:"Requested",severity:"info"}),G])):C("",!0)]),e("h2",H,[_(u,{onClick:l[0]||(l[0]=c=>A(n(t).acronym)),label:"Download",icon:"pi pi-download",severity:"success"}),_(u,{onClick:l[1]||(l[1]=c=>E(n(t).acronym)),label:"Edit Info",icon:"pi pi-pencil"}),_(u,{onClick:l[2]||(l[2]=c=>I(n(t).acronym)),label:"Edit Analysis",icon:"pi pi-external-link",severity:"secondary"})]),_(m,{legend:"Details",toggleable:!0},{default:w(()=>[e("ul",K,[e("li",null,[Q,r(" "+o(n(t).title),1)]),e("li",null,[X,r(" "+o(n(t).paper_title),1)]),e("li",null,[Y,r(" "+o(n(t).author),1)]),e("li",null,[Z,r(" "+o(n(t).date_submitted),1)]),e("li",null,[ee,e("ul",null,[e("li",null,[te,r(" "+o(n(t).submitter.name),1)]),e("li",null,[le,r(" "+o(n(t).submitter.email),1)])])]),e("li",null,[ne,r(" "+o(n(t).description),1)]),e("li",null,[oe,r(" "+o(n(t).doi),1)]),e("li",null,[se,r(" "+o(n(t).origins_doi),1)]),e("li",ae,[ie,(s(!0),i(y,null,b(n(t).tags,c=>(s(),R(n(J),null,{default:w(()=>[r(o(c),1)]),_:2},1024))),256))]),e("li",null,[re,r(),e("a",{href:n(t).url,target:"_blank"},o(n(t).url),9,ce)])])]),_:1}),(s(!0),i(y,null,b(n(D).analysis,(c,L)=>(s(),i(y,null,[typeof c=="object"?(s(),R(m,{key:0,legend:L.replaceAll("_"," "),toggleable:!0},{default:w(()=>[e("ul",ue,[(s(!0),i(y,null,b(c,(d,O)=>(s(),i("li",null,[e("b",null,o(O.replaceAll("_"," "))+": ",1),typeof d=="string"&&d.endsWith(".ipynb")?(s(),i("a",{key:0,href:N(n(t).acronym+"/"+d),target:"_blank"},o(d),9,de)):T(d)?(s(),i("table",_e,[(s(!0),i(y,null,b(JSON.parse(d),($,S)=>(s(),i("tr",null,[e("td",null,o(S),1),e("td",null,o($),1)]))),256))])):(s(),i("span",pe,o(d),1))]))),256))])]),_:2},1032,["legend"])):C("",!0)],64))),256))])}}};export{fe as default};
