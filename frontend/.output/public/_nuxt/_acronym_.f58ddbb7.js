import{z as te,A as oe,s as se,b as ie,i as re,q as l,B as ne,v as de,r as h,m as ue,e as f,h as i,j as e,t as J,p as d,k as r,C as c,l as D,w as ce,u as pe,x as X,o as v,D as me,E as fe}from"./entry.18922f6a.js";import{a as R,M as ve}from"./menu.f91da9d2.js";const g=U=>(me("data-v-6e15a499"),U=U(),fe(),U),_e={class:"flex flex-column gap-3"},he={id:"container",class:"card flex justify-content-center"},ge={class:"flex flex-column gap-3 container"},ye={id:"acronym_aliases",class:"flex flex-column gap-2"},be={for:"acronym_aliases"},xe={class:"pi pi-info-circle"},Ve={class:"card p-fluid p-hidden-label"},De={for:"title"},Ue={class:"pi pi-info-circle"},Te={key:0,class:"p-error"},Ee=g(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Ce={for:"name"},Ie={class:"pi pi-info-circle"},we={key:0,class:"p-error"},Ae=g(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Fe={for:"email"},Se={class:"pi pi-info-circle"},ke={key:0,class:"p-error"},Re=g(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Ne={for:"paperTitle"},Oe={class:"pi pi-info-circle"},$e={key:0,class:"p-error"},ze=g(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Be={for:"authors"},je={class:"pi pi-info-circle"},qe={class:"card p-fluid p-hidden-label"},Le={key:0,class:"p-error"},Me=g(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Pe={id:"description",class:"flex flex-column gap-2"},Je={for:"Description"},Xe={class:"pi pi-info-circle"},Ge={id:"format",class:"flex flex-column gap-2"},He={for:"format"},Ke={class:"pi pi-info-circle"},Qe={id:"tags",class:"flex flex-column gap-2"},We={for:"tags"},Ye={class:"pi pi-info-circle"},Ze={class:"card p-fluid p-hidden-label"},ea={id:"doi",class:"flex flex-column gap-2"},aa={for:"doi"},la={class:"pi pi-info-circle"},ta={id:"originsDoi",class:"flex flex-column gap-2"},oa={for:"originsDoi"},sa={class:"pi pi-info-circle"},ia={for:"url"},ra={class:"pi pi-info-circle"},na={for:"url"},da={class:"pi pi-info-circle"},ua={key:0},ca={key:1},pa=g(()=>e("p",{class:"flex justify-content-center"}," Drag and drop file here to upload. ",-1)),ma={class:"flex justify-content-between"},fa={__name:"[acronym]",setup(U){oe();const G=se(),y=ie();re("dialogRef");const p=l(""),s=l(),O=l(""),H=l(!1),b=l("");l(!1);const T=l(""),$=l(!1),E=l(""),z=l(!1),x=l(""),B=l(!1),C=l("");l(!1);const I=l(""),K=l(!1),w=l(""),Q=l(!1),A=l(""),W=l(!1),F=l(""),j=l(!1),S=l(""),q=l(!1),k=l(""),L=l(!1),V=l(),N=l(null);ne(O,o=>{H.value=o.length===0});const Y=o=>{R.get(`/api/datasets/${encodeURIComponent(o)}`).then(a=>{s.value=a.data.dataset,console.log(s.value),O.value=s.value.acronym,b.value=s.value.acronym_aliases.filter(u=>u!==""),T.value=s.value.title,E.value=s.value.paper_title,x.value=s.value.authors.filter(u=>u!==""),C.value=s.value.description,I.value=s.value.format,w.value=s.value.doi,A.value=s.value.origins_doi,F.value=s.value.submitter.name,k.value=s.value.submitter.email,V.value=s.value.tags.filter(u=>u!==""),S.value=s.value.url}).catch(a=>{y.add({severity:"error",summary:"Error while getting dataset",detail:a.response.data,life:3e3})})};async function Z(){const o=new FormData;o.append("acronym_aliases",b.value===void 0?[]:b.value),o.append("title",T.value),o.append("paper_title",E.value),o.append("authors",x.value===void 0?[]:x.value),o.append("description",C.value),o.append("format",I.value),o.append("doi",w.value),o.append("origins_doi",A.value),o.append("submitter",JSON.stringify({name:F.value,email:k.value})),o.append("tags",V.value===void 0?[]:V.value),o.append("url",S.value),await R.post(`/api/datasets/${encodeURIComponent(p.value)}/edit`,o,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{X(`/detail/${encodeURIComponent(p.value)}`)}).catch(a=>{console.log(a),y.add({severity:"error",summary:"Edit Error",detail:a.response.data.detail,life:3e3})})}function M(){N.value.clear(),N.value.uploadedFileCount=0}async function ee(o){const a=new FormData;o.files!==void 0&&a.append("file",o.files[0]),a.forEach(u=>{console.log(u)}),await R.post(`/api/datasets/${encodeURIComponent(p.value)}/upload`,a,{headers:{"Content-Type":"multipart/form-data"}}).then(u=>{console.log(u.data),y.add({severity:"success",summary:"File Uploaded",detail:`File for ${p.value} has been uploaded.`,life:3e3}),M(),R.get(`/api/datasets/${encodeURIComponent(p.value)}`).then(_=>{s.value.filename=_.data.dataset.filename}).catch(_=>{y.add({severity:"error",summary:"Error while getting dataset",detail:_.response.data,life:3e3})})}).catch(u=>{console.log(u),y.add({severity:"error",summary:"Upload Error",detail:u.response.data.detail,life:3e3}),M()})}return de(()=>{p.value=decodeURIComponent(G.params.acronym),Y(p.value)}),(o,a)=>{const u=h("Toast"),_=h("Chips"),m=h("InputText"),ae=h("TextArea"),le=h("FileUpload"),P=h("Button"),n=ue("tooltip");return v(),f("div",_e,[i(u,{position:"bottom-right"}),i(ve),e("div",he,[e("div",ge,[i(u,{position:"bottom-right"}),e("h1",null," Editing "+J(p.value),1),e("div",ye,[e("label",be,[d(e("i",xe,null,512),[[n,`Additional alias for the Dataset Acronym (e.g. CESNET-TLS22-XS).
Used to filter the different subsection of the original dataset`,void 0,{right:!0}]]),r(" Dataset Acronym Aliases ")]),e("div",Ve,[d(i(_,{id:"acronym_aliases",modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=t=>b.value=t),separator:",",placeholder:"Acronym Aliases...","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[n,"Acronym Aliases.",void 0,{bottom:!0}]])])]),e("div",{id:"title",class:c([{error:$.value},"flex flex-column gap-2"])},[e("label",De,[d(e("i",Ue,null,512),[[n,"Full name of the dataset",void 0,{right:!0}]]),r(" Dataset Title ")]),i(m,{id:"title",modelValue:T.value,"onUpdate:modelValue":a[1]||(a[1]=t=>T.value=t),"aria-describedby":"title-help",placeholder:"Dataset Title"},null,8,["modelValue"]),$.value?(v(),f("small",Te,[Ee,r(" Dataset Title is required. ")])):D("",!0)],2),e("div",{id:"name",class:c([{error:j.value},"flex flex-column gap-2"])},[e("label",Ce,[d(e("i",Ie,null,512),[[n,"Full name of the submitter",void 0,{right:!0}]]),r(" Submitter Name ")]),i(m,{id:"name",modelValue:F.value,"onUpdate:modelValue":a[2]||(a[2]=t=>F.value=t),"aria-describedby":"name-help",placeholder:"Name Surname"},null,8,["modelValue"]),j.value?(v(),f("small",we,[Ae,r(" Submitter Name is required. ")])):D("",!0)],2),e("div",{id:"email",class:c([{error:L.value},"flex flex-column gap-2"])},[e("label",Fe,[d(e("i",Se,null,512),[[n,"Email of the submitter",void 0,{right:!0}]]),r(" Submitter Email ")]),i(m,{id:"email",modelValue:k.value,"onUpdate:modelValue":a[3]||(a[3]=t=>k.value=t),"aria-describedby":"email-help",placeholder:"submitter@email"},null,8,["modelValue"]),L.value?(v(),f("small",ke,[Re,r(" Submitter Email is required. ")])):D("",!0)],2),e("div",{id:"paperTitle",class:c([{error:z.value},"flex flex-column gap-2"])},[e("label",Ne,[d(e("i",Oe,null,512),[[n,"Full title of the paper describing the dataset",void 0,{right:!0}]]),r(" Paper Title ")]),i(m,{id:"paperTitle",modelValue:E.value,"onUpdate:modelValue":a[4]||(a[4]=t=>E.value=t),"aria-describedby":"paperTitle-help",placeholder:"Paper Title"},null,8,["modelValue"]),z.value?(v(),f("small",$e,[ze,r(" Paper Title is required. ")])):D("",!0)],2),e("div",{id:"datasetAuthors",class:c([{error:B.value},"flex flex-column gap-2"])},[e("label",Be,[d(e("i",je,null,512),[[n,"Authors of the dataset (comma separated)",void 0,{right:!0}]]),r(" Dataset Authors ")]),e("div",qe,[d(i(_,{id:"authors",modelValue:x.value,"onUpdate:modelValue":a[5]||(a[5]=t=>x.value=t),separator:",",placeholder:"Authors...","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[n,"The dataset authors.",void 0,{bottom:!0}]])]),B.value?(v(),f("small",Le,[Me,r(" Dataset Author is required. ")])):D("",!0)],2),e("div",Pe,[e("label",Je,[d(e("i",Xe,null,512),[[n,"Short overview description of the dataset",void 0,{right:!0}]]),r(" Description ")]),d(i(ae,{id:"description",modelValue:C.value,"onUpdate:modelValue":a[6]||(a[6]=t=>C.value=t),"aria-describedby":"description-help",placeholder:"Description...",rows:"5",cols:"30"},null,8,["modelValue"]),[[n,"The description of the dataset.",void 0,{bottom:!0}]])]),e("div",Ge,[e("label",He,[d(e("i",Ke,null,512),[[n,"Identify file format of the dataset (e.g. pcap, json, txt, â€¦)",void 0,{right:!0}]]),r(" Dataset Format ")]),i(m,{id:"format",modelValue:I.value,"onUpdate:modelValue":a[7]||(a[7]=t=>I.value=t),class:c({error:K.value}),"aria-describedby":"format-help",placeholder:"Format"},null,8,["modelValue","class"])]),e("div",Qe,[e("label",We,[d(e("i",Ye,null,512),[[n,"Use tags to categorize the dataset (comma separated)",void 0,{right:!0}]]),r(" Tags ")]),e("div",Ze,[d(i(_,{id:"tags",modelValue:V.value,"onUpdate:modelValue":a[8]||(a[8]=t=>V.value=t),separator:",",placeholder:"Tags...","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[n,"Tags to describe the dataset.",void 0,{bottom:!0}]])])]),e("div",ea,[e("label",aa,[d(e("i",la,null,512),[[n,"DOI of the dataset.",void 0,{right:!0}]]),r(" DOI ")]),i(m,{id:"doi",modelValue:w.value,"onUpdate:modelValue":a[9]||(a[9]=t=>w.value=t),class:c({error:Q.value}),"aria-describedby":"doi-help",placeholder:"DOI"},null,8,["modelValue","class"])]),e("div",ta,[e("label",oa,[d(e("i",sa,null,512),[[n,"DOI of the original dataset",void 0,{right:!0}]]),r(" Origins DOI ")]),i(m,{id:"originsDoi",modelValue:A.value,"onUpdate:modelValue":a[10]||(a[10]=t=>A.value=t),class:c({error:W.value}),"aria-describedby":"originsDoi-help",placeholder:"Origins DOI"},null,8,["modelValue","class"])]),e("div",{id:"url",class:c([{error:q.value},"flex flex-column gap-2"])},[e("label",ia,[d(e("i",ra,null,512),[[n,"URL of the dataset.",void 0,{right:!0}]]),r(" Dataset File URL ")]),i(m,{id:"url",modelValue:S.value,"onUpdate:modelValue":a[11]||(a[11]=t=>S.value=t),"aria-describedby":"url-help",placeholder:"URL"},null,8,["modelValue"])],2),e("div",{id:"url",class:c([{error:q.value},"flex flex-column gap-2"])},[e("label",na,[d(e("i",da,null,512),[[n,"Upload new file.",void 0,{right:!0}]]),r(" Dataset File Upload ")]),s.value.filename?(v(),f("em",ua,"(Current file: "+J(s.value.filename)+")",1)):(v(),f("em",ca,"(No file uploaded yet)")),i(le,{name:"upload",auto:!1,multiple:!1,fileLimit:1,"custom-upload":"",ref_key:"fileUpload",ref:N,onUploader:ee,"upload-label":"Upload"},{empty:ce(()=>[pa]),_:1},512)],2),e("footer",ma,[i(P,{label:"Save",icon:"pi pi-save",class:"mr-2",severity:"success",onClick:a[12]||(a[12]=t=>Z())}),i(P,{label:"Back",icon:"pi pi-arrow-left",class:"mr-2",severity:"secondary",onClick:a[13]||(a[13]=t=>("navigateTo"in o?o.navigateTo:pe(X))(`/detail/${encodeURIComponent(p.value)}`))})])])])])}}},ha=te(fa,[["__scopeId","data-v-6e15a499"]]);export{ha as default};
