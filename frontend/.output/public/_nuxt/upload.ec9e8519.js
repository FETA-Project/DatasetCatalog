import{q as Q,v as W,a as X,x as Y,r as a,y as Z,f as u,z as ee,o as f,h as _,j as e,i as t,A as c,B as r,k as i,l as h,w as V,C as le,D as oe}from"./entry.0ea88f22.js";import{a as ae}from"./menu.5bf7707e.js";const p=y=>(le("data-v-68d8100e"),y=y(),oe(),y),te={id:"container",class:"card flex justify-content-center"},ie={class:"flex flex-column gap-3 container"},se={for:"title"},re={class:"pi pi-info-circle"},ne={key:0,class:"p-error"},de=p(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),ue={for:"title"},ce={class:"pi pi-info-circle"},pe={key:0,class:"p-error"},me=p(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),fe={for:"name"},_e={class:"pi pi-info-circle"},ve={key:0,class:"p-error"},he=p(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),be={for:"email"},ge={class:"pi pi-info-circle"},ye={key:0,class:"p-error"},xe=p(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Ve={for:"paperTitle"},Te={class:"pi pi-info-circle"},De={key:0,class:"p-error"},Ue=p(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Ee={for:"author"},we={class:"pi pi-info-circle"},qe={key:0,class:"p-error"},Ie=p(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),ke={id:"description",class:"flex flex-column gap-2"},Ae={for:"Description"},Ce={class:"pi pi-info-circle"},Se={id:"tags",class:"flex flex-column gap-2"},Oe={for:"tags"},Ne={class:"pi pi-info-circle"},ze={class:"card p-fluid p-hidden-label"},Re={id:"doi",class:"flex flex-column gap-2"},Be={for:"doi"},je={class:"pi pi-info-circle"},Fe={id:"originsDoi",class:"flex flex-column gap-2"},Pe={for:"originsDoi"},Le={class:"pi pi-info-circle"},Je=p(()=>e("p",{class:"flex justify-content-center"}," Drag and drop file here to upload. ",-1)),$e={class:"flex justify-content-center gap-2"},Ge=p(()=>e("footer",null,[e("small",null,"* required field")],-1)),He={__name:"upload",setup(y){W();const C=X(),P=Y("dialogRef"),m=a(""),b=a(!1),T=a(""),S=a(!1),D=a(""),O=a(!1),U=a(""),N=a(!1),E=a("");a(!1);const w=a(""),L=a(!1),q=a(""),J=a(!1),g=a(""),z=a(!1),I=a(""),R=a(!1),k=a("");a(!1);const A=a(null),x=a();function B(){A.value.clear(),A.value.uploadedFileCount=0}async function j(v){const l=new FormData;if(l.append("acronym",m.value),l.append("title",T.value),l.append("paper_title",D.value),l.append("author",U.value),l.append("description",E.value),l.append("doi",w.value),l.append("origins_doi",q.value),l.append("submitter",JSON.stringify({name:g.value,email:I.value})),l.append("tags",x.value===void 0?[]:x.value),l.append("url",k.value),console.log(v.files),v.files!==void 0&&l.append("file",v.files[0]),m.value.length==0){B(),b.value=!0,C.add({severity:"error",summary:"Request Error",detail:"Dataset Acronym is required.",life:3e3});return}g.value=encodeURIComponent(g.value),l.forEach(d=>{console.log(d)}),await ae.post("/api/requests",l,{headers:{"Content-Type":"multipart/form-data"}}).then(d=>{console.log(d.data),P.value.close(m.value)}).catch(d=>{console.log(d),C.add({severity:"error",summary:"Upload Error",detail:d.response.data.detail,life:3e3}),B()})}return Z(m,v=>{b.value=v.length===0}),(v,l)=>{const d=u("Toast"),n=u("InputText"),$=u("TextArea"),G=u("Chips"),H=u("FileUpload"),F=u("TabPanel"),K=u("Button"),M=u("TabView"),s=ee("tooltip");return f(),_("div",te,[e("div",ie,[t(d,{position:"bottom-right"}),e("div",{id:"acronym",class:c([{error:b.value},"flex flex-column gap-2"])},[e("label",se,[r(e("i",re,null,512),[[s,"Acronym of the dataset",void 0,{right:!0}]]),i(" Dataset Acronym* ")]),t(n,{id:"acronym",modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=o=>m.value=o),"aria-describedby":"acronym-help",placeholder:"Dataset Acronym",onBlur:l[1]||(l[1]=o=>b.value=m.value.length===0)},null,8,["modelValue"]),b.value?(f(),_("small",ne,[de,i(" Dataset Acronym is required and must be unique. ")])):h("",!0)],2),e("div",{id:"title",class:c([{error:S.value},"flex flex-column gap-2"])},[e("label",ue,[r(e("i",ce,null,512),[[s,"Title of the dataset",void 0,{right:!0}]]),i(" Dataset Title ")]),t(n,{id:"title",modelValue:T.value,"onUpdate:modelValue":l[2]||(l[2]=o=>T.value=o),"aria-describedby":"title-help",placeholder:"Dataset Title"},null,8,["modelValue"]),S.value?(f(),_("small",pe,[me,i(" Dataset Title is required. ")])):h("",!0)],2),e("div",{id:"name",class:c([{error:z.value},"flex flex-column gap-2"])},[e("label",fe,[r(e("i",_e,null,512),[[s,"Name and surname of the submitter.",void 0,{right:!0}]]),i(" Submitter Name ")]),t(n,{id:"name",modelValue:g.value,"onUpdate:modelValue":l[3]||(l[3]=o=>g.value=o),"aria-describedby":"name-help",placeholder:"Name Surname"},null,8,["modelValue"]),z.value?(f(),_("small",ve,[he,i(" Submitter Name is required. ")])):h("",!0)],2),e("div",{id:"email",class:c([{error:R.value},"flex flex-column gap-2"])},[e("label",be,[r(e("i",ge,null,512),[[s,"Email of the submitter.",void 0,{right:!0}]]),i(" Submitter Email ")]),t(n,{id:"email",modelValue:I.value,"onUpdate:modelValue":l[4]||(l[4]=o=>I.value=o),"aria-describedby":"email-help",placeholder:"submitter@email"},null,8,["modelValue"]),R.value?(f(),_("small",ye,[xe,i(" Submitter Email is required. ")])):h("",!0)],2),e("div",{id:"paperTitle",class:c([{error:O.value},"flex flex-column gap-2"])},[e("label",Ve,[r(e("i",Te,null,512),[[s,"Title of the dataset",void 0,{right:!0}]]),i(" Paper Title ")]),t(n,{id:"paperTitle",modelValue:D.value,"onUpdate:modelValue":l[5]||(l[5]=o=>D.value=o),"aria-describedby":"paperTitle-help",placeholder:"Paper Title"},null,8,["modelValue"]),O.value?(f(),_("small",De,[Ue,i(" Paper Title is required. ")])):h("",!0)],2),e("div",{id:"paperTitle",class:c([{error:N.value},"flex flex-column gap-2"])},[e("label",Ee,[r(e("i",we,null,512),[[s,"Title of the dataset",void 0,{right:!0}]]),i(" Dataset Author ")]),t(n,{id:"author",modelValue:U.value,"onUpdate:modelValue":l[6]||(l[6]=o=>U.value=o),"aria-describedby":"author-help",placeholder:"Dataset Author"},null,8,["modelValue"]),N.value?(f(),_("small",qe,[Ie,i(" Dataset Author is required. ")])):h("",!0)],2),e("div",ke,[e("label",Ae,[r(e("i",Ce,null,512),[[s,"Description of the dataset.",void 0,{right:!0}]]),i(" Description ")]),r(t($,{id:"description",modelValue:E.value,"onUpdate:modelValue":l[7]||(l[7]=o=>E.value=o),"aria-describedby":"description-help",placeholder:"Description...",rows:"5",cols:"30"},null,8,["modelValue"]),[[s,"The description of the dataset.",void 0,{bottom:!0}]])]),e("div",Se,[e("label",Oe,[r(e("i",Ne,null,512),[[s,"Tags (words split by comma) to describe the dataset.",void 0,{right:!0}]]),i(" Tags ")]),e("div",ze,[r(t(G,{id:"tags",modelValue:x.value,"onUpdate:modelValue":l[8]||(l[8]=o=>x.value=o),separator:",",placeholder:"Tag","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[s,"Tags to describe the dataset.",void 0,{bottom:!0}]])])]),e("div",Re,[e("label",Be,[r(e("i",je,null,512),[[s,"DOI of the dataset.",void 0,{right:!0}]]),i(" DOI ")]),t(n,{id:"doi",modelValue:w.value,"onUpdate:modelValue":l[9]||(l[9]=o=>w.value=o),class:c({error:L.value}),"aria-describedby":"doi-help",placeholder:"DOI"},null,8,["modelValue","class"])]),e("div",Fe,[e("label",Pe,[r(e("i",Le,null,512),[[s,"Origins DOI of the dataset.",void 0,{right:!0}]]),i(" Origins DOI ")]),t(n,{id:"originsDoi",modelValue:q.value,"onUpdate:modelValue":l[10]||(l[10]=o=>q.value=o),class:c({error:J.value}),"aria-describedby":"originsDoi-help",placeholder:"Origins DOI"},null,8,["modelValue","class"])]),t(M,{id:"dataset-upload"},{default:V(()=>[t(F,{header:"Local File"},{default:V(()=>[t(H,{name:"upload",auto:!1,multiple:!1,fileLimit:1,"custom-upload":"",ref_key:"fileUpload",ref:A,onUploader:j,"upload-label":"Submit"},{empty:V(()=>[Je]),_:1},512)]),_:1}),t(F,{header:"URL"},{default:V(()=>[e("div",$e,[t(n,{id:"url",modelValue:k.value,"onUpdate:modelValue":l[11]||(l[11]=o=>k.value=o),"aria-describedby":"url-help",placeholder:"URL",class:"w-8"},null,8,["modelValue"]),t(K,{label:"Submit",icon:"pi pi-upload",onClick:j,class:"w-4"})])]),_:1})]),_:1}),Ge])])}}},Qe=Q(He,[["__scopeId","data-v-68d8100e"]]);export{Qe as default};
