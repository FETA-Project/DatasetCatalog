import{G as q,H as J,b as L,a as G,q as _,v as S,r as i,e as C,h as l,w as r,u as o,I as M,j as e,o as m,c as w,l as H,k as u,t as c,F as E,f as N,J as z,x as K,d as Q,_ as W}from"./entry.f1d49704.js";import{a as T,M as X}from"./menu.9dc9b1ab.js";import{_ as Y}from"./date.82a89d4e.js";const Z=e("h1",null,"Dataset Catalog",-1),P={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},ee={class:"p-input-icon-left"},te=e("i",{class:"pi pi-search"},null,-1),ae=["href"],le={class:"flex gap-1"},se={class:"flex"},oe={style:{"list-style":"none"}},ne=e("b",null,"Paper Title: ",-1),ie={class:"flex gap-2"},de=e("b",null,"Authors: ",-1),re=e("b",null,"Date Submitted: ",-1),ue=e("b",null,"Submitter: ",-1),ce=e("b",null,"Name: ",-1),me=e("b",null,"Email: ",-1),_e=e("b",null,"Description: ",-1),pe=e("b",null,"Origins: ",-1),he=["href"],ve={__name:"index",setup(fe){q();const V=J(),p=L(),$=G(),f=_(null),d=_([]),g=_([]),b=_({global:{value:null,matchMode:z.CONTAINS}}),y=_([]),I=Q(()=>W(()=>import("./upload.1d75c72d.js"),["./upload.1d75c72d.js","./entry.f1d49704.js","./entry.076fc270.css","./menu.9dc9b1ab.js","./menu.d6419823.css","./upload.6918fed0.css"],import.meta.url)),v=()=>{T.get("/api/datasets").then(s=>{y.value=s.data,y.value.forEach(a=>{a.metadata=JSON.stringify(a)})}).catch(s=>{p.add({severity:"error",summary:"Error while getting datasets",detail:s.response.data,life:3e3})})};S(()=>{v()});const U=s=>{K(`/detail/${encodeURIComponent(s)}`)},A=()=>{let s=[];d.value.forEach(a=>{s.push(a.acronym)}),V.require({message:`Are you sure you want to delete ${s.length} files`,header:"Delete Confirmation",icon:"pi pi-exclemation-triangle",accept:()=>{d.value=null,s.forEach(a=>{T.delete(`/api/datasets/${a}`).then(()=>{p.add({severity:"success",summary:"Delete Successful",detail:`Dataset ${a} deleted successfully.`,life:3e3}),v()}).catch(D=>{p.add({severity:"error",summary:"Delete Failed",detail:D.response.data,life:3e3})})})}})},B=()=>{$.open(I,{props:{header:"Submit Dataset",modal:!0},onClose:s=>{const a=s.data;a&&(p.add({severity:"success",summary:"Upload Successful",detail:`File ${a} uploaded successfully.`,life:3e3}),v())}})};return S(()=>{T.get("/api/users/me").then(s=>{f.value=s.data}).catch()}),(s,a)=>{const D=i("Toast"),F=i("ConfirmDialog"),x=i("Button"),R=i("InputText"),n=i("Column"),k=i("Chip"),O=i("DataTable"),j=i("DynamicDialog");return m(),C("div",null,[l(D,{position:"bottom-right"}),l(X),Z,l(F),l(O,{value:o(y),scrollable:"",filters:o(b),selection:o(d),"onUpdate:selection":a[2]||(a[2]=t=>M(d)?d.value=t:null),"expanded-rows":o(g),"onUpdate:expandedRows":a[3]||(a[3]=t=>M(g)?g.value=t:null)},{header:r(()=>[e("div",P,[e("div",null,[l(x,{label:"Submit Dataset",icon:"pi pi-ticket",class:"mr-2",onClick:B}),o(f)&&o(f).is_admin?(m(),w(x,{key:0,label:"Delete",icon:"pi pi-trash",class:"mr-2",severity:"danger",onClick:a[0]||(a[0]=t=>A()),disabled:!o(d)||!o(d).length},null,8,["disabled"])):H("",!0)]),e("span",ee,[te,l(R,{modelValue:o(b).global.value,"onUpdate:modelValue":a[1]||(a[1]=t=>o(b).global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),expansion:r(t=>[e("div",se,[e("ul",oe,[e("li",null,[ne,u(" "+c(t.data.paper_title),1)]),e("li",ie,[de,(m(!0),C(E,null,N(t.data.authors,h=>(m(),w(k,null,{default:r(()=>[u(c(h),1)]),_:2},1024))),256))]),e("li",null,[re,u(),l(Y,{datetime:t.data.date_submitted},null,8,["datetime"])]),e("li",null,[ue,e("ul",null,[e("li",null,[ce,u(" "+c(t.data.submitter.name),1)]),e("li",null,[me,u(" "+c(t.data.submitter.email),1)])])]),e("li",null,[_e,u(" "+c(t.data.description),1)]),e("li",null,[pe,u(),e("a",{href:t.data.origins_doi,target:"_blank"},c(t.data.origins_doi),9,he)])])])]),default:r(()=>[l(n,{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(n,{expander:"",style:{width:"3rem"}}),l(n,{field:"metadata",header:"Metadata",hidden:""}),l(n,{field:"acronym",header:"Acronym",sortable:""}),l(n,{field:"title",header:"Title",sortable:""}),l(n,{field:"doi",header:"DOI"},{body:r(t=>[e("a",{href:"https://doi.org/"+t.data.doi,target:"_blank"},c(t.data.doi),9,ae)]),_:1}),l(n,{field:"tags",header:"Tags"},{body:r(t=>[e("div",le,[(m(!0),C(E,null,N(t.data.tags,h=>(m(),w(k,{label:h},null,8,["label"]))),256))])]),_:1}),l(n,null,{body:r(t=>[l(x,{onClick:h=>U(t.data.acronym),label:"Details",icon:"pi pi-info-circle",rounded:"",outlined:""},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters","selection","expanded-rows"]),l(j)])}}};export{ve as default};
