import{q as K,v as Q,b as W,a as X,x as Y,r as t,y as Z,e as ee,f,z as le,h as p,i as s,j as e,t as te,A as c,B as d,k as o,l as h,p as ae,o as m,C as oe,D as ie}from"./entry.0ea88f22.js";import{a as A,M as se}from"./menu.5bf7707e.js";const g=b=>(oe("data-v-ed9580ea"),b=b(),ie(),b),re={class:"flex flex-column gap-3"},ne={id:"container",class:"card flex justify-content-center"},de={class:"flex flex-column gap-3 container"},ue={for:"title"},ce={class:"pi pi-info-circle"},pe={key:0,class:"p-error"},me=g(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),ve={for:"name"},_e={class:"pi pi-info-circle"},fe={key:0,class:"p-error"},he=g(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),ge={for:"email"},be={class:"pi pi-info-circle"},xe={key:0,class:"p-error"},ye=g(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Ve={for:"paperTitle"},Te={class:"pi pi-info-circle"},De={key:0,class:"p-error"},Ee=g(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Ie={for:"author"},Ue={class:"pi pi-info-circle"},Ce={key:0,class:"p-error"},Oe=g(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Se={id:"description",class:"flex flex-column gap-2"},ke={for:"Description"},we={class:"pi pi-info-circle"},Ne={id:"tags",class:"flex flex-column gap-2"},Re={for:"tags"},ze={class:"pi pi-info-circle"},qe={class:"card p-fluid p-hidden-label"},Ae={id:"doi",class:"flex flex-column gap-2"},Be={for:"doi"},Me={class:"pi pi-info-circle"},$e={id:"originsDoi",class:"flex flex-column gap-2"},je={for:"originsDoi"},Pe={class:"pi pi-info-circle"},Fe={for:"url"},Je={class:"pi pi-info-circle"},Le={__name:"[acronym]",setup(b){Q();const B=W(),S=X();Y("dialogRef");const v=t(""),r=t(),k=t(""),M=t(!1),x=t(""),w=t(!1),y=t(""),N=t(!1),V=t(""),R=t(!1),T=t("");t(!1);const D=t(""),$=t(!1),E=t(""),j=t(!1),I=t(""),z=t(!1),O=t(""),P=t(!1),U=t(""),q=t(!1),_=t();Z(k,i=>{M.value=i.length===0});const F=i=>{A.get(`/api/datasets/${encodeURIComponent(i)}`).then(l=>{r.value=l.data.dataset,console.log(r.value),k.value=r.value.acronym,x.value=r.value.title,y.value=r.value.paper_title,V.value=r.value.author,T.value=r.value.description,D.value=r.value.doi,E.value=r.value.origins_doi,I.value=r.value.submitter.name,U.value=r.value.submitter.email,_.value=r.value.tags.filter(C=>C!==""),O.value=r.value.url}).catch(l=>{S.add({severity:"error",summary:"Error while getting dataset",detail:l.response.data,life:3e3})})};async function J(){const i=new FormData;i.append("title",x.value),i.append("paper_title",y.value),i.append("author",V.value),i.append("description",T.value),i.append("doi",D.value),i.append("origins_doi",E.value),i.append("submitter",JSON.stringify({name:I.value,email:U.value})),i.append("tags",_.value===void 0?[]:_.value),await A.post(`/api/datasets/${encodeURIComponent(v.value)}/edit`,i,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{ae(`/detail/${encodeURIComponent(v.value)}`)}).catch(l=>{console.log(l),S.add({severity:"error",summary:"Edit Error",detail:l.response.data.detail,life:3e3})})}return ee(()=>{v.value=decodeURIComponent(B.params.acronym),F(v.value)}),(i,l)=>{const C=f("Toast"),u=f("InputText"),L=f("TextArea"),G=f("Chips"),H=f("Button"),n=le("tooltip");return m(),p("div",re,[s(C,{position:"bottom-right"}),s(se),e("div",ne,[e("div",de,[s(C,{position:"bottom-right"}),e("h1",null," Editing "+te(v.value),1),e("div",{id:"title",class:c([{error:w.value},"flex flex-column gap-2"])},[e("label",ue,[d(e("i",ce,null,512),[[n,"Title of the dataset",void 0,{right:!0}]]),o(" Dataset Title ")]),s(u,{id:"title",modelValue:x.value,"onUpdate:modelValue":l[0]||(l[0]=a=>x.value=a),"aria-describedby":"title-help",placeholder:"Dataset Title"},null,8,["modelValue"]),w.value?(m(),p("small",pe,[me,o(" Dataset Title is required. ")])):h("",!0)],2),e("div",{id:"name",class:c([{error:z.value},"flex flex-column gap-2"])},[e("label",ve,[d(e("i",_e,null,512),[[n,"Name and surname of the submitter.",void 0,{right:!0}]]),o(" Submitter Name ")]),s(u,{id:"name",modelValue:I.value,"onUpdate:modelValue":l[1]||(l[1]=a=>I.value=a),"aria-describedby":"name-help",placeholder:"Name Surname"},null,8,["modelValue"]),z.value?(m(),p("small",fe,[he,o(" Submitter Name is required. ")])):h("",!0)],2),e("div",{id:"email",class:c([{error:q.value},"flex flex-column gap-2"])},[e("label",ge,[d(e("i",be,null,512),[[n,"Email of the submitter.",void 0,{right:!0}]]),o(" Submitter Email ")]),s(u,{id:"email",modelValue:U.value,"onUpdate:modelValue":l[2]||(l[2]=a=>U.value=a),"aria-describedby":"email-help",placeholder:"submitter@email"},null,8,["modelValue"]),q.value?(m(),p("small",xe,[ye,o(" Submitter Email is required. ")])):h("",!0)],2),e("div",{id:"paperTitle",class:c([{error:N.value},"flex flex-column gap-2"])},[e("label",Ve,[d(e("i",Te,null,512),[[n,"Title of the dataset",void 0,{right:!0}]]),o(" Paper Title ")]),s(u,{id:"paperTitle",modelValue:y.value,"onUpdate:modelValue":l[3]||(l[3]=a=>y.value=a),"aria-describedby":"paperTitle-help",placeholder:"Paper Title"},null,8,["modelValue"]),N.value?(m(),p("small",De,[Ee,o(" Paper Title is required. ")])):h("",!0)],2),e("div",{id:"paperTitle",class:c([{error:R.value},"flex flex-column gap-2"])},[e("label",Ie,[d(e("i",Ue,null,512),[[n,"Title of the dataset",void 0,{right:!0}]]),o(" Dataset Author ")]),s(u,{id:"author",modelValue:V.value,"onUpdate:modelValue":l[4]||(l[4]=a=>V.value=a),"aria-describedby":"author-help",placeholder:"Dataset Author"},null,8,["modelValue"]),R.value?(m(),p("small",Ce,[Oe,o(" Dataset Author is required. ")])):h("",!0)],2),e("div",Se,[e("label",ke,[d(e("i",we,null,512),[[n,"Description of the dataset.",void 0,{right:!0}]]),o(" Description ")]),d(s(L,{id:"description",modelValue:T.value,"onUpdate:modelValue":l[5]||(l[5]=a=>T.value=a),"aria-describedby":"description-help",placeholder:"Description...",rows:"5",cols:"30"},null,8,["modelValue"]),[[n,"The description of the dataset.",void 0,{bottom:!0}]])]),e("div",Ne,[e("label",Re,[d(e("i",ze,null,512),[[n,"Tags (words split by comma) to describe the dataset.",void 0,{right:!0}]]),o(" Tags ")]),e("div",qe,[d(s(G,{id:"tags",modelValue:_.value,"onUpdate:modelValue":l[6]||(l[6]=a=>_.value=a),separator:",",placeholder:"Tag","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[n,"Tags to describe the dataset.",void 0,{bottom:!0}]])])]),e("div",Ae,[e("label",Be,[d(e("i",Me,null,512),[[n,"DOI of the dataset.",void 0,{right:!0}]]),o(" DOI ")]),s(u,{id:"doi",modelValue:D.value,"onUpdate:modelValue":l[7]||(l[7]=a=>D.value=a),class:c({error:$.value}),"aria-describedby":"doi-help",placeholder:"DOI"},null,8,["modelValue","class"])]),e("div",$e,[e("label",je,[d(e("i",Pe,null,512),[[n,"Origins DOI of the dataset.",void 0,{right:!0}]]),o(" Origins DOI ")]),s(u,{id:"originsDoi",modelValue:E.value,"onUpdate:modelValue":l[8]||(l[8]=a=>E.value=a),class:c({error:j.value}),"aria-describedby":"originsDoi-help",placeholder:"Origins DOI"},null,8,["modelValue","class"])]),e("div",{id:"url",class:c([{error:P.value},"flex flex-column gap-2"])},[e("label",Fe,[d(e("i",Je,null,512),[[n,"Title of the dataset",void 0,{right:!0}]]),o(" Dataset File URL ")]),s(u,{id:"url",modelValue:O.value,"onUpdate:modelValue":l[9]||(l[9]=a=>O.value=a),"aria-describedby":"url-help",placeholder:"Dataset Title"},null,8,["modelValue"])],2),e("footer",null,[s(H,{label:"Edit",icon:"pi pi-pencil",class:"mr-2",onClick:l[10]||(l[10]=a=>J())})])])])])}}},Ke=K(Le,[["__scopeId","data-v-ed9580ea"]]);export{Ke as default};
