import{a as F,r as m,b as L,e as M,f as y,h as i,i as _,j as e,k as r,t as o,u as l,l as C,w as D,F as h,m as v,p as V,o as a,c as q}from"./entry.36ad8f8e.js";import{a as B,M as J}from"./menu.de1ac60a.js";const P={class:"flex flex-column gap-3"},W={key:0},z=e("br",null,null,-1),G={class:"flex gap-2"},H={style:{"list-style":"none"},class:"flex flex-column gap-2"},K=e("b",null,"Dataset Title: ",-1),Q=e("b",null,"Paper Title: ",-1),X=e("b",null,"Author: ",-1),Y=e("b",null,"Date Submitted: ",-1),Z=e("b",null,"Submitter: ",-1),ee=e("b",null,"Name: ",-1),te=e("b",null,"Email: ",-1),ne=e("b",null,"Description: ",-1),le=e("b",null,"DOI: ",-1),oe=e("b",null,"Origins DOI: ",-1),se=e("b",null,"Tags: ",-1),ae={style:{"list-style":"none"},class:"flex flex-column gap-1"},ie=["href"],re={key:1,class:"json-table"},ce={key:2,style:{"white-space":"pre"}},pe={__name:"[acronym]",setup(de){const w=F(),b=m("Unknown"),n=m(),x=m(),f=m(),R=L(),T=s=>"/jupyter/notebooks/"+s,U=s=>{if(typeof s!="string"||!s.includes("{")||!s.includes("}"))return!1;try{return JSON.parse(s),!0}catch{return!1}},j=s=>{B.get(`/api/datasets/${encodeURIComponent(s)}`).then(t=>{console.log(t.data),n.value=t.data.dataset,x.value=t.data.analysis,f.value=t.data.edit_analysis_url,console.log(n.value)}).catch(t=>{w.add({severity:"error",summary:"Error while getting dataset",detail:t.response.data,life:3e3})})},E=s=>{V(`/edit/${encodeURIComponent(s)}`)},I=()=>{console.log(f.value),window.open(f.value,"_blank")},N=s=>{B.get(`/api/files/${encodeURIComponent(s)}`).then(t=>{const g=new Blob([t.data],{type:t.headers["content-type"]}),k=window.URL.createObjectURL(g),d=document.createElement("a");d.href=k;let p="filename";const c=t.headers["content-disposition"].match(/filename="(.+)"/);c&&c[1]&&(p=c[1]),d.setAttribute("download",p),document.body.appendChild(d),d.click()}).catch(t=>{w.add({severity:"error",summary:"Error while downloading dataset",detail:t.response.data,life:3e3})})};return M(()=>{b.value=decodeURIComponent(R.params.acronym),j(b.value)}),(s,t)=>{const g=y("Toast"),k=y("Badge"),d=y("Button"),p=y("Fieldset");return a(),i("div",P,[_(g,{position:"bottom-right"}),_(J),e("h1",null,[r(" Details of "+o(l(b))+" ",1),l(n).status=="requested"?(a(),i("div",W,[_(k,{value:"Requested",severity:"info"}),z])):C("",!0)]),e("h2",G,[_(d,{onClick:t[0]||(t[0]=c=>N(l(n).acronym)),label:"Download",icon:"pi pi-download",severity:"success"}),_(d,{onClick:t[1]||(t[1]=c=>E(l(n).acronym)),label:"Edit Info",icon:"pi pi-pencil"}),_(d,{onClick:t[2]||(t[2]=c=>I(l(n).acronym)),label:"Edit Analysis",icon:"pi pi-external-link",severity:"secondary"})]),_(p,{legend:"Details",toggleable:!0},{default:D(()=>[e("ul",H,[e("li",null,[K,r(" "+o(l(n).title),1)]),e("li",null,[Q,r(" "+o(l(n).paper_title),1)]),e("li",null,[X,r(" "+o(l(n).author),1)]),e("li",null,[Y,r(" "+o(l(n).date_submitted),1)]),e("li",null,[Z,e("ul",null,[e("li",null,[ee,r(" "+o(l(n).submitter.name),1)]),e("li",null,[te,r(" "+o(l(n).submitter.email),1)])])]),e("li",null,[ne,r(" "+o(l(n).description),1)]),e("li",null,[le,r(" "+o(l(n).doi),1)]),e("li",null,[oe,r(" "+o(l(n).origins_doi),1)]),e("li",null,[se,r(" "+o(l(n).tags),1)])])]),_:1}),(a(!0),i(h,null,v(l(x).analysis,(c,A)=>(a(),i(h,null,[typeof c=="object"?(a(),q(p,{key:0,legend:A.replaceAll("_"," "),toggleable:!0},{default:D(()=>[e("ul",ae,[(a(!0),i(h,null,v(c,(u,O)=>(a(),i("li",null,[e("b",null,o(O.replaceAll("_"," "))+": ",1),typeof u=="string"&&u.endsWith(".ipynb")?(a(),i("a",{key:0,href:T(l(n).acronym+"/"+u),target:"_blank"},o(u),9,ie)):U(u)?(a(),i("table",re,[(a(!0),i(h,null,v(JSON.parse(u),($,S)=>(a(),i("tr",null,[e("td",null,o(S),1),e("td",null,o($),1)]))),256))])):(a(),i("span",ce,o(u),1))]))),256))])]),_:2},1032,["legend"])):C("",!0)],64))),256))])}}};export{pe as default};
