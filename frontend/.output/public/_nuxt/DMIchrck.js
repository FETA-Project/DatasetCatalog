const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./GmDZLrEV.js","./DU3s_J-k.js","./DW_MHI2K.js","./create_comment.D3Rciy6v.css"])))=>i.map(i=>d[i]);
import{p as Cn,n as kn,K as $n,c as te,o as G,L as _e,B as me,w as ye,b as de,M as Un,a as B,t as re,C as ue,d as ae,N as pe,I as Tn,O as Yn,J as Rn,P as Fn,T as Jn,v as U,Q as Nn,r as ge,R as qn,S as Dn,U as Bn,D as Kn,V as yn,y as Vn,W as pn}from"./DU3s_J-k.js";import{a as be}from"./DW_MHI2K.js";import{M as zn}from"./CeymNAjJ.js";import{_ as xn}from"./B4doYjP3.js";import{_ as Gn}from"./Ds5oF3cw.js";const Zn={class:"flex justify-between flex-wrap"},Wn={key:0},Xn={key:0},Hn=["onClick"],Qn=["onClick"],et=["onClick"],Pn={__name:"comments",props:{comments:{type:[Object,Array],required:!0}},emits:["signal"],setup(v,{emit:o}){const x=Cn(),b=kn();$n("dialogRef");const _=Tn(()=>Rn(()=>import("./GmDZLrEV.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),M=o,W=(S,j=!1)=>{console.log(S),x.open(_,{props:{header:j?"Edit Comment":"Add Comment",modal:!0},data:{belongs_to:S.belongs_to,comment_id:S.id,edit:j,text:j?S.text:""},onClose:()=>{$(S.belongs_to)}})},X=S=>{be.delete("/api/comments/"+S.id).then(()=>{b.add({severity:"success",summary:"Success",detail:"Comment deleted",life:3e3}),$(S.belongs_to)}).catch(j=>{b.add({severity:"error",summary:"Error",detail:j,life:3e3})})},$=S=>{M("signal",S)};return(S,j)=>{const z=Pn,F=Un,E=Yn;return G(!0),te(pe,null,_e(v.comments,u=>(G(),me(E,{activeIndex:0,style:{"margin-top":"0.5rem","margin-bottom":"0.5rem"}},{default:ye(()=>[de(F,{header:u.author},{default:ye(()=>[B("span",null,re(u.text),1),j[2]||(j[2]=B("hr",null,null,-1)),B("small",Zn,[B("div",null,[de(xn,{datetime:u.date},null,8,["datetime"]),u.edited?(G(),te("span",Wn," | edited ")):ue("",!0)]),u.deleted?ue("",!0):(G(),te("div",Xn,[B("span",{class:"link",onClick:l=>W(u)},"Reply",8,Hn),j[0]||(j[0]=ae(" | ")),B("span",{class:"link",onClick:l=>W(u,!0)},"Edit",8,Qn),j[1]||(j[1]=ae(" | ")),B("span",{class:"link",onClick:l=>X(u)},"Delete",8,et)]))]),de(z,{onSignal:$,comments:u.children},null,8,["comments"])]),_:2},1032,["header"])]),_:2},1024))),256)}}};var Ce={exports:{}},se={},_n;function Oe(){return _n||(_n=1,Object.defineProperty(se,"__esModule",{value:!0}),se.STRING=se.INSPECT=se.EMPTY=se.AFTER=se.BEFORE=se.CLOSE=se.OPEN=void 0,se.OPEN="o",se.CLOSE="c",se.BEFORE="b",se.AFTER="a",se.EMPTY="",se.INSPECT=Symbol.for("nodejs.util.inspect.custom"),se.STRING="string"),se}var q={},ne={},vn;function Te(){if(vn)return ne;vn=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.makeTextMatcher=ne.makeNumberMatcher=ne.makeCommentMatcher=ne.makeStringMatcher=ne.makeLineMatcher=ne.makeSpaceMatcher=ne.makeFixedMatcher=ne.makeMatchMatcher=ne.makeToken=ne.makePoint=ne.makeLex=ne.makeNoToken=void 0;const v=Oe(),o=Re();class x{constructor(n,r,c,g){this.len=-1,this.sI=0,this.rI=1,this.cI=1,this.token=[],this.len=n,r!=null&&(this.sI=r),c!=null&&(this.rI=c),g!=null&&(this.cI=g)}toString(){return"Point["+[this.sI+"/"+this.len,this.rI,this.cI]+(0<this.token.length?" "+this.token:"")+"]"}[v.INSPECT](){return this.toString()}}const b=(...t)=>new x(...t);ne.makePoint=b;class _{constructor(n,r,c,g,k,s,d){this.isToken=!0,this.name=v.EMPTY,this.tin=-1,this.val=void 0,this.src=v.EMPTY,this.sI=-1,this.rI=-1,this.cI=-1,this.len=-1,this.name=n,this.tin=r,this.src=g,this.val=c,this.sI=k.sI,this.rI=k.rI,this.cI=k.cI,this.use=s,this.why=d,this.len=g==null?0:g.length}resolveVal(n,r){return typeof this.val=="function"?this.val(n,r):this.val}bad(n,r){return this.err=n,r!=null&&(this.use=(0,o.deep)(this.use||{},r)),this}toString(){return"Token["+this.name+"="+this.tin+" "+(0,o.snip)(this.src)+(this.val===void 0||this.name==="#ST"||this.name==="#TX"?"":"="+(0,o.snip)(this.val))+" "+[this.sI,this.rI,this.cI]+(this.use==null?"":" "+(0,o.snip)(""+JSON.stringify(this.use).replace(/"/g,""),22))+(this.err==null?"":" "+this.err)+(this.why==null?"":" "+(0,o.snip)(""+this.why,22))+"]"}[v.INSPECT](){return this.toString()}}const M=(...t)=>new _(...t);ne.makeToken=M;const W=()=>M("",-1,void 0,v.EMPTY,b(-1));ne.makeNoToken=W;let X=(t,n)=>{let r=(0,o.regexp)(null,"^(",t.rePart.fixed,")");return function(g){let k=t.fixed;if(!k.lex)return;if(t.fixed.check){let f=t.fixed.check(g);if(f&&f.done)return f.token}let s=g.pnt,P=g.src.substring(s.sI).match(r);if(P){let f=P[1],C=f.length;if(0<C){let T,w=k.token[f];return w!=null&&(T=g.token(w,void 0,f,s),s.sI+=C,s.cI+=C),T}}}};ne.makeFixedMatcher=X;let $=(t,n)=>{let r=(0,o.values)(t.match.value),c=(0,o.values)(t.match.token);return r.length===0&&c.length===0?null:function(k,s,d=0){if(!t.match.lex)return;if(t.match.check){let w=t.match.check(k);if(w&&w.done)return w.token}let f=k.pnt,C=k.src.substring(f.sI),T=s.state==="o"?0:1;for(let w of r)if(w.match instanceof RegExp){let A=C.match(w.match);if(A){let J=A[0],R=J.length;if(0<R){let I,le=w.val?w.val(A):J;return I=k.token("#VL",le,J,f),f.sI+=R,f.cI+=R,I}}}else{let A=w.match(k,s);if(A!=null)return A}for(let w of c)if(!(w.tin$&&!s.spec.def.tcol[T][d].includes(w.tin$)))if(w instanceof RegExp){let A=C.match(w);if(A){let J=A[0],R=J.length;if(0<R){let I,le=w.tin$;return I=k.token(le,J,J,f),f.sI+=R,f.cI+=R,I}}}else{let A=w(k,s);if(A!=null)return A}}};ne.makeMatchMatcher=$;let S=(t,n)=>{let r=n.comment;t.comment={lex:r?!!r.lex:!1,def:(r!=null&&r.def?(0,o.entries)(r.def):[]).reduce((k,[s,d])=>{if(d==null||d===!1)return k;let P={name:s,start:d.start,end:d.end,line:!!d.line,lex:!!d.lex,eatline:!!d.eatline};return k[s]=P,k},{})};let c=t.comment.lex?(0,o.values)(t.comment.def).filter(k=>k.lex&&k.line):[],g=t.comment.lex?(0,o.values)(t.comment.def).filter(k=>k.lex&&!k.line):[];return function(s,d){if(!t.comment.lex)return;if(t.comment.check){let A=t.comment.check(s);if(A&&A.done)return A.token}let f=s.pnt,C=s.src.substring(f.sI),T=f.rI,w=f.cI;for(let A of c)if(C.startsWith(A.start)){let J=C.length,R=A.start.length;for(w+=A.start.length;R<J&&!t.line.chars[C[R]];)w++,R++;if(A.eatline)for(;R<J&&t.line.chars[C[R]];)t.line.rowChars[C[R]]&&T++,R++;let I=C.substring(0,R),le=s.token("#CM",void 0,I,f);return f.sI+=I.length,f.cI=w,f.rI=T,le}for(let A of g)if(C.startsWith(A.start)){let J=C.length,R=A.start.length,I=A.end;for(w+=A.start.length;R<J&&!C.substring(R).startsWith(I);)t.line.rowChars[C[R]]&&(T++,w=0),w++,R++;if(C.substring(R).startsWith(I)){if(w+=I.length,A.eatline)for(;R<J&&t.line.chars[C[R]];)t.line.rowChars[C[R]]&&T++,R++;let le=C.substring(0,R+I.length),e=s.token("#CM",void 0,le,f);return f.sI+=le.length,f.rI=T,f.cI=w,e}else return s.bad(o.S.unterminated_comment,f.sI,f.sI+9*A.start.length)}}};ne.makeCommentMatcher=S;let j=(t,n)=>{let r=(0,o.regexp)(t.line.lex?null:"s","^(.*?)",...t.rePart.ender);return function(g){if(t.text.check){let T=t.text.check(g);if(T&&T.done)return T.token}let k=t.text,s=g.pnt,d=g.src.substring(s.sI),P=t.value.def,f=t.value.defre,C=d.match(r);if(C){let T=C[1],w=C[2],A;if(T!=null){let J=T.length;if(0<J){let R;if(t.value.lex)if((R=P[T])!==void 0)A=g.token("#VL",R.val,T,s),s.sI+=J,s.cI+=J;else for(let I in f){let le=f[I];if(le.match){let e=le.match.exec(le.consume?d:T);if(e&&(le.consume||e[0].length===T.length)){let a=e[0];if(le.val==null)A=g.token("#VL",a,a,s);else{let i=le.val(e);A=g.token("#VL",i,a,s)}s.sI+=a.length,s.cI+=a.length}}}A==null&&k.lex&&(A=g.token("#TX",T,T,s),s.sI+=J,s.cI+=J)}}if(A&&(A=l(g,A,w)),A&&0<t.text.modify.length){const J=t.text.modify;for(let R=0;R<J.length;R++)A.val=J[R](A.val,g,t,n)}return A}}};ne.makeTextMatcher=j;let z=(t,n)=>{let r=t.number,c=(0,o.regexp)(null,["^([-+]?(0(",[r.hex?"x[0-9a-fA-F_]+":null,r.oct?"o[0-7_]+":null,r.bin?"b[01_]+":null].filter(k=>k!=null).join("|"),")|\\.?[0-9]+([0-9_]*[0-9])?)","(\\.[0-9]?([0-9_]*[0-9])?)?","([eE][-+]?[0-9]+([0-9_]*[0-9])?)?"].join("").replace(/_/g,r.sep?(0,o.escre)(r.sepChar):""),")",...t.rePart.ender),g=r.sep?(0,o.regexp)("g",(0,o.escre)(r.sepChar)):void 0;return function(s){if(r=t.number,!r.lex)return;if(t.number.check){let T=t.number.check(s);if(T&&T.done)return T.token}let d=s.pnt,P=s.src.substring(d.sI),f=t.value.def,C=P.match(c);if(C){let T=C[1],w=C[9],A,J=!0;if(T!=null&&(J=!t.number.exclude||!T.match(t.number.exclude))){let R=T.length;if(0<R){let I;if(t.value.lex&&(I=f[T])!==void 0)A=s.token("#VL",I.val,T,d);else{let le=g?T.replace(g,""):T,e=+le;if(isNaN(e)){let a=le[0];(a==="-"||a==="+")&&(e=(a==="-"?-1:1)*+le.substring(1))}isNaN(e)||(A=s.token("#NR",e,T,d),d.sI+=R,d.cI+=R)}}}return J&&(A=l(s,A,w)),A}}};ne.makeNumberMatcher=z;let F=(t,n)=>{let r=n.string||{};return t.string=t.string||{},t.string=(0,o.deep)(t.string,{lex:!!(r!=null&&r.lex),quoteMap:(0,o.charset)(r.chars),multiChars:(0,o.charset)(r.multiChars),escMap:{...r.escape},escChar:r.escapeChar,escCharCode:r.escapeChar==null?void 0:r.escapeChar.charCodeAt(0),allowUnknown:!!r.allowUnknown,replaceCodeMap:(0,o.omap)((0,o.clean)({...r.replace}),([c,g])=>[c.charCodeAt(0),g]),hasReplace:!1,abandon:!!r.abandon}),t.string.escMap=(0,o.clean)(t.string.escMap),t.string.hasReplace=0<(0,o.keys)(t.string.replaceCodeMap).length,function(g){let k=t.string;if(!k.lex)return;if(t.string.check){let i=t.string.check(g);if(i&&i.done)return i.token}let{quoteMap:s,escMap:d,escChar:P,escCharCode:f,multiChars:C,allowUnknown:T,replaceCodeMap:w,hasReplace:A}=k,{pnt:J,src:R}=g,{sI:I,rI:le,cI:e}=J,a=R.length;if(s[R[I]]){const i=R[I],O=I,h=le,y=C[i];++I,++e;let Y=[],V;for(I;I<a;I++){e++;let Q=R[I];if(V=void 0,i===Q){I++;break}else if(P===Q){I++,e++;let ee=d[R[I]];if(ee!=null)Y.push(ee);else if(R[I]==="x"){I++;let K=parseInt(R.substring(I,I+2),16);if(isNaN(K))return k.abandon?void 0:(I=I-2,e-=2,J.sI=I,J.cI=e,g.bad(o.S.invalid_ascii,I,I+4));let H=String.fromCharCode(K);Y.push(H),I+=1,e+=2}else if(R[I]==="u"){I++;let K=R[I]==="{"?(I++,1):0,H=K?6:4,ie=parseInt(R.substring(I,I+H),16);if(isNaN(ie))return k.abandon?void 0:(I=I-2-K,e-=2,J.sI=I,J.cI=e,g.bad(o.S.invalid_unicode,I,I+H+2+2*K));let oe=String.fromCodePoint(ie);Y.push(oe),I+=H-1+K,e+=H+K}else if(T)Y.push(R[I]);else return k.abandon?void 0:(J.sI=I,J.cI=e-1,g.bad(o.S.unexpected,I,I+1))}else if(A&&(V=w[R.charCodeAt(I)])!==void 0)Y.push(V),e++;else{let ee=I,K=i.charCodeAt(0),H=R.charCodeAt(I);for(;(!A||(V=w[H])===void 0)&&I<a&&32<=H&&K!==H&&f!==H;)H=R.charCodeAt(++I),e++;if(e--,V===void 0&&H<32)if(y&&t.line.chars[R[I]])t.line.rowChars[R[I]]&&(J.rI=++le),e=1,Y.push(R.substring(ee,I+1));else return k.abandon?void 0:(J.sI=I,J.cI=e,g.bad(o.S.unprintable,I,I+1));else Y.push(R.substring(ee,I)),I--}}if(R[I-1]!==i||J.sI===I-1)return k.abandon?void 0:(J.rI=h,g.bad(o.S.unterminated_string,O,I));const Z=g.token("#ST",Y.join(v.EMPTY),R.substring(J.sI,I),J);return J.sI=I,J.rI=le,J.cI=e,Z}}};ne.makeStringMatcher=F;let E=(t,n)=>function(c){if(!t.line.lex)return;if(t.line.check){let w=t.line.check(c);if(w&&w.done)return w.token}let{chars:g,rowChars:k}=t.line,{pnt:s,src:d}=c,{sI:P,rI:f}=s,C=t.line.single,T;for(C&&(T={});g[d[P]]&&!(T&&(T[d[P]]=(T[d[P]]||0)+1,C&&1<T[d[P]]));)f+=k[d[P]]?1:0,P++;if(s.sI<P){let w=d.substring(s.sI,P);const A=c.token("#LN",void 0,w,s);return s.sI+=w.length,s.rI=f,s.cI=1,A}};ne.makeLineMatcher=E;let u=(t,n)=>function(c){if(!t.space.lex)return;if(t.space.check){let f=t.space.check(c);if(f&&f.done)return f.token}let{chars:g}=t.space,{pnt:k,src:s}=c,{sI:d,cI:P}=k;for(;g[s[d]];)d++,P++;if(k.sI<d){let f=s.substring(k.sI,d);const C=c.token("#SP",void 0,f,k);return k.sI+=f.length,k.cI=P,C}};ne.makeSpaceMatcher=u;function l(t,n,r){let c=t.pnt,g=n;if(t.cfg.fixed.lex&&r!=null&&0<r.length){let s,d=t.cfg.fixed.token[r];d!=null&&(s=t.token(d,void 0,r,c)),s!=null&&(c.sI+=s.src.length,c.cI+=s.src.length,n==null?g=s:c.token.push(s))}return g}class m{constructor(n){this.src=v.EMPTY,this.ctx={},this.cfg={},this.pnt=b(-1),this.ctx=n,this.src=n.src(),this.cfg=n.cfg,this.pnt=b(this.src.length)}token(n,r,c,g,k,s){let d,P;return typeof n=="string"?(P=n,d=(0,o.tokenize)(P,this.cfg)):(d=n,P=(0,o.tokenize)(n,this.cfg)),M(P,d,r,c,g||this.pnt,k,s)}next(n,r,c,g){let k,s=this.pnt,d=s.sI,P;if(s.end)k=s.end;else if(0<s.token.length)k=s.token.shift();else if(s.len<=s.sI)s.end=this.token("#ZZ",void 0,"",s),k=s.end;else{try{for(let f of this.cfg.lex.match)if(k=f(this,n,g)){P=f;break}}catch(f){k=k||this.token("#BD",void 0,this.src[s.sI],s,{err:f},f.code||o.S.unexpected)}k=k||this.token("#BD",void 0,this.src[s.sI],s,void 0,o.S.unexpected)}return this.ctx.log&&this.ctx.log(o.S.lex,this.ctx,n,this,s,d,P,k,r,c,g),this.ctx.sub.lex&&this.ctx.sub.lex.map(f=>f(k,n,this.ctx)),k}tokenize(n){return(0,o.tokenize)(n,this.cfg)}bad(n,r,c){return this.token("#BD",void 0,0<=r&&r<=c?this.src.substring(r,c):this.src[this.pnt.sI],void 0,void 0,n)}}const p=(...t)=>new m(...t);return ne.makeLex=p,ne}var Sn;function Re(){if(Sn)return q;Sn=1,Object.defineProperty(q,"__esModule",{value:!0}),q.values=q.keys=q.omap=q.isarr=q.entries=q.defprop=q.assign=q.S=q.JsonicError=void 0,q.badlex=k,q.charset=T,q.clean=w,q.clone=C,q.configure=z,q.deep=p,q.errdesc=g,q.errinject=t,q.escre=m,q.errsite=r,q.filterRules=A,q.makelog=s,q.mesc=u,q.regexp=l,q.snip=f,q.srcfmt=d,q.tokenize=F,q.trimstk=n,q.parserwrap=I,q.prop=J,q.str=P,q.findTokenSet=E,q.modlist=R,q.strinject=le,q.errmsg=c;const v=Oe(),o=Te(),x=e=>e==null?[]:Object.keys(e);q.keys=x;const b=e=>e==null?[]:Object.values(e);q.values=b;const _=e=>e==null?[]:Object.entries(e);q.entries=_;const M=(e,...a)=>Object.assign(e??{},...a);q.assign=M;const W=e=>Array.isArray(e);q.isarr=W;const X=Object.defineProperty;q.defprop=X;const $=(e,a)=>Object.entries(e||{}).reduce((i,O)=>{let h=a?a(O):O;h[0]===void 0?delete i[O[0]]:i[h[0]]=h[1];let y=2;for(;h[y]!==void 0;)i[h[y]]=h[y+1],y+=2;return i},{});q.omap=$;const S={indent:". ",logindent:"  ",space:" ",gap:"  ",Object:"Object",Array:"Array",object:"object",string:"string",function:"function",unexpected:"unexpected",map:"map",list:"list",elem:"elem",pair:"pair",val:"val",node:"node",no_re_flags:v.EMPTY,unprintable:"unprintable",invalid_ascii:"invalid_ascii",invalid_unicode:"invalid_unicode",invalid_lex_state:"invalid_lex_state",unterminated_string:"unterminated_string",unterminated_comment:"unterminated_comment",lex:"lex",parse:"parse",error:"error",none:"none",imp_map:"imp,map",imp_list:"imp,list",imp_null:"imp,null",end:"end",open:"open",close:"close",rule:"rule",stack:"stack",nUll:"null",name:"name",make:"make",colon:":"};q.S=S;class j extends SyntaxError{constructor(a,i,O,h,y){i=p({},i);let Y=g(a,i,O,h,y);super(Y.message),M(this,Y)}}q.JsonicError=j;function z(e,a,i){var O,h,y,Y,V,Z,Q,ee,K,H,ie,oe,we,fe,Se,ve,Ne,xe,Pe,Ae,Le,$e,Ue,Ye,Fe,Je,qe,De,Be,Ke,Ve,ze,Ge,Ze,We,Xe,He,Qe,en,nn,tn,ln,rn,sn,un,an,on,dn,cn,fn;const L=a||{};L.t=L.t||{},L.tI=L.tI||1;const ce=N=>F(N,L);i.standard$!==!1&&(ce("#BD"),ce("#ZZ"),ce("#UK"),ce("#AA"),ce("#SP"),ce("#LN"),ce("#CM"),ce("#NR"),ce("#ST"),ce("#TX"),ce("#VL")),L.safe={key:((O=i.safe)===null||O===void 0?void 0:O.key)!==!1},L.fixed={lex:!!(!((h=i.fixed)===null||h===void 0)&&h.lex),token:i.fixed?$(w(i.fixed.token),([N,D])=>[D,F(N,L)]):{},ref:void 0,check:(y=i.fixed)===null||y===void 0?void 0:y.check},L.fixed.ref=$(L.fixed.token,([N,D])=>[N,D]),L.fixed.ref=Object.assign(L.fixed.ref,$(L.fixed.ref,([N,D])=>[D,N])),L.match={lex:!!(!((Y=i.match)===null||Y===void 0)&&Y.lex),value:i.match?$(w(i.match.value),([N,D])=>[N,D]):{},token:i.match?$(w(i.match.token),([N,D])=>[F(N,L),D]):{},check:(V=i.match)===null||V===void 0?void 0:V.check},$(L.match.token,([N,D])=>[N,(D.tin$=+N,D)]);const Ln=i.tokenSet?Object.keys(i.tokenSet).reduce((N,D)=>(N[D]=i.tokenSet[D].filter(he=>he!=null).map(he=>ce(he)),N),{}):{};L.tokenSet=L.tokenSet||{},_(Ln).map(N=>{let D=N[0],he=N[1];L.tokenSet[D]?(L.tokenSet[D].length=0,L.tokenSet[D].push(...he)):L.tokenSet[D]=he}),L.tokenSetTins=_(L.tokenSet).reduce((N,D)=>(N[D[0]]=N[D[0]]||{},D[1].map(he=>N[D[0]][he]=!0),N),{}),L.tokenSetTins.IGNORE=L.tokenSetTins.IGNORE||{},L.space={lex:!!(!((Z=i.space)===null||Z===void 0)&&Z.lex),chars:T((Q=i.space)===null||Q===void 0?void 0:Q.chars),check:(ee=i.space)===null||ee===void 0?void 0:ee.check},L.line={lex:!!(!((K=i.line)===null||K===void 0)&&K.lex),chars:T((H=i.line)===null||H===void 0?void 0:H.chars),rowChars:T((ie=i.line)===null||ie===void 0?void 0:ie.rowChars),single:!!(!((oe=i.line)===null||oe===void 0)&&oe.single),check:(we=i.line)===null||we===void 0?void 0:we.check},L.text={lex:!!(!((fe=i.text)===null||fe===void 0)&&fe.lex),modify:(((Se=L.text)===null||Se===void 0?void 0:Se.modify)||[]).concat((!((ve=i.text)===null||ve===void 0)&&ve.modify?[i.text.modify]:[]).flat()).filter(N=>N!=null),check:(Ne=i.text)===null||Ne===void 0?void 0:Ne.check},L.number={lex:!!(!((xe=i.number)===null||xe===void 0)&&xe.lex),hex:!!(!((Pe=i.number)===null||Pe===void 0)&&Pe.hex),oct:!!(!((Ae=i.number)===null||Ae===void 0)&&Ae.oct),bin:!!(!((Le=i.number)===null||Le===void 0)&&Le.bin),sep:(($e=i.number)===null||$e===void 0?void 0:$e.sep)!=null&&i.number.sep!=="",exclude:(Ue=i.number)===null||Ue===void 0?void 0:Ue.exclude,sepChar:(Ye=i.number)===null||Ye===void 0?void 0:Ye.sep,check:(Fe=i.number)===null||Fe===void 0?void 0:Fe.check},L.value={lex:!!(!((Je=i.value)===null||Je===void 0)&&Je.lex),def:_(((qe=i.value)===null||qe===void 0?void 0:qe.def)||{}).reduce((N,D)=>(D[1]==null||D[1]===!1||D[1].match||(N[D[0]]=D[1]),N),{}),defre:_(((De=i.value)===null||De===void 0?void 0:De.def)||{}).reduce((N,D)=>(D[1]&&D[1].match&&(N[D[0]]=D[1],N[D[0]].consume=!!N[D[0]].consume),N),{})},L.rule={start:((Be=i.rule)===null||Be===void 0?void 0:Be.start)==null?"val":i.rule.start,maxmul:((Ke=i.rule)===null||Ke===void 0?void 0:Ke.maxmul)==null?3:i.rule.maxmul,finish:!!(!((Ve=i.rule)===null||Ve===void 0)&&Ve.finish),include:!((ze=i.rule)===null||ze===void 0)&&ze.include?i.rule.include.split(/\s*,+\s*/).filter(N=>N!==""):[],exclude:!((Ge=i.rule)===null||Ge===void 0)&&Ge.exclude?i.rule.exclude.split(/\s*,+\s*/).filter(N=>N!==""):[]},L.map={extend:!!(!((Ze=i.map)===null||Ze===void 0)&&Ze.extend),merge:(We=i.map)===null||We===void 0?void 0:We.merge},L.list={property:!!(!((Xe=i.list)===null||Xe===void 0)&&Xe.property)};let mn=Object.keys(L.fixed.token).sort((N,D)=>D.length-N.length).map(N=>m(N)).join("|"),hn=!((He=i.comment)===null||He===void 0)&&He.lex?(i.comment.def?b(i.comment.def):[]).filter(N=>N&&N.lex).map(N=>m(N.start)).join("|"):"",bn=["([",m(x(T(L.space.lex&&L.space.chars,L.line.lex&&L.line.chars)).join("")),"]",(typeof i.ender=="string"?i.ender.split(""):Array.isArray(i.ender)?i.ender:[]).map(N=>"|"+m(N)).join(""),mn===""?"":"|",mn,hn===""?"":"|",hn,"|$)"];return L.rePart={fixed:mn,ender:bn,commentStart:hn},L.re={ender:l(null,...bn),rowChars:l(null,m((Qe=i.line)===null||Qe===void 0?void 0:Qe.rowChars)),columns:l(null,"["+m((en=i.line)===null||en===void 0?void 0:en.chars)+"]","(.*)$")},L.lex={empty:!!(!((nn=i.lex)===null||nn===void 0)&&nn.empty),emptyResult:(tn=i.lex)===null||tn===void 0?void 0:tn.emptyResult,match:!((ln=i.lex)===null||ln===void 0)&&ln.match?_(i.lex.match).reduce((N,D)=>{let he=D[0],Me=D[1];if(Me){let Ie=Me.make(L,i);Ie&&(Ie.matcher=he,Ie.make=Me.make,Ie.order=Me.order),N.push(Ie)}return N},[]).filter(N=>N!=null&&N!==!1&&-1<+N.order).sort((N,D)=>N.order-D.order):[]},L.parse={prepare:b((rn=i.parse)===null||rn===void 0?void 0:rn.prepare)},L.debug={get_console:((sn=i.debug)===null||sn===void 0?void 0:sn.get_console)||(()=>console),maxlen:((un=i.debug)===null||un===void 0?void 0:un.maxlen)==null?99:i.debug.maxlen,print:{config:!!(!((on=(an=i.debug)===null||an===void 0?void 0:an.print)===null||on===void 0)&&on.config),src:(cn=(dn=i.debug)===null||dn===void 0?void 0:dn.print)===null||cn===void 0?void 0:cn.src}},L.error=i.error||{},L.hint=i.hint||{},!((fn=i.config)===null||fn===void 0)&&fn.modify&&x(i.config.modify).forEach(N=>i.config.modify[N](L,i)),L.debug.print.config&&L.debug.get_console().dir(L,{depth:null}),L.result={fail:[]},i.result&&(L.result.fail=[...i.result.fail]),M(e.options,i),M(e.token,L.t),M(e.tokenSet,L.tokenSet),M(e.fixed,L.fixed.ref),L}function F(e,a,i){let O=a.t,h=O[e];return h==null&&v.STRING===typeof e&&(h=a.tI++,O[h]=e,O[e]=h,O[e.substring(1)]=h,i!=null&&M(i.token,a.t)),h}function E(e,a){return a.tokenSet[e]}function u(e,a){return a=new String(e),a.esc=!0,a}function l(e,...a){return new RegExp(a.map(i=>i.esc?m(i.toString()):i).join(v.EMPTY),e??"")}function m(e){return e==null?"":e.replace(/[-\\|\]{}()[^$+*?.!=]/g,"\\$&").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}function p(e,...a){let i=S.function===typeof e,O=e!=null&&(S.object===typeof e||i);for(let h of a){let y=S.function===typeof h,Y=h!=null&&(S.object===typeof h||y),V;if(O&&Y&&!y&&Array.isArray(e)===Array.isArray(h))for(let Z in h)e[Z]=p(e[Z],h[Z]);else e=h===void 0?e:y?h:Y?S.function===typeof(V=h.constructor)&&S.Object!==V.name&&S.Array!==V.name?h:p(Array.isArray(h)?[]:{},h):h,i=S.function===typeof e,O=e!=null&&(S.object===typeof e||i)}return e}function t(e,a,i,O,h,y){let Y={...y||{},...y.cfg||{},...y.opts||{},...O||{},...h||{},...y.meta||{},...i||{},code:a,details:i,token:O,rule:h,ctx:y};return le(e,Y,{indent:"  "})}function n(e){e.stack&&(e.stack=e.stack.split(`
`).filter(a=>!a.includes("jsonic/jsonic")).map(a=>a.replace(/    at /,"at ")).join(`
`))}function r(e){let{src:a,sub:i,msg:O,cline:h,row:y,col:Y,pos:V}=e;y=y!=null&&0<y?y:1,Y=Y!=null&&0<Y?Y:1,V=V!=null&&0<V?V:a==null?0:a.split(`
`).reduce((fe,Se,ve)=>(fe+=ve<y-1?Se.length+1:ve===y-1?Y:0,fe),0);let Z=i??v.EMPTY,Q=a.substring(Math.max(0,V-333),V).split(`
`),ee=a.substring(V,V+333).split(`
`),K=2+(v.EMPTY+(y+2)).length,H=y<3?1:y-2,ie=fe=>(h??"")+(v.EMPTY+H++).padStart(K," ")+" | "+(h==null?"":"\x1B[0m")+(fe??v.EMPTY),oe=Q.length;return[2<oe?ie(Q[oe-3]):null,1<oe?ie(Q[oe-2]):null,ie(Q[oe-1]+ee[0])," ".repeat(K)+"   "+" ".repeat(Y-1)+(h??"")+"^".repeat(Z.length||1)+" "+O+(h==null?"":"\x1B[0m"),ie(ee[1]),ie(ee[2])].filter(fe=>fe!=null).join(`
`)}function c(e){const a=e.color!=null&&typeof e.color=="object"?e.color:void 0,i=e.color===!0||a,O={reset:i?"\x1B[0m":"",hi:i?"\x1B[91m":"",lo:i?"\x1B[2m":"",line:i?"\x1B[34m":"",...a||{}};return[e.prefix==null?null:typeof e.prefix=="function"?e.prefix(O,e):""+e.prefix,(e.code==null?"":O.hi+"["+(e.name==null?"":e.name+"/")+e.code+"]:")+O.reset+" "+(e.msg==null?"":e.msg),e.row!=null&&e.col!=null||e.file!=null?"  "+O.line+"-->"+O.reset+" "+(e.file==null?"<no-file>":e.file)+(e.row==null||e.col==null?"":":"+e.row+":"+e.col):null,e.src==null?"":r({src:e.src,sub:e.sub,msg:e.smsg||e.msg,cline:O.line,row:e.row,col:e.col,pos:e.pos})+`
`,e.hint==null?null:e.hint,e.suffix==null?null:typeof e.suffix=="function"?e.suffix(O,e):""+e.suffix].filter(y=>y!=null).join(`
`)}function g(e,a,i,O,h){var y,Y,V;try{let Z=h.cfg,Q=h.meta,ee=t({msg:Z.error[e]||((y=a==null?void 0:a.use)===null||y===void 0?void 0:y.err)&&(a.use.err.code||a.use.err.message)||Z.error.unknown,hint:(Z.hint[e]||((V=(Y=a.use)===null||Y===void 0?void 0:Y.err)===null||V===void 0?void 0:V.message)||Z.hint.unknown||"").trim().split(`
`).map(ie=>"  "+ie).join(`
`)},e,a,i,O,h),K=c({code:e,name:"jsonic",msg:ee.msg,hint:ee.hint,src:h.src(),file:Q?Q.fileName:void 0,row:i.rI,col:i.cI,pos:i.sI,sub:i.src,color:!0,suffix:ie=>["","  "+ie.lo+"https://jsonic.senecajs.org"+ie.reset,"  "+ie.lo+"--internal: tag="+(h.opts.tag||"")+"; rule="+O.name+"~"+O.state+"; token="+F(i.tin,h.cfg)+(i.why==null?"":"~"+i.why)+"; plugins="+h.plgn().map(oe=>oe.name).join(",")+"--"+ie.reset].join(`
`)}),H={internal:{token:i,ctx:h}};return H={...Object.create(H),message:K,code:e,details:a,meta:Q,fileName:Q?Q.fileName:void 0,lineNumber:i.rI,columnNumber:i.cI},H}catch(Z){return console.log(Z),{}}}function k(e,a,i){let O=e.next.bind(e);return e.next=(h,y,Y,V)=>{let Z=O(h,y,Y,V);if(a===Z.tin){let Q={};throw Z.use!=null&&(Q.use=Z.use),new j(Z.why||S.unexpected,Q,Z,h,i)}return Z},e}function s(e,a){var i,O,h;let y=(h=(O=(i=e.opts)===null||i===void 0?void 0:i.plugin)===null||O===void 0?void 0:O.debug)===null||h===void 0?void 0:h.trace;if(a||y)if(typeof(a==null?void 0:a.log)=="number"||y){let Y=!1,V=a==null?void 0:a.log;(V===-1||y)&&(V=1,Y=!0),e.log=(...Z)=>{if(Y){let Q=Z.filter(ee=>S.object!=typeof ee).map(ee=>S.function==typeof ee?ee.name:ee).join(S.gap);e.cfg.debug.get_console().log(Q)}else e.cfg.debug.get_console().dir(Z,{depth:V})}}else typeof a.log=="function"&&(e.log=a.log);return e.log}function d(e){return typeof e.debug.print.src=="function"?e.debug.print.src:a=>{let i=a==null?v.EMPTY:Array.isArray(a)?JSON.stringify(a).replace(/]$/,_(a).filter(O=>isNaN(O[0])).map((O,h)=>(h===0?", ":"")+O[0]+": "+JSON.stringify(O[1]))+"]"):JSON.stringify(a);return i=i.substring(0,e.debug.maxlen)+(e.debug.maxlen<i.length?"...":v.EMPTY),i}}function P(e,a=44){let i;try{i=typeof e=="object"?JSON.stringify(e):""+e}catch{i=""+e}return f(a<i.length?i.substring(0,a-3)+"...":i,a)}function f(e,a=5){return e===void 0?"":(""+e).substring(0,a).replace(/[\r\n\t]/g,".")}function C(e){return p(Object.create(Object.getPrototypeOf(e)),e)}function T(...e){return e==null?{}:e.filter(a=>a!==!1).map(a=>typeof a=="object"?x(a).join(v.EMPTY):a).join(v.EMPTY).split(v.EMPTY).reduce((a,i)=>(a[i]=i.charCodeAt(0),a),{})}function w(e){for(let a in e)e[a]==null&&delete e[a];return e}function A(e,a){let i=["open","close"];for(let O of i)e.def[O]=e.def[O].map(h=>(h.g=typeof h.g=="string"?(h.g||"").split(/\s*,+\s*/):h.g||[],h)).filter(h=>a.rule.include.reduce((y,Y)=>y||h.g!=null&&h.g.indexOf(Y)!==-1,a.rule.include.length===0)).filter(h=>a.rule.exclude.reduce((y,Y)=>y&&(h.g==null||h.g.indexOf(Y)===-1),!0));return e}function J(e,a,i){let O=e;try{let h=a.split("."),y;for(let Y=0;Y<h.length;Y++){if(y=h[Y],y==="__proto__")throw new Error(y);Y<h.length-1&&(e=e[y]=e[y]||{})}if(i!==void 0){if(y==="__proto__")throw new Error(y);e[y]=i}return e[y]}catch{throw new Error("Cannot "+(i===void 0?"get":"set")+" path "+a+" on object: "+P(O)+(i===void 0?"":" to value: "+P(i,22)))}}function R(e,a){if(a&&e){if(0<e.length){if(a.delete&&0<a.delete.length)for(let O=0;O<a.delete.length;O++){let h=a.delete[O];if(h<0?-1*h<=e.length:h<e.length){let y=(e.length+h)%e.length;e[y]=null}}if(a.move)for(let O=0;O<a.move.length;O+=2){let h=(e.length+a.move[O])%e.length,y=(e.length+a.move[O+1])%e.length,Y=e[h];e.splice(h,1),e.splice(y,0,Y)}let i=e.filter(O=>O!=null);i.length!==e.length&&(e.length=0,e.push(...i))}if(a.custom){let i=a.custom(e);i!=null&&(e=i)}}return e}function I(e){return{start:function(a,i,O,h){try{return e.start(a,i,O,h)}catch(y){if(y.name==="SyntaxError"){let Y=0,V=0,Z=0,Q=v.EMPTY,ee=y.message.match(/^Unexpected token (.) .*position\s+(\d+)/i);if(ee){Q=ee[1],Y=parseInt(ee[2]),V=a.substring(0,Y).replace(/[^\n]/g,v.EMPTY).length;let H=Y-1;for(;-1<H&&a.charAt(H)!==`
`;)H--;Z=Math.max(a.substring(H,Y).length,0)}let K=y.token||(0,o.makeToken)("#UK",F("#UK",i.internal().config),void 0,Q,(0,o.makePoint)(Q.length,Y,y.lineNumber||V,y.columnNumber||Z));throw new j(y.code||"json",y.details||{msg:y.message},K,{},y.ctx||{uI:-1,opts:i.options,cfg:i.internal().config,token:K,meta:O,src:()=>a,root:()=>{},plgn:()=>i.internal().plugins,inst:()=>i,rule:{name:"no-rule"},sub:{},xs:-1,v2:K,v1:K,t0:K,t1:K,tC:-1,kI:-1,rs:[],rsI:0,rsm:{},n:{},log:O?O.log:void 0,F:d(i.internal().config),u:{},NORULE:{name:"no-rule"},NOTOKEN:{name:"no-token"}})}else throw y}}}}function le(e,a,i){let O=typeof e,h=Array.isArray(e)?"array":e==null?"string":O==="object"?O:"string",y=h==="object"?e:h==="array"?e.reduce((V,Z,Q)=>(V[Q]=Z,V),{}):{_:e},Y=a??{};return Object.entries(y).map(V=>y[V[0]]=V[1]==null?"":(""+V[1]).replace(/\{([\w_0-9.]+)}/g,(Z,Q)=>{var ee;let K=J(Y,Q);if(K=K===void 0?Z:K,typeof K=="object"){let H=(ee=K==null?void 0:K.constructor)===null||ee===void 0?void 0:ee.name;H==="Object"||H==="Array"?K=JSON.stringify(K).replace(/([^"])"/g,"$1"):K=K.toString()}else K=""+K;return i&&typeof i.indent=="string"&&(K=K.replace(/\n/g,`
`+i.indent)),K})),h==="string"?y._:h==="array"?Object.values(y):y}return q}var Ee={},In;function nt(){if(In)return Ee;In=1,Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.defaults=void 0;const v=Te(),o={safe:{key:!0},tag:"-",fixed:{lex:!0,token:{"#OB":"{","#CB":"}","#OS":"[","#CS":"]","#CL":":","#CA":","}},match:{lex:!0,token:{}},tokenSet:{IGNORE:["#SP","#LN","#CM"],VAL:["#TX","#NR","#ST","#VL"],KEY:["#TX","#NR","#ST","#VL"]},space:{lex:!0,chars:" 	"},line:{lex:!0,chars:`\r
`,rowChars:`
`,single:!1},text:{lex:!0},number:{lex:!0,hex:!0,oct:!0,bin:!0,sep:"_",exclude:void 0},comment:{lex:!0,def:{hash:{line:!0,start:"#",lex:!0,eatline:!1},slash:{line:!0,start:"//",lex:!0,eatline:!1},multi:{line:!1,start:"/*",end:"*/",lex:!0,eatline:!1}}},string:{lex:!0,chars:"'\"`",multiChars:"`",escapeChar:"\\",escape:{b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",'"':'"',"'":"'","`":"`","\\":"\\","/":"/"},allowUnknown:!0,abandon:!1},map:{extend:!0,merge:void 0},list:{property:!0},value:{lex:!0,def:{true:{val:!0},false:{val:!1},null:{val:null}}},ender:[],plugin:{},debug:{get_console:()=>console,maxlen:99,print:{config:!1,src:void 0}},error:{unknown:"unknown error: {code}",unexpected:"unexpected character(s): {src}",invalid_unicode:"invalid unicode escape: {src}",invalid_ascii:"invalid ascii escape: {src}",unprintable:"unprintable character: {src}",unterminated_string:"unterminated string: {src}",unterminated_comment:"unterminated comment: {src}",unknown_rule:"unknown rule: {rulename}",end_of_source:"unexpected end of source"},hint:{unknown:`
Since the error is unknown, this is probably a bug inside jsonic
itself, or a plugin. Please consider posting a github issue - thanks!

Code: {code}, Details: 
{details}`,unexpected:`
The character(s) {src} were not expected at this point as they do not
match the expected syntax, even under the relaxed jsonic rules. If it
is not obviously wrong, the actual syntax error may be elsewhere. Try
commenting out larger areas around this point until you get no errors,
then remove the comments in small sections until you find the
offending syntax. NOTE: Also check if any plugins you are using
expect different syntax in this case.`,invalid_unicode:`
The escape sequence {src} does not encode a valid unicode code point
number. You may need to validate your string data manually using test
code to see how JavaScript will interpret it. Also consider that your
data may have become corrupted, or the escape sequence has not been
generated correctly.`,invalid_ascii:`
The escape sequence {src} does not encode a valid ASCII character. You
may need to validate your string data manually using test code to see
how JavaScript will interpret it. Also consider that your data may
have become corrupted, or the escape sequence has not been generated
correctly.`,unprintable:`
String values cannot contain unprintable characters (character codes
below 32). The character {src} is unprintable. You may need to remove
these characters from your source data. Also check that it has not
become corrupted.`,unterminated_string:`
This string has no end quote.`,unterminated_comment:`
This comment is never closed.`,unknown_rule:`
No rule named $rulename is defined. This is probably an error in the
grammar of a plugin.`,end_of_source:`
Unexpected end of source.`},lex:{match:{match:{order:1e6,make:v.makeMatchMatcher},fixed:{order:2e6,make:v.makeFixedMatcher},space:{order:3e6,make:v.makeSpaceMatcher},line:{order:4e6,make:v.makeLineMatcher},string:{order:5e6,make:v.makeStringMatcher},comment:{order:6e6,make:v.makeCommentMatcher},number:{order:7e6,make:v.makeNumberMatcher},text:{order:8e6,make:v.makeTextMatcher}},empty:!0,emptyResult:void 0},parse:{prepare:{}},rule:{start:"val",finish:!0,maxmul:3,include:"",exclude:""},result:{fail:[]},config:{modify:{}},parser:{start:void 0}};return Ee.defaults=o,Ee}var gn={},ke={},En;function tt(){if(En)return ke;En=1,Object.defineProperty(ke,"__esModule",{value:!0}),ke.makeRuleSpec=ke.makeNoRule=ke.makeRule=void 0;const v=Oe(),o=Re();class x{constructor(u,l,m){this.i=-1,this.name=v.EMPTY,this.node=null,this.state=v.OPEN,this.n=Object.create(null),this.d=-1,this.u=Object.create(null),this.k=Object.create(null),this.bo=!1,this.ao=!1,this.bc=!1,this.ac=!1,this.os=0,this.cs=0,this.need=0,this.i=l.uI++,this.name=u.name,this.spec=u,this.child=l.NORULE,this.parent=l.NORULE,this.prev=l.NORULE,this.o0=l.NOTOKEN,this.o1=l.NOTOKEN,this.c0=l.NOTOKEN,this.c1=l.NOTOKEN,this.node=m,this.d=l.rsI,this.bo=u.def.bo!=null,this.ao=u.def.ao!=null,this.bc=u.def.bc!=null,this.ac=u.def.ac!=null}process(u,l){return this.spec.process(this,u,l,this.state)}eq(u,l=0){let m=this.n[u];return m==null||m===l}lt(u,l=0){let m=this.n[u];return m==null||m<l}gt(u,l=0){let m=this.n[u];return m==null||m>l}lte(u,l=0){let m=this.n[u];return m==null||m<=l}gte(u,l=0){let m=this.n[u];return m==null||m>=l}toString(){return"[Rule "+this.name+"~"+this.i+"]"}}const b=(...E)=>new x(...E);ke.makeRule=b;const _=E=>b(j(E.cfg,{}),E);ke.makeNoRule=_;class M{constructor(){this.p=v.EMPTY,this.r=v.EMPTY,this.b=0}}const W=(...E)=>new M(...E),X=W(),$=W();class S{constructor(u,l){this.name=v.EMPTY,this.def={open:[],close:[],bo:[],bc:[],ao:[],ac:[],tcol:[]},this.cfg=u,this.def=Object.assign(this.def,l),this.def.open=(this.def.open||[]).filter(m=>m!=null),this.def.close=(this.def.close||[]).filter(m=>m!=null);for(let m of[...this.def.open,...this.def.close])F(m)}tin(u){return(0,o.tokenize)(u,this.cfg)}add(u,l,m){let p=m!=null&&m.append?"push":"unshift",t=((0,o.isarr)(l)?l:[l]).filter(c=>c!=null&&typeof c=="object").map(c=>F(c)),n=u==="o"?"open":"close",r=this.def[n];return r[p](...t),r=this.def[n]=(0,o.modlist)(r,m),(0,o.filterRules)(this,this.cfg),this.norm(),this}open(u,l){return this.add("o",u,l)}close(u,l){return this.add("c",u,l)}action(u,l,m,p){let t=this.def[l+m];return u?t.push(p):t.unshift(p),this}bo(u,l){return this.action(l?!!u:!0,v.BEFORE,v.OPEN,l||u)}ao(u,l){return this.action(l?!!u:!0,v.AFTER,v.OPEN,l||u)}bc(u,l){return this.action(l?!!u:!0,v.BEFORE,v.CLOSE,l||u)}ac(u,l){return this.action(l?!!u:!0,v.AFTER,v.CLOSE,l||u)}clear(){return this.def.open.length=0,this.def.close.length=0,this.def.bo.length=0,this.def.ao.length=0,this.def.bc.length=0,this.def.ac.length=0,this}norm(){this.def.open.map(m=>F(m)),this.def.close.map(m=>F(m));const u=[];this.def.open.reduce(...l(0,0,u)),this.def.open.reduce(...l(0,1,u)),this.def.close.reduce(...l(1,0,u)),this.def.close.reduce(...l(1,1,u)),this.def.tcol=u;function l(m,p,t){t[m]=t[m]||[];let n=t[m][p]=t[m][p]||[];return[function(r,c){if(c.s&&c.s[p]){let g=[...new Set(r.concat(c.s[p]))];r.length=0,r.push(...g)}return r},n]}return this}process(u,l,m,p){l.log&&l.log(o.S.rule,l,u,m);let t=p==="o",n=t?u:l.NORULE,r=t?"O":"C",c=this.def,g=t?c.open:c.close,k=t?u.bo?c.bo:null:u.bc?c.bc:null;if(k){let f;for(let C=0;C<k.length;C++)if(f=k[C].call(this,u,l,n,f),f!=null&&f.isToken&&(f!=null&&f.err))return this.bad(f,u,l,{is_open:t})}let s=0<g.length?z(t,g,m,u,l):$;if(s.h&&(s=s.h(u,l,s,n)||s,r+="H"),s.e)return this.bad(s.e,u,l,{is_open:t});if(s.n)for(let f in s.n)u.n[f]=s.n[f]===0?0:(u.n[f]==null?0:u.n[f])+s.n[f];if(s.u&&(u.u=Object.assign(u.u,s.u)),s.k&&(u.k=Object.assign(u.k,s.k)),s.a){r+="A";let f=s.a(u,l,s);if(f&&f.isToken&&f.err)return this.bad(f,u,l,{is_open:t})}if(s.p){l.rs[l.rsI++]=u;let f=l.rsm[s.p];if(f)n=u.child=b(f,l,u.node),n.parent=u,n.n={...u.n},0<Object.keys(u.k).length&&(n.k={...u.k}),r+="P`"+s.p+"`";else return this.bad(this.unknownRule(l.t0,s.p),u,l,{is_open:t})}else if(s.r){let f=l.rsm[s.r];if(f)n=b(f,l,u.node),n.parent=u.parent,n.prev=u,n.n={...u.n},0<Object.keys(u.k).length&&(n.k={...u.k}),r+="R`"+s.r+"`";else return this.bad(this.unknownRule(l.t0,s.r),u,l,{is_open:t})}else t||(n=l.rs[--l.rsI]||l.NORULE);let d=t?u.ao?c.ao:null:u.ac?c.ac:null;if(d){let f;for(let C=0;C<d.length;C++)if(f=d[C](u,l,n,f),f!=null&&f.isToken&&(f!=null&&f.err))return this.bad(f,u,l,{is_open:t})}n.why=r,l.log&&l.log(o.S.node,l,u,m,n),v.OPEN===u.state&&(u.state=v.CLOSE);let P=u[t?"os":"cs"]-(s.b||0);return P===1?(l.v2=l.v1,l.v1=l.t0,l.t0=l.t1,l.t1=l.NOTOKEN):P==2&&(l.v2=l.t1,l.v1=l.t0,l.t0=l.NOTOKEN,l.t1=l.NOTOKEN),n}bad(u,l,m,p){throw new o.JsonicError(u.err||o.S.unexpected,{...u.use,state:p.is_open?o.S.open:o.S.close},u,l,m)}unknownRule(u,l){return u.err="unknown_rule",u.use=u.use||{},u.use.rulename=l,u}}const j=(...E)=>new S(...E);ke.makeRuleSpec=j;function z(E,u,l,m,p){let t=X;t.b=0,t.p=v.EMPTY,t.r=v.EMPTY,t.n=void 0,t.h=void 0,t.a=void 0,t.u=void 0,t.k=void 0,t.e=void 0;let n=null,r=0,c=p.cfg.t,g=!0,k=1<<c.AA-1,s=p.cfg.tokenSetTins.IGNORE;function d(C,T,w,A){let J;do J=l.next(C,T,w,A),p.tC++;while(s[J.tin]);return J}let P=u.length;for(r=0;r<P;r++){n=u[r];let C=!1,T=!1;if(g=!0,n.S0){let w=(p.t0=p.NOTOKEN!==p.t0?p.t0:p.t0=d(m,n,r,0)).tin;if(C=!0,g=!!(n.S0[w/31|0]&(1<<w%31-1|k)),g&&(T=n.S1!=null,n.S1)){let A=(p.t1=p.NOTOKEN!==p.t1?p.t1:p.t1=d(m,n,r,1)).tin;T=!0,g=!!(n.S1[A/31|0]&(1<<A%31-1|k))}}if(E?(m.o0=C?p.t0:p.NOTOKEN,m.o1=T?p.t1:p.NOTOKEN,m.os=(C?1:0)+(T?1:0)):(m.c0=C?p.t0:p.NOTOKEN,m.c1=T?p.t1:p.NOTOKEN,m.cs=(C?1:0)+(T?1:0)),g&&n.c&&(g=g&&n.c(m,p,t)),g)break;n=null}g||(t.e=p.t0),n&&(t.n=n.n!=null?n.n:t.n,t.h=n.h!=null?n.h:t.h,t.a=n.a!=null?n.a:t.a,t.u=n.u!=null?n.u:t.u,t.k=n.k!=null?n.k:t.k,t.g=n.g!=null?n.g:t.g,t.e=n.e&&n.e(m,p,t)||void 0,t.p=n.p!=null&&n.p!==!1?typeof n.p=="string"?n.p:n.p(m,p,t):t.p,t.r=n.r!=null&&n.r!==!1?typeof n.r=="string"?n.r:n.r(m,p,t):t.r,t.b=n.b!=null&&n.b!==!1?typeof n.b=="number"?n.b:n.b(m,p,t):t.b);let f=r<u.length;return p.log&&p.log(o.S.parse,p,m,l,f,g,r,n,t),t}function F(E){if(v.STRING===typeof E.g?E.g=E.g.split(/\s*,\s*/):E.g==null&&(E.g=[]),E.g=E.g.sort(),!E.s||E.s.length===0)E.s=null;else{const u=r=>r.flat().filter(c=>typeof c=="number"),l=(r,c)=>r.filter(g=>31*c<=g&&g<31*(c+1)),m=(r,c)=>r.reduce((g,k)=>1<<k-(31*c+1)|g,0),p=u([E.s[0]]),t=u([E.s[1]]),n=E;n.S0=0<p.length?new Array(Math.max(...p.map(r=>1+r/31|0))).fill(null).map((r,c)=>c).map(r=>m(l(p,r),r)):null,n.S1=0<t.length?new Array(Math.max(...t.map(r=>1+r/31|0))).fill(null).map((r,c)=>c).map(r=>m(l(t,r),r)):null}return E.p||(E.p=null),E.r||(E.r=null),E.b||(E.b=null),E}return ke}var jn;function lt(){return jn||(jn=1,function(v){Object.defineProperty(v,"__esModule",{value:!0}),v.makeParser=v.makeRuleSpec=v.makeRule=void 0;const o=Oe(),x=Re(),b=Te(),_=tt();Object.defineProperty(v,"makeRule",{enumerable:!0,get:function(){return _.makeRule}}),Object.defineProperty(v,"makeRuleSpec",{enumerable:!0,get:function(){return _.makeRuleSpec}});class M{constructor($,S){this.rsm={},this.options=$,this.cfg=S}rule($,S){if($==null)return this.rsm;let j=this.rsm[$];if(S===null)delete this.rsm[$];else if(S!==void 0){j=this.rsm[$]=this.rsm[$]||(0,_.makeRuleSpec)(this.cfg,{}),j=this.rsm[$]=S(this.rsm[$],this)||this.rsm[$],j.name=$;return}return j}start($,S,j,z){let F,E=(0,b.makeToken)("#ZZ",(0,x.tokenize)("#ZZ",this.cfg),void 0,o.EMPTY,(0,b.makePoint)(-1)),u=(0,b.makeNoToken)(),l={uI:0,opts:this.options,cfg:this.cfg,meta:j||{},src:()=>$,root:()=>F,plgn:()=>S.internal().plugins,inst:()=>S,rule:{},sub:S.internal().sub,xs:-1,v2:E,v1:E,t0:u,t1:u,tC:-2,kI:-1,rs:[],rsI:0,rsm:this.rsm,log:void 0,F:(0,x.srcfmt)(this.cfg),u:{},NOTOKEN:u,NORULE:{}};l=(0,x.deep)(l,z);let m=(0,_.makeNoRule)(l);if(l.NORULE=m,l.rule=m,j&&x.S.function===typeof j.log&&(l.log=j.log),this.cfg.parse.prepare.forEach(k=>k(S,l,j)),$===""){if(this.cfg.lex.empty)return this.cfg.lex.emptyResult;throw new x.JsonicError(x.S.unexpected,{src:$},l.t0,m,l)}let p=(0,x.badlex)((0,b.makeLex)(l),(0,x.tokenize)("#BD",this.cfg),l),t=this.rsm[this.cfg.rule.start];if(t==null)return;let n=(0,_.makeRule)(t,l);F=n;let r=2*(0,x.keys)(this.rsm).length*p.src.length*2*l.cfg.rule.maxmul,c=0;for(;m!==n&&c<r;)l.kI=c,l.rule=n,l.log&&l.log("",l.kI+":"),l.sub.rule&&l.sub.rule.map(k=>k(n,l)),n=n.process(l,p),l.log&&l.log(x.S.stack,l,n,p),c++;if(E.tin!==p.next(n).tin)throw new x.JsonicError(x.S.unexpected,{},l.t0,m,l);const g=l.root().node;if(this.cfg.result.fail.includes(g))throw new x.JsonicError(x.S.unexpected,{},l.t0,m,l);return g}clone($,S){let j=new M($,S);return j.rsm=Object.keys(this.rsm).reduce((z,F)=>(z[F]=(0,x.filterRules)(this.rsm[F],this.cfg),z),{}),j.norm(),j}norm(){(0,x.values)(this.rsm).map($=>$.norm())}}const W=(...X)=>new M(...X);v.makeParser=W}(gn)),gn}var je={},On;function rt(){if(On)return je;On=1,Object.defineProperty(je,"__esModule",{value:!0}),je.grammar=v,je.makeJSON=o;function v(x){const{deep:b}=x.util,{OB:_,CB:M,OS:W,CS:X,CL:$,CA:S,TX:j,ST:z,ZZ:F}=x.token,{VAL:E,KEY:u}=x.tokenSet,l=(t,n)=>{if(!n.cfg.rule.finish)return n.t0.err="end_of_source",n.t0},m=t=>{const n=t.o0,r=z===n.tin||j===n.tin?n.val:n.src;t.u.key=r};x.rule("val",t=>{t.bo(n=>n.node=void 0).open([{s:[_],p:"map",b:1,g:"map,json"},{s:[W],p:"list",b:1,g:"list,json"},{s:[E],g:"val,json"}]).close([{s:[F],g:"end,json"},{b:1,g:"more,json"}]).bc((n,r)=>{n.node=n.node===void 0?n.child.node===void 0?n.os===0?void 0:n.o0.resolveVal(n,r):n.child.node:n.node})}),x.rule("map",t=>{t.bo(n=>{n.node=Object.create(null)}).open([{s:[_,M],b:1,n:{pk:0},g:"map,json"},{s:[_],p:"pair",n:{pk:0},g:"map,json,pair"}]).close([{s:[M],g:"end,json"}])}),x.rule("list",t=>{t.bo(n=>{n.node=[]}).open([{s:[W,X],b:1,g:"list,json"},{s:[W],p:"elem",g:"list,elem,json"}]).close([{s:[X],g:"end,json"}])}),x.rule("pair",t=>{t.open([{s:[u,$],p:"val",u:{pair:!0},a:m,g:"map,pair,key,json"}]).bc((n,r)=>{n.u.pair&&(n.u.prev=n.node[n.u.key],n.node[n.u.key]=n.child.node)}).close([{s:[S],r:"pair",g:"map,pair,json"},{s:[M],b:1,g:"map,pair,json"}])}),x.rule("elem",t=>{t.open([{p:"val",g:"list,elem,val,json"}]).bc(n=>{n.u.done!==!0&&n.node.push(n.child.node)}).close([{s:[S],r:"elem",g:"list,elem,json"},{s:[X],b:1,g:"list,elem,json"}])});const p=(t,n)=>{let r=t.u.key,c=t.child.node;const g=t.u.prev;c=c===void 0?null:c,!(t.u.list&&n.cfg.safe.key&&(r==="__proto__"||r==="constructor"))&&(t.node[r]=g==null?c:n.cfg.map.merge?n.cfg.map.merge(g,c,t,n):n.cfg.map.extend?b(g,c):c)};x.rule("val",t=>{t.open([{s:[u,$],c:n=>n.d==0,p:"map",b:2,g:"pair,jsonic,top"},{s:[u,$],p:"map",b:2,n:{pk:1},g:"pair,jsonic"},{s:[E],g:"val,json"},{s:[[M,X]],b:1,c:n=>0<n.d,g:"val,imp,null,jsonic"},{s:[S],c:n=>n.d===0,p:"list",b:1,g:"list,imp,jsonic"},{s:[S],b:1,g:"list,val,imp,null,jsonic"},{s:[F],g:"jsonic"}],{append:!0,delete:[2]}).close([{s:[[M,X]],b:1,g:"val,json,close",e:(n,r)=>n.d===0?r.t0:void 0},{s:[S],c:n=>n.lte("dlist")&&n.lte("dmap"),r:"list",u:{implist:!0},g:"list,val,imp,comma,jsonic"},{c:n=>n.lte("dlist")&&n.lte("dmap"),r:"list",u:{implist:!0},g:"list,val,imp,space,jsonic",b:1},{s:[F],g:"jsonic"}],{append:!0,move:[1,-1]})}),x.rule("map",t=>{t.bo(n=>{n.n.dmap=1+(n.n.dmap?n.n.dmap:0)}).open([{s:[_,F],b:1,e:l,g:"end,jsonic"}]).open([{s:[u,$],p:"pair",b:2,g:"pair,list,val,imp,jsonic"}],{append:!0}).close([{s:[M],c:n=>n.lte("pk"),g:"end,json"},{s:[M],b:1,g:"path,jsonic"},{s:[[S,X,...E]],b:1,g:"end,path,jsonic"},{s:[F],e:l,g:"end,jsonic"}],{append:!0,delete:[0]})}),x.rule("list",t=>{t.bo(n=>{n.n.dlist=1+(n.n.dlist?n.n.dlist:0),n.prev.u.implist&&(n.node.push(n.prev.node),n.prev.node=n.node)}).open({c:n=>n.prev.u.implist,p:"elem"}).open([{s:[S],p:"elem",b:1,g:"list,elem,val,imp,jsonic"},{p:"elem",g:"list,elem.jsonic"}],{append:!0}).close([{s:[F],e:l,g:"end,jsonic"}],{append:!0})}),x.rule("pair",(t,n)=>{t.open([{s:[S],g:"map,pair,comma,jsonic"}],{append:!0}).bc((r,c)=>{r.u.pair&&p(r,c)}).close([{s:[M],c:r=>r.lte("pk"),b:1,g:"map,pair,json"},{s:[S,M],c:r=>r.lte("pk"),b:1,g:"map,pair,comma,jsonic"},{s:[S,F],g:"end,jsonic"},{s:[S],c:r=>r.lte("pk"),r:"pair",g:"map,pair,json"},{s:[S],c:r=>r.lte("dmap",1),r:"pair",g:"map,pair,jsonic"},{s:[u],c:r=>r.lte("dmap",1),r:"pair",b:1,g:"map,pair,imp,jsonic"},{s:[[M,S,X,...u]],c:r=>0<r.n.pk,b:1,g:"map,pair,imp,path,jsonic"},{s:[X],e:r=>r.c0,g:"end,jsonic"},{s:[F],e:l,g:"map,pair,json"},{r:"pair",b:1,g:"map,pair,imp,jsonic"}],{append:!0,delete:[0,1]})}),x.rule("elem",(t,n)=>{t.open([{s:[S,S],b:2,u:{done:!0},a:r=>r.node.push(null),g:"list,elem,imp,null,jsonic"},{s:[S],u:{done:!0},a:r=>r.node.push(null),g:"list,elem,imp,null,jsonic"},{s:[u,$],e:n.cfg.list.property?void 0:(r,c)=>c.t0,p:"val",n:{pk:1,dmap:1},u:{done:!0,pair:!0,list:!0},a:m,g:"elem,pair,jsonic"}]).bc((r,c)=>{r.u.pair===!0&&(r.u.prev=r.node[r.u.key],p(r,c))}).close([{s:[S,[X,F]],b:1,g:"list,elem,comma,jsonic"},{s:[S],r:"elem",g:"list,elem,json"},{s:[X],b:1,g:"list,elem,json"},{s:[F],e:l,g:"list,elem,json"},{s:[M],e:r=>r.c0,g:"end,jsonic"},{r:"elem",b:1,g:"list,elem,imp,jsonic"}],{delete:[-1,-2]})})}function o(x){let b=x.make({grammar$:!1,text:{lex:!1},number:{hex:!1,oct:!1,bin:!1,sep:null,exclude:/^00+/},string:{chars:'"',multiChars:"",allowUnknown:!1,escape:{v:null}},comment:{lex:!1},map:{extend:!1},lex:{empty:!1},rule:{finish:!1,include:"json"},result:{fail:[void 0,NaN]},tokenSet:{KEY:["#ST",null,null,null]}});return v(b),b}return je}var wn;function it(){return wn||(wn=1,function(v,o){Object.defineProperty(o,"__esModule",{value:!0}),o.root=o.S=o.EMPTY=o.AFTER=o.BEFORE=o.CLOSE=o.OPEN=o.makeTextMatcher=o.makeNumberMatcher=o.makeCommentMatcher=o.makeStringMatcher=o.makeLineMatcher=o.makeSpaceMatcher=o.makeFixedMatcher=o.makeParser=o.makeLex=o.makeRuleSpec=o.makeRule=o.makePoint=o.makeToken=o.util=o.JsonicError=o.Jsonic=void 0,o.make=S;const x=Oe();Object.defineProperty(o,"OPEN",{enumerable:!0,get:function(){return x.OPEN}}),Object.defineProperty(o,"CLOSE",{enumerable:!0,get:function(){return x.CLOSE}}),Object.defineProperty(o,"BEFORE",{enumerable:!0,get:function(){return x.BEFORE}}),Object.defineProperty(o,"AFTER",{enumerable:!0,get:function(){return x.AFTER}}),Object.defineProperty(o,"EMPTY",{enumerable:!0,get:function(){return x.EMPTY}});const b=Re();Object.defineProperty(o,"JsonicError",{enumerable:!0,get:function(){return b.JsonicError}}),Object.defineProperty(o,"S",{enumerable:!0,get:function(){return b.S}});const _=nt(),M=Te();Object.defineProperty(o,"makePoint",{enumerable:!0,get:function(){return M.makePoint}}),Object.defineProperty(o,"makeToken",{enumerable:!0,get:function(){return M.makeToken}}),Object.defineProperty(o,"makeLex",{enumerable:!0,get:function(){return M.makeLex}}),Object.defineProperty(o,"makeFixedMatcher",{enumerable:!0,get:function(){return M.makeFixedMatcher}}),Object.defineProperty(o,"makeSpaceMatcher",{enumerable:!0,get:function(){return M.makeSpaceMatcher}}),Object.defineProperty(o,"makeLineMatcher",{enumerable:!0,get:function(){return M.makeLineMatcher}}),Object.defineProperty(o,"makeStringMatcher",{enumerable:!0,get:function(){return M.makeStringMatcher}}),Object.defineProperty(o,"makeCommentMatcher",{enumerable:!0,get:function(){return M.makeCommentMatcher}}),Object.defineProperty(o,"makeNumberMatcher",{enumerable:!0,get:function(){return M.makeNumberMatcher}}),Object.defineProperty(o,"makeTextMatcher",{enumerable:!0,get:function(){return M.makeTextMatcher}});const W=lt();Object.defineProperty(o,"makeRule",{enumerable:!0,get:function(){return W.makeRule}}),Object.defineProperty(o,"makeRuleSpec",{enumerable:!0,get:function(){return W.makeRuleSpec}}),Object.defineProperty(o,"makeParser",{enumerable:!0,get:function(){return W.makeParser}});const X=rt(),$={tokenize:b.tokenize,srcfmt:b.srcfmt,clone:b.clone,charset:b.charset,trimstk:b.trimstk,makelog:b.makelog,badlex:b.badlex,errsite:b.errsite,errinject:b.errinject,errdesc:b.errdesc,configure:b.configure,parserwrap:b.parserwrap,mesc:b.mesc,escre:b.escre,regexp:b.regexp,prop:b.prop,str:b.str,clean:b.clean,errmsg:b.errmsg,deep:b.deep,omap:b.omap,keys:b.keys,values:b.values,entries:b.entries};o.util=$;function S(F,E){let u=!0;if(F==="jsonic")u=!1;else if(F==="json")return(0,X.makeJSON)(j);F=typeof F=="string"?{}:F;let l={parser:null,config:null,plugins:[],sub:{lex:void 0,rule:void 0},mark:Math.random()},m=(0,b.deep)({},E?{...E.options}:(F==null?void 0:F.defaults$)===!1?{}:_.defaults,F||{}),p=function(c,g,k){var s;if(b.S.string===typeof c){let d=p.internal();return(!((s=t.parser)===null||s===void 0)&&s.start?(0,b.parserwrap)(t.parser):d.parser).start(c,p,g,k)}return c},t=r=>{if(r!=null&&b.S.object===typeof r){(0,b.deep)(m,r),(0,b.configure)(p,l.config,m);let c=p.internal().parser;l.parser=c.clone(m,l.config)}return{...p.options}},n={token:r=>(0,b.tokenize)(r,l.config,p),tokenSet:r=>(0,b.findTokenSet)(r,l.config),fixed:r=>l.config.fixed.ref[r],options:(0,b.deep)(t,m),config:()=>(0,b.deep)(l.config),parse:p,use:function(c,g){if(b.S.function!==typeof c)throw new Error("Jsonic.use: the first argument must be a function defining a plugin. See https://jsonic.senecajs.org/plugin");const k=c.name.toLowerCase(),s=(0,b.deep)({},c.defaults||{},g||{});p.options({plugin:{[k]:s}});let d=p.options.plugin[k];return p.internal().plugins.push(c),c.options=d,c(p,d)||p},rule:(r,c)=>p.internal().parser.rule(r,c)||p,make:r=>S(r,p),empty:r=>S({defaults$:!1,standard$:!1,grammar$:!1,...r||{}}),id:"Jsonic/"+Date.now()+"/"+(""+Math.random()).substring(2,8).padEnd(6,"0")+(t.tag==null?"":"/"+t.tag),toString:()=>n.id,sub:r=>(r.lex&&(l.sub.lex=l.sub.lex||[],l.sub.lex.push(r.lex)),r.rule&&(l.sub.rule=l.sub.rule||[],l.sub.rule.push(r.rule)),p),util:$};if((0,b.defprop)(n.make,b.S.name,{value:b.S.make}),u?(0,b.assign)(p,n):(0,b.assign)(p,{empty:n.empty,parse:n.parse,sub:n.sub,id:n.id,toString:n.toString}),(0,b.defprop)(p,"internal",{value:()=>l}),E){for(let c in E)p[c]===void 0&&(p[c]=E[c]);p.parent=E;let r=E.internal();l.config=(0,b.deep)({},r.config),(0,b.configure)(p,l.config,m),(0,b.assign)(p.token,l.config.t),l.plugins=[...r.plugins],l.parser=r.parser.clone(m,l.config)}else{let r={...p,...n};l.config=(0,b.configure)(r,void 0,m),l.plugins=[],l.parser=(0,W.makeParser)(m,l.config),m.grammar$!==!1&&(0,X.grammar)(r)}return p}let j;o.root=j;let z=o.root=j=S("jsonic");o.Jsonic=z,j.Jsonic=j,j.JsonicError=b.JsonicError,j.makeLex=M.makeLex,j.makeParser=W.makeParser,j.makeToken=M.makeToken,j.makePoint=M.makePoint,j.makeRule=W.makeRule,j.makeRuleSpec=W.makeRuleSpec,j.makeFixedMatcher=M.makeFixedMatcher,j.makeSpaceMatcher=M.makeSpaceMatcher,j.makeLineMatcher=M.makeLineMatcher,j.makeStringMatcher=M.makeStringMatcher,j.makeCommentMatcher=M.makeCommentMatcher,j.makeNumberMatcher=M.makeNumberMatcher,j.makeTextMatcher=M.makeTextMatcher,j.OPEN=x.OPEN,j.CLOSE=x.CLOSE,j.BEFORE=x.BEFORE,j.AFTER=x.AFTER,j.EMPTY=x.EMPTY,j.util=$,j.make=S,j.S=b.S,o.default=z,v.exports=z}(Ce,Ce.exports)),Ce.exports}var Mn=it();const st={style:{"list-style":"none"},class:"flex flex-col gap-1"},ut={key:0},at={key:0},ot={key:0,class:"pi pi-info-circle"},dt=["href"],ct={key:2,class:"styled-table"},ft={class:"p-4"},mt={class:"p-4"},ht={key:3,style:{"white-space":"pre"}},pt=["onClick"],gt={key:0},An={__name:"analysis",props:{acronym:{type:String,required:!0},versions:{type:Array,required:!0},analysis:{type:Object,required:!0},files:{type:Array,required:!0}},setup(v){const o=kn(),x=(M,W,X)=>(console.log(W),"/nbviewer/localfile/"+M+(W.length==0?"":".")+W.join(".")+"/"+X),b=(M,W,X)=>{be.get(`/api/analysis_files/${encodeURIComponent(M)}/${encodeURIComponent(W)}/${encodeURIComponent(X)}`).then($=>{const S=new Blob([$.data],{type:$.headers["content-type"]}),j=window.URL.createObjectURL(S),z=document.createElement("a");z.href=j;let F="filename";const E=$.headers["content-disposition"].match(/filename="(.+)"/);E&&E[1]&&(F=E[1]),z.setAttribute("download",F),document.body.appendChild(z),z.click()}).catch($=>{o.add({severity:"error",summary:"Error while downloading dataset",detail:$.response.data,life:3e3})})},_=M=>{if(typeof M!="string"||!M.includes("{")||!M.includes("}"))return!1;try{return Mn.Jsonic(M),!0}catch{return!1}};return(M,W)=>{const X=Gn,$=An,S=Nn,j=Jn;return G(!0),te(pe,null,_e(v.analysis,(z,F)=>(G(),te(pe,null,[typeof z=="object"?(G(),me(S,{key:0,legend:F.replaceAll("_"," "),toggleable:!0,style:{"margin-bottom":"1em"}},{default:ye(()=>[B("ul",st,[(G(!0),te(pe,null,_e(z,(E,u)=>(G(),te(pe,null,[u.endsWith("_info")?ue("",!0):(G(),te("li",ut,[typeof E!="object"?(G(),te("b",at,[z[u+"_info"]?Fn((G(),te("i",ot,null,512)),[[j,z[u+"_info"],void 0,{left:!0}]]):ue("",!0),ae(" "+re(u.replaceAll("_"," "))+": ",1)])):ue("",!0),typeof E=="string"&&E.endsWith(".ipynb")?(G(),te("a",{key:1,class:"font-medium text-orange-500 dark:text-orange-600 hover:underline cursor-pointer",href:x(v.acronym,v.versions,E),target:"_blank"},re(E),9,dt)):_(E)?(G(),te("table",ct,[B("tbody",null,[(G(!0),te(pe,null,_e(U(Mn.Jsonic)(E),(l,m)=>(G(),te("tr",null,[B("td",ft,re(m),1),B("td",mt,re(l),1)]))),256))])])):typeof E!="object"?(G(),te("span",ht,[v.files.includes(E)?(G(),te("span",{key:0,class:"font-medium text-green-500 dark:text-green-600 hover:underline cursor-pointer",onClick:l=>b(v.acronym,v.versions,E)},re(E),9,pt)):(G(),me(X,{key:1,class:"prose dark:prose-invert",value:E},null,8,["value"]))])):ue("",!0)]))],64))),256)),typeof z=="object"?(G(),te("span",gt,[de($,{analysis:z,acronym:v.acronym,versions:v.versions,files:v.files},null,8,["analysis","acronym","versions","files"])])):ue("",!0)])]),_:2},1032,["legend"])):ue("",!0)],64))),256)}}},kt={class:"flex flex-col gap-4"},bt={class:"m-4 text-3xl font-bold"},yt={class:"flex gap-2 pl-4"},_t={class:"flex flex-col gap-2"},vt={key:0},St=["onClick"],It={style:{"list-style":"none"},class:"list-none pl-1 space-y-1"},Et={class:"flex items-center gap-2"},jt={key:0,class:"flex gap-1"},Ot={class:"flex items-center gap-2"},wt={key:0,class:"flex gap-1"},Mt=["href"],Ct={class:"flex items-center gap-2"},Tt={key:0,class:"flex gap-1"},Rt=["href"],Ut={__name:"[versions]",setup(v){const o=kn(),x=ge("Unknown"),b=ge("Unknown"),_=ge({acronym:"",versions:[],analysis_status:"",status:"",filename:"",url:"",title:"",paper_title:"",submitter:{name:"",email:""},authors:[],date_submitted:"",description:"",format:"",doi:"",tags:[],label_name:"",files:[]}),M=ge([]),W=ge({analysis:{}}),X=ge(),$=qn(),S=ge({}),j=ge(0),z=ge(null),F=Cn(),E=Tn(()=>Rn(()=>import("./GmDZLrEV.js"),__vite__mapDeps([0,1,2,3]),import.meta.url));Dn(()=>{x.value=decodeURIComponent($.params.acronym),b.value=decodeURIComponent($.params.versions),n(x.value,b.value),be.get("/api/users/me").then(s=>{console.log(s.data),z.value=s.data}).catch()});const u=s=>s=="Requested"?"info":s=="In Progress"?"warn":s=="Completed"?"success":"danger",l=(s,d)=>{d==""&&(d="*"),yn(`/detail/${encodeURIComponent(s)}/${encodeURIComponent(d)}`)},m=s=>{p()},p=()=>{be.get(`/api/comments/${encodeURIComponent(x.value)}`).then(s=>{S.value=s.data,j.value++}).catch(s=>{o.add({severity:"error",summary:"Error while getting comments",detail:s.response.data,life:3e3})})},t=s=>{F.open(E,{props:{header:"Add Comment",modal:!0},data:{belongs_to:s,parent_id:null,edit:!1,text:"",comment_id:null},onClose:()=>{p()}})},n=(s,d)=>{console.log("get"),console.log(s),console.log(d),be.all([be.get(`/api/datasets/${encodeURIComponent(s)}/${encodeURIComponent(d)}`),be.get(`/api/comments/${encodeURIComponent(s)}`)]).then(be.spread((P,f)=>{console.log(P.data),_.value=P.data.dataset,_.value.authors=_.value.authors.filter(C=>C!==""),_.value.versions=_.value.versions.filter(C=>C!==""),_.value.tags=_.value.tags.filter(C=>C!==""),W.value=P.data.dataset.analysis,X.value=P.data.edit_analysis_url,M.value=P.data.version_children,S.value=f.data})).catch(P=>{o.add({severity:"error",summary:"Error while getting dataset",detail:P.response.data,life:3e3})})},r=(s,d)=>{d==""&&(d="*"),yn(`/edit/${encodeURIComponent(s)}/${encodeURIComponent(d)}`)},c=()=>{window.open(X.value,"_blank")},g=(s,d=!1)=>{let P=s;if(s)return/^https?:\/\//i.test(s)||(P=`https://${s}`),d?window.open(P,"_blank"):P;console.log("No URL - trying local file")},k=(s,d)=>{be.get(`/api/files/${encodeURIComponent(s)}/${encodeURIComponent(d)}`).then(P=>{window.open(P.data.filelink,"_blank")}).catch(P=>{o.add({severity:"error",summary:"Error while downloading dataset",detail:P.response.data,life:3e3})})};return(s,d)=>{const P=Vn,f=Bn,C=Kn,T=Nn;return G(),te("div",kt,[de(P,{position:"bottom-right"}),de(zn),B("h1",bt,[ae(" Details of "+re(U(_).acronym+(U(_).versions.length==0?"":".")+U(_).versions.join("."))+" ",1),d[5]||(d[5]=B("br",null,null,-1)),de(f,{value:"Analysis: "+U(_).analysis_status,severity:u(U(_).analysis_status),class:"text-xl w-auto"},null,8,["value","severity"])]),B("h2",yt,[U(_).filename?(G(),me(C,{key:0,onClick:d[0]||(d[0]=w=>k(U(_).acronym,U(_).versions)),label:"Download",icon:"pi pi-download",severity:"success"})):ue("",!0),U(_).url?(G(),me(C,{key:1,onClick:d[1]||(d[1]=w=>g(U(_).url,!0)),label:"Open URL",icon:"pi pi-link",severity:"success"})):ue("",!0),U(z)&&(U(z).is_admin||U(z).email==U(_).submitter.email)?(G(),me(C,{key:2,onClick:d[2]||(d[2]=w=>r(U(_).acronym,U(_).versions)),label:"Edit Info",icon:"pi pi-pencil"})):ue("",!0),U(z)&&(U(z).is_admin||U(z).email==U(_).submitter.email)?(G(),me(C,{key:3,onClick:d[3]||(d[3]=w=>c(U(_).acronym)),label:"Edit Analysis",icon:"pi pi-external-link",severity:"secondary"})):ue("",!0)]),de(T,{legend:"Related Datasets",toggleable:!0,collapsed:""},{default:ye(()=>[B("ul",_t,[U(M).length>0?(G(),te("div",vt,[(G(!0),te(pe,null,_e(U(M),w=>(G(),te("li",null,[B("span",{class:"detail-link",onClick:A=>l(w.acronym,w.versions)},re(w.acronym+"["+w.versions+"]"),9,St)]))),256))])):ue("",!0)])]),_:1}),de(T,{legend:"Details",toggleable:!0},{default:ye(()=>[B("ul",It,[B("li",null,[d[6]||(d[6]=B("b",null,"Dataset Title: ",-1)),ae(" "+re(U(_).acronym),1)]),B("li",Et,[d[7]||(d[7]=B("b",null,"Versions: ",-1)),U(_).versions.length>1||U(_).versions[0]!=""?(G(),te("div",jt,[(G(!0),te(pe,null,_e(U(_).versions,w=>(G(),me(U(pn),{class:"text-sm px-1 py-1"},{default:ye(()=>[ae(re(w),1)]),_:2},1024))),256))])):ue("",!0)]),B("li",null,[d[8]||(d[8]=B("b",null,"Paper Title: ",-1)),ae(" "+re(U(_).paper_title),1)]),B("li",Ot,[d[9]||(d[9]=B("b",null,"Authors: ",-1)),U(_).authors.length>1||U(_).authors[0]!=""?(G(),te("div",wt,[(G(!0),te(pe,null,_e(U(_).authors,w=>(G(),me(U(pn),{class:"text-sm px-1 py-1"},{default:ye(()=>[ae(re(w),1)]),_:2},1024))),256))])):ue("",!0)]),B("li",null,[d[10]||(d[10]=B("b",null,"Date Submitted: ",-1)),de(xn,{datetime:U(_).date_submitted},null,8,["datetime"])]),B("li",null,[d[11]||(d[11]=B("b",null,"Submitter: ",-1)),ae(" "+re(U(_).submitter.name)+" <"+re(U(_).submitter.email)+"> ",1)]),B("li",null,[d[12]||(d[12]=B("b",null,"Description: ",-1)),ae(" "+re(U(_).description),1)]),B("li",null,[d[13]||(d[13]=B("b",null,"Format: ",-1)),ae(" "+re(U(_).format),1)]),B("li",null,[d[14]||(d[14]=B("b",null,"DOI: ",-1)),B("a",{class:"font-medium text-blue-600 dark:text-blue-500 hover:underline",href:U(_).doi,target:"_blank"},re(U(_).doi),9,Mt)]),B("li",null,[d[15]||(d[15]=B("b",null,"Label Name: ",-1)),ae(" "+re(U(_).label_name),1)]),B("li",Ct,[d[16]||(d[16]=B("b",null,"Tags: ",-1)),U(_).tags.length>1||U(_).tags[0]!=""?(G(),te("div",Tt,[(G(!0),te(pe,null,_e(U(_).tags,w=>(G(),me(U(pn),{class:"text-sm px-1 py-1"},{default:ye(()=>[ae(re(w),1)]),_:2},1024))),256))])):ue("",!0)]),B("li",null,[d[17]||(d[17]=B("b",null,"Data URL: ",-1)),B("a",{class:"font-medium text-blue-600 dark:text-blue-500 hover:underline",href:g(U(_).url),about:"_blank"},re(U(_).url),9,Rt)]),B("li",null,[d[18]||(d[18]=B("b",null,"Data File: ",-1)),ae(" "+re(U(_).filename),1)])])]),_:1}),de(T,{legend:"Discussion",toggleable:!0,collapsed:""},{default:ye(()=>[de(C,{label:"Add Comment",icon:"pi pi-plus",severity:"secondary",onClick:d[4]||(d[4]=w=>t(U(_).acronym)),style:{"margin-bottom":"0.3em"}}),(G(),me(Pn,{onSignal:m,comments:U(S),key:U(j)},null,8,["comments"]))]),_:1}),de(An,{analysis:U(W).analysis,acronym:U(_).acronym,versions:U(_).versions,files:U(_).files},null,8,["analysis","acronym","versions","files"])])}}};export{Ut as default};
