import{a as M,e as T,b as w,f as B,r as m,h as E,i as l,j as N,k as e,w as h,u as o,l as S,m as i,o as V,F as k}from"./entry.2517c011.js";import{a as _}from"./axios.4a70c6fc.js";import{M as A}from"./menu.ef001066.js";const I=i("h1",null," Users ",-1),U={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},$={class:"p-input-icon-left"},F=i("i",{class:"pi pi-search"},null,-1),O={__name:"users",setup(j){M();const u=T(),g=w();B();const s=m([]),c=m({global:{value:null,matchMode:k.CONTAINS}}),p=m([]),f=()=>{_.get("/api/users").then(a=>{p.value=a.data}).catch(a=>{u.add({severity:"error",summary:"Error while getting requests",detail:a.response.data,life:3e3})})};E(()=>f());const v=()=>{let a=[];console.log(s),s.value.forEach(t=>{a.push(t.email)}),console.log(a),g.require({message:`Are you sure you want to delete ${a.length} users`,header:"Delete Confirmation",icon:"pi pi-exclemation-triangle",accept:()=>{s.value=null,a.forEach(t=>{_.delete(`/api/users/${t}`).then(()=>{u.add({severity:"success",summary:"Delete Successful",detail:`User ${t} deleted successfully.`,life:3e3}),f()}).catch(d=>{u.add({severity:"error",summary:"Delete Failed",detail:d.response.data,life:3e3})})})}})};return(a,t)=>{const d=l("ConfirmDialog"),D=l("Toast"),y=l("Button"),b=l("InputText"),n=l("Column"),C=l("DataTable"),x=l("DynamicDialog");return V(),N("div",null,[e(A),I,e(d),e(C,{value:o(p),scrollable:"",scrollHeight:"500px",filters:o(c),selection:o(s),"onUpdate:selection":t[2]||(t[2]=r=>S(s)?s.value=r:null)},{header:h(()=>[i("div",U,[i("div",null,[e(y,{label:"Delete",icon:"pi pi-trash",severity:"danger",onClick:t[0]||(t[0]=r=>v()),disabled:!o(s)||!o(s).length},null,8,["disabled"])]),i("span",$,[F,e(b,{modelValue:o(c).global.value,"onUpdate:modelValue":t[1]||(t[1]=r=>o(c).global.value=r),placeholder:"Search..."},null,8,["modelValue"])])])]),default:h(()=>[e(D,{position:"bottom-right"}),e(n,{selectionMode:"multiple",headerStyle:"width: 3rem"}),e(n,{field:"email",header:"Email",sortable:""}),e(n,{field:"name",header:"Name"}),e(n,{field:"surname",header:"Surname"}),e(n,{field:"created_at",header:"Created At"}),e(n,{field:"is_admin",header:"Is Admin"})]),_:1},8,["value","filters","selection"]),e(x)])}}};export{O as default};
