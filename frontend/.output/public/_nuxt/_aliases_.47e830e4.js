import{D as te,E as se,A as ie,e as re,s as ne,r as l,G as de,h as ue,i as y,y as ce,j as v,k as i,m as e,t as H,z as d,q as r,H as p,p as D,w as pe,u as me,B as X,o as _,I as fe,J as ve}from"./entry.281a66c0.js";import{M as _e}from"./menu.bb4b1894.js";import{a as k}from"./axios.4a70c6fc.js";const b=T=>(fe("data-v-d15999d0"),T=T(),ve(),T),he={class:"flex flex-column gap-3"},ge={id:"container",class:"card flex justify-content-center"},ye={class:"flex flex-column gap-3 container"},be={id:"acronym_aliases",class:"flex flex-column gap-2"},xe={for:"acronym_aliases"},Ue={class:"pi pi-info-circle"},Ve={class:"card p-fluid p-hidden-label"},De={for:"title"},Te={class:"pi pi-info-circle"},Ie={key:0,class:"p-error"},Ce=b(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Ee={for:"name"},we={class:"pi pi-info-circle"},Re={key:0,class:"p-error"},Ae=b(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Fe={for:"email"},Se={class:"pi pi-info-circle"},$e={key:0,class:"p-error"},ke=b(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Ne={for:"paperTitle"},Oe={class:"pi pi-info-circle"},ze={key:0,class:"p-error"},Be=b(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),je={for:"authors"},qe={class:"pi pi-info-circle"},Le={class:"card p-fluid p-hidden-label"},Me={key:0,class:"p-error"},Pe=b(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Je={id:"description",class:"flex flex-column gap-2"},Ge={for:"Description"},He={class:"pi pi-info-circle"},Xe={id:"format",class:"flex flex-column gap-2"},Ke={for:"format"},Qe={class:"pi pi-info-circle"},We={id:"tags",class:"flex flex-column gap-2"},Ye={for:"tags"},Ze={class:"pi pi-info-circle"},ea={class:"card p-fluid p-hidden-label"},aa={id:"doi",class:"flex flex-column gap-2"},la={for:"doi"},oa={class:"pi pi-info-circle"},ta={id:"originsDoi",class:"flex flex-column gap-2"},sa={for:"originsDoi"},ia={class:"pi pi-info-circle"},ra={for:"url"},na={class:"pi pi-info-circle"},da={for:"url"},ua={class:"pi pi-info-circle"},ca={key:0},pa={key:1},ma=b(()=>e("p",{class:"flex justify-content-center"}," Drag and drop file here to upload. ",-1)),fa={class:"flex justify-content-between"},va={__name:"[aliases]",setup(T){se();const O=ie(),x=re();ne("dialogRef");const m=l(""),h=l(""),s=l(),z=l(""),K=l(!1),g=l("");l(!1);const I=l(""),B=l(!1),C=l(""),j=l(!1),U=l(""),q=l(!1),E=l("");l(!1);const w=l(""),Q=l(!1),R=l(""),W=l(!1),A=l(""),Y=l(!1),F=l(""),L=l(!1),S=l(""),M=l(!1),$=l(""),P=l(!1),V=l(),N=l(null);de(z,t=>{K.value=t.length===0});const Z=(t,a)=>{k.get(`/api/datasets/${encodeURIComponent(t)}/${a}`).then(u=>{s.value=u.data.dataset,console.log(s.value),z.value=s.value.acronym,g.value=s.value.acronym_aliases.filter(c=>c!==""),I.value=s.value.title,C.value=s.value.paper_title,U.value=s.value.authors.filter(c=>c!==""),E.value=s.value.description,w.value=s.value.format,R.value=s.value.doi,A.value=s.value.origins_doi,F.value=s.value.submitter.name,$.value=s.value.submitter.email,V.value=s.value.tags.filter(c=>c!==""),S.value=s.value.url}).catch(u=>{x.add({severity:"error",summary:"Error while getting dataset",detail:u.response.data,life:3e3})})};async function ee(){const t=new FormData;t.append("acronym_aliases",g.value===void 0?[]:g.value),t.append("title",I.value),t.append("paper_title",C.value),t.append("authors",U.value===void 0?[]:U.value),t.append("description",E.value),t.append("format",w.value),t.append("doi",R.value),t.append("origins_doi",A.value),t.append("submitter",JSON.stringify({name:F.value,email:$.value})),t.append("tags",V.value===void 0?[]:V.value),t.append("url",S.value),await k.post(`/api/datasets/${encodeURIComponent(m.value)}/${encodeURIComponent(h.value)}/edit`,t,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{let a=g.value;a==""&&(a="*"),X(`/detail/${encodeURIComponent(m.value)}/${encodeURIComponent(a)}`)}).catch(a=>{console.log(a),x.add({severity:"error",summary:"Edit Error",detail:a.response.data.detail,life:3e3})})}function J(){N.value.clear(),N.value.uploadedFileCount=0}async function ae(t){const a=new FormData;t.files!==void 0&&a.append("file",t.files[0]),a.forEach(u=>{console.log(u)}),await k.post(`/api/datasets/${encodeURIComponent(m.value)}/${encodeURIComponent(h.value)}/upload`,a,{headers:{"Content-Type":"multipart/form-data"}}).then(u=>{console.log(u.data),x.add({severity:"success",summary:"File Uploaded",detail:`File for ${m.value} has been uploaded.`,life:3e3}),J(),k.get(`/api/datasets/${encodeURIComponent(m.value)}/${encodeURIComponent(h.value)}`).then(c=>{s.value.filename=c.data.dataset.filename}).catch(c=>{x.add({severity:"error",summary:"Error while getting dataset",detail:c.response.data,life:3e3})})}).catch(u=>{console.log(u),x.add({severity:"error",summary:"Upload Error",detail:u.response.data.detail,life:3e3}),J()})}return ue(()=>{m.value=decodeURIComponent(O.params.acronym),h.value=decodeURIComponent(O.params.aliases),Z(m.value,h.value)}),(t,a)=>{const u=y("Toast"),c=y("Chips"),f=y("InputText"),le=y("TextArea"),oe=y("FileUpload"),G=y("Button"),n=ce("tooltip");return _(),v("div",he,[i(u,{position:"bottom-right"}),i(_e),e("div",ge,[e("div",ye,[i(u,{position:"bottom-right"}),e("h1",null," Editing "+H(m.value),1),e("div",be,[e("label",xe,[d(e("i",Ue,null,512),[[n,`Additional alias for the Dataset Acronym (e.g. CESNET-TLS22-XS).
Used to filter the different subsection of the original dataset`,void 0,{right:!0}]]),r(" Dataset Acronym Aliases ")]),e("div",Ve,[d(i(c,{id:"acronym_aliases",modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=o=>g.value=o),separator:",",placeholder:"Acronym Aliases...","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[n,"Acronym Aliases.",void 0,{bottom:!0}]])])]),e("div",{id:"title",class:p([{error:B.value},"flex flex-column gap-2"])},[e("label",De,[d(e("i",Te,null,512),[[n,"Full name of the dataset",void 0,{right:!0}]]),r(" Dataset Title ")]),i(f,{id:"title",modelValue:I.value,"onUpdate:modelValue":a[1]||(a[1]=o=>I.value=o),"aria-describedby":"title-help",placeholder:"Dataset Title"},null,8,["modelValue"]),B.value?(_(),v("small",Ie,[Ce,r(" Dataset Title is required. ")])):D("",!0)],2),e("div",{id:"name",class:p([{error:L.value},"flex flex-column gap-2"])},[e("label",Ee,[d(e("i",we,null,512),[[n,"Full name of the submitter",void 0,{right:!0}]]),r(" Submitter Name ")]),i(f,{id:"name",modelValue:F.value,"onUpdate:modelValue":a[2]||(a[2]=o=>F.value=o),"aria-describedby":"name-help",placeholder:"Name Surname"},null,8,["modelValue"]),L.value?(_(),v("small",Re,[Ae,r(" Submitter Name is required. ")])):D("",!0)],2),e("div",{id:"email",class:p([{error:P.value},"flex flex-column gap-2"])},[e("label",Fe,[d(e("i",Se,null,512),[[n,"Email of the submitter",void 0,{right:!0}]]),r(" Submitter Email ")]),i(f,{id:"email",modelValue:$.value,"onUpdate:modelValue":a[3]||(a[3]=o=>$.value=o),"aria-describedby":"email-help",placeholder:"submitter@email"},null,8,["modelValue"]),P.value?(_(),v("small",$e,[ke,r(" Submitter Email is required. ")])):D("",!0)],2),e("div",{id:"paperTitle",class:p([{error:j.value},"flex flex-column gap-2"])},[e("label",Ne,[d(e("i",Oe,null,512),[[n,"Full title of the paper describing the dataset",void 0,{right:!0}]]),r(" Paper Title ")]),i(f,{id:"paperTitle",modelValue:C.value,"onUpdate:modelValue":a[4]||(a[4]=o=>C.value=o),"aria-describedby":"paperTitle-help",placeholder:"Paper Title"},null,8,["modelValue"]),j.value?(_(),v("small",ze,[Be,r(" Paper Title is required. ")])):D("",!0)],2),e("div",{id:"datasetAuthors",class:p([{error:q.value},"flex flex-column gap-2"])},[e("label",je,[d(e("i",qe,null,512),[[n,"Authors of the dataset (comma separated)",void 0,{right:!0}]]),r(" Dataset Authors ")]),e("div",Le,[d(i(c,{id:"authors",modelValue:U.value,"onUpdate:modelValue":a[5]||(a[5]=o=>U.value=o),separator:",",placeholder:"Authors...","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[n,"The dataset authors.",void 0,{bottom:!0}]])]),q.value?(_(),v("small",Me,[Pe,r(" Dataset Author is required. ")])):D("",!0)],2),e("div",Je,[e("label",Ge,[d(e("i",He,null,512),[[n,"Short overview description of the dataset",void 0,{right:!0}]]),r(" Description ")]),d(i(le,{id:"description",modelValue:E.value,"onUpdate:modelValue":a[6]||(a[6]=o=>E.value=o),"aria-describedby":"description-help",placeholder:"Description...",rows:"5",cols:"30"},null,8,["modelValue"]),[[n,"The description of the dataset.",void 0,{bottom:!0}]])]),e("div",Xe,[e("label",Ke,[d(e("i",Qe,null,512),[[n,"Identify file format of the dataset (e.g. pcap, json, txt, â€¦)",void 0,{right:!0}]]),r(" Dataset Format ")]),i(f,{id:"format",modelValue:w.value,"onUpdate:modelValue":a[7]||(a[7]=o=>w.value=o),class:p({error:Q.value}),"aria-describedby":"format-help",placeholder:"Format"},null,8,["modelValue","class"])]),e("div",We,[e("label",Ye,[d(e("i",Ze,null,512),[[n,"Use tags to categorize the dataset (comma separated)",void 0,{right:!0}]]),r(" Tags ")]),e("div",ea,[d(i(c,{id:"tags",modelValue:V.value,"onUpdate:modelValue":a[8]||(a[8]=o=>V.value=o),separator:",",placeholder:"Tags...","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[n,"Tags to describe the dataset.",void 0,{bottom:!0}]])])]),e("div",aa,[e("label",la,[d(e("i",oa,null,512),[[n,"DOI of the dataset.",void 0,{right:!0}]]),r(" DOI ")]),i(f,{id:"doi",modelValue:R.value,"onUpdate:modelValue":a[9]||(a[9]=o=>R.value=o),class:p({error:W.value}),"aria-describedby":"doi-help",placeholder:"DOI"},null,8,["modelValue","class"])]),e("div",ta,[e("label",sa,[d(e("i",ia,null,512),[[n,"DOI of the original dataset",void 0,{right:!0}]]),r(" Origins DOI ")]),i(f,{id:"originsDoi",modelValue:A.value,"onUpdate:modelValue":a[10]||(a[10]=o=>A.value=o),class:p({error:Y.value}),"aria-describedby":"originsDoi-help",placeholder:"Origins DOI"},null,8,["modelValue","class"])]),e("div",{id:"url",class:p([{error:M.value},"flex flex-column gap-2"])},[e("label",ra,[d(e("i",na,null,512),[[n,"URL of the dataset.",void 0,{right:!0}]]),r(" Dataset File URL ")]),i(f,{id:"url",modelValue:S.value,"onUpdate:modelValue":a[11]||(a[11]=o=>S.value=o),"aria-describedby":"url-help",placeholder:"URL"},null,8,["modelValue"])],2),e("div",{id:"url",class:p([{error:M.value},"flex flex-column gap-2"])},[e("label",da,[d(e("i",ua,null,512),[[n,"Upload new file.",void 0,{right:!0}]]),r(" Dataset File Upload ")]),s.value.filename?(_(),v("em",ca,"(Current file: "+H(s.value.filename)+")",1)):(_(),v("em",pa,"(No file uploaded yet)")),i(oe,{name:"upload",auto:!1,multiple:!1,fileLimit:1,"custom-upload":"",ref_key:"fileUpload",ref:N,onUploader:ae,"upload-label":"Upload"},{empty:pe(()=>[ma]),_:1},512)],2),e("footer",fa,[i(G,{label:"Save",icon:"pi pi-save",class:"mr-2",severity:"success",onClick:a[12]||(a[12]=o=>ee())}),i(G,{label:"Back",icon:"pi pi-arrow-left",class:"mr-2",severity:"secondary",onClick:a[13]||(a[13]=o=>("navigateTo"in t?t.navigateTo:me(X))(`/detail/${encodeURIComponent(m.value)}/${encodeURIComponent(h.value)}`))})])])])])}}},ya=te(va,[["__scopeId","data-v-d15999d0"]]);export{ya as default};
