import{a as F,b as O,e as j,f as q,r as d,h as D,i as r,j as K,k as l,w as u,u as a,l as w,m as n,o as T,c as P,p as z,q as x,t as v,F as G,d as k,_ as E}from"./entry.2517c011.js";import{a as C}from"./axios.4a70c6fc.js";import{M as H}from"./menu.ef001066.js";const J=n("h1",null,"Collection Tools",-1),Q={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},W={class:"p-input-icon-left"},X=n("i",{class:"pi pi-search"},null,-1),Y=["href"],Z={class:"flex"},ee={style:{"list-style":"none"}},oe=n("b",null,"Description: ",-1),te=n("br",null,null,-1),le=n("b",null,"Known Issues: ",-1),ce={__name:"collection_tools",setup(ne){F();const R=O(),m=j(),b=q(),_=d(null),s=d([]),h=d([]),f=d({global:{value:null,matchMode:G.CONTAINS}}),y=d([]),V=k(()=>E(()=>import("./create_tool.f8bc3e63.js"),["./create_tool.f8bc3e63.js","./entry.2517c011.js","./entry.076fc270.css","./axios.4a70c6fc.js","./create_tool.253f720b.css"],import.meta.url)),M=k(()=>E(()=>import("./edit_tool.0eef193e.js"),["./edit_tool.0eef193e.js","./entry.2517c011.js","./entry.076fc270.css","./axios.4a70c6fc.js","./edit_tool.214678eb.css"],import.meta.url)),p=()=>{C.get("/api/collectionTools").then(e=>{y.value=e.data}).catch(e=>{m.add({severity:"error",summary:"Error while getting datasets",detail:e.response.data,life:3e3})})};D(()=>{p()});const U=(e,o=!1)=>{let i=e;return/^https?:\/\//i.test(e)||(i=`https://${e}`),o?window.open(i,"_blank"):i},I=()=>{let e=[];s.value.forEach(o=>{e.push({name:o.name})}),R.require({message:`Are you sure you want to delete ${e.length} collection tools`,header:"Delete Confirmation",icon:"pi pi-exclemation-triangle",accept:()=>{s.value=null,e.forEach(o=>{C.delete(`/api/collectionTools/${encodeURIComponent(o.name)}`).then(()=>{m.add({severity:"success",summary:"Delete Successful",detail:`Collection tool ${o.name} deleted successfully.`,life:3e3}),p()}).catch(i=>{m.add({severity:"error",summary:"Delete Failed",detail:i.response.data,life:3e3})})})}})},N=()=>{b.open(V,{props:{header:"Create Collection Tool",modal:!0},onClose:e=>{console.log("Dialog closed: "+e),p()}})},B=e=>{b.open(M,{props:{header:"Edit Collection Tool",modal:!0},data:{name:e.name,description:e.description,known_issues:e.known_issues,url:e.url},onClose:()=>{p()}})};return D(()=>{C.get("/api/users/me").then(e=>{_.value=e.data}).catch()}),(e,o)=>{const i=r("Toast"),$=r("ConfirmDialog"),g=r("Button"),A=r("InputText"),c=r("Column"),S=r("DataTable"),L=r("DynamicDialog");return T(),K("div",null,[l(i,{position:"bottom-right"}),l(H),J,l($),l(S,{value:a(y),scrollable:"",filters:a(f),selection:a(s),"onUpdate:selection":o[2]||(o[2]=t=>w(s)?s.value=t:null),"expanded-rows":a(h),"onUpdate:expandedRows":o[3]||(o[3]=t=>w(h)?h.value=t:null)},{header:u(()=>[n("div",Q,[n("div",null,[l(g,{label:"Create Collection Tool",icon:"pi pi-ticket",class:"mr-2",onClick:N}),a(_)&&a(_).is_admin?(T(),P(g,{key:0,label:"Delete",icon:"pi pi-trash",class:"mr-2",severity:"danger",onClick:o[0]||(o[0]=t=>I()),disabled:!a(s)||!a(s).length},null,8,["disabled"])):z("",!0)]),n("span",W,[X,l(A,{modelValue:a(f).global.value,"onUpdate:modelValue":o[1]||(o[1]=t=>a(f).global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),expansion:u(t=>[n("div",Z,[n("ul",ee,[n("li",null,[oe,x(" "+v(t.data.description),1)]),te,n("li",null,[le,x(" "+v(t.data.known_issues),1)])])])]),default:u(()=>[l(c,{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(c,{expander:"",style:{width:"3rem"}}),l(c,{field:"name",header:"Name",sortable:""}),l(c,{field:"url",header:"URL"},{body:u(t=>[n("a",{href:U(t.data.url),about:"_blank"},v(t.data.url),9,Y)]),_:1}),l(c,null,{body:u(t=>[l(g,{onClick:ae=>B(t.data),label:"Edit",icon:"pi pi-pencil",rounded:"",outlined:""},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters","selection","expanded-rows"]),l(L)])}}};export{ce as default};
