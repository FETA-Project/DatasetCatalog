import{G as q,H as J,b as L,a as G,q as f,v as E,r as d,e as T,h as l,w as c,u as s,I as N,j as e,o as h,c as S,l as H,k as u,t as _,F as V,f as $,J as z,x as K,d as Q,_ as W}from"./entry.18922f6a.js";import{a as k,M as X}from"./menu.f91da9d2.js";import{_ as Y}from"./date.7c0e9f19.js";const Z=e("h1",null,"Dataset Catalog",-1),P={class:"flex flex-wrap gap-2 align-items-center justify-content-between"},ee={class:"p-input-icon-left"},te=e("i",{class:"pi pi-search"},null,-1),ae=["href"],le={class:"flex gap-1"},oe={class:"flex"},se={style:{"list-style":"none"}},ne=e("b",null,"Paper Title: ",-1),ie={class:"flex gap-2"},de=e("b",null,"Authors: ",-1),re=e("b",null,"Date Submitted: ",-1),ce=e("b",null,"Submitter: ",-1),ue=e("b",null,"Name: ",-1),_e=e("b",null,"Email: ",-1),me=e("b",null,"Description: ",-1),pe=e("b",null,"Origins: ",-1),he=["href"],De={__name:"index",setup(fe){q();const A=J(),b=L(),I=G(),D=f(null),r=f([]),v=f([]),x=f({global:{value:null,matchMode:z.CONTAINS}}),C=f([]),O=Q(()=>W(()=>import("./upload.d5412d1e.js"),["./upload.d5412d1e.js","./entry.18922f6a.js","./entry.076fc270.css","./menu.f91da9d2.js","./menu.d6419823.css","./upload.6918fed0.css"],import.meta.url)),w=()=>{k.get("/api/datasets").then(o=>{C.value=o.data,C.value.forEach(a=>{a.metadata=JSON.stringify(a,function(g,n){if(n&&typeof n=="object"){var m={};for(var p in n)Object.hasOwnProperty.call(n,p)&&(m[p&&p.replaceAll("_"," ")]=n[p]);return m}return n})})}).catch(o=>{b.add({severity:"error",summary:"Error while getting datasets",detail:o.response.data,life:3e3})})};E(()=>{w()});const U=o=>{K(`/detail/${encodeURIComponent(o)}`)},B=()=>{let o=[];r.value.forEach(a=>{o.push(a.acronym)}),A.require({message:`Are you sure you want to delete ${o.length} files`,header:"Delete Confirmation",icon:"pi pi-exclemation-triangle",accept:()=>{r.value=null,o.forEach(a=>{k.delete(`/api/datasets/${a}`).then(()=>{b.add({severity:"success",summary:"Delete Successful",detail:`Dataset ${a} deleted successfully.`,life:3e3}),w()}).catch(g=>{b.add({severity:"error",summary:"Delete Failed",detail:g.response.data,life:3e3})})})}})},F=()=>{I.open(O,{props:{header:"Submit Dataset",modal:!0},onClose:o=>{const a=o.data;a&&(b.add({severity:"success",summary:"Upload Successful",detail:`File ${a} uploaded successfully.`,life:3e3}),w())}})};return E(()=>{k.get("/api/users/me").then(o=>{D.value=o.data}).catch()}),(o,a)=>{const g=d("Toast"),n=d("ConfirmDialog"),m=d("Button"),p=d("InputText"),i=d("Column"),M=d("Chip"),R=d("DataTable"),j=d("DynamicDialog");return h(),T("div",null,[l(g,{position:"bottom-right"}),l(X),Z,l(n),l(R,{value:s(C),scrollable:"",filters:s(x),selection:s(r),"onUpdate:selection":a[2]||(a[2]=t=>N(r)?r.value=t:null),"expanded-rows":s(v),"onUpdate:expandedRows":a[3]||(a[3]=t=>N(v)?v.value=t:null)},{header:c(()=>[e("div",P,[e("div",null,[l(m,{label:"Submit Dataset",icon:"pi pi-ticket",class:"mr-2",onClick:F}),s(D)&&s(D).is_admin?(h(),S(m,{key:0,label:"Delete",icon:"pi pi-trash",class:"mr-2",severity:"danger",onClick:a[0]||(a[0]=t=>B()),disabled:!s(r)||!s(r).length},null,8,["disabled"])):H("",!0)]),e("span",ee,[te,l(p,{modelValue:s(x).global.value,"onUpdate:modelValue":a[1]||(a[1]=t=>s(x).global.value=t),placeholder:"Search..."},null,8,["modelValue"])])])]),expansion:c(t=>[e("div",oe,[e("ul",se,[e("li",null,[ne,u(" "+_(t.data.paper_title),1)]),e("li",ie,[de,(h(!0),T(V,null,$(t.data.authors,y=>(h(),S(M,null,{default:c(()=>[u(_(y),1)]),_:2},1024))),256))]),e("li",null,[re,u(),l(Y,{datetime:t.data.date_submitted},null,8,["datetime"])]),e("li",null,[ce,e("ul",null,[e("li",null,[ue,u(" "+_(t.data.submitter.name),1)]),e("li",null,[_e,u(" "+_(t.data.submitter.email),1)])])]),e("li",null,[me,u(" "+_(t.data.description),1)]),e("li",null,[pe,u(),e("a",{href:t.data.origins_doi,target:"_blank"},_(t.data.origins_doi),9,he)])])])]),default:c(()=>[l(i,{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(i,{expander:"",style:{width:"3rem"}}),l(i,{field:"metadata",header:"Metadata",hidden:""}),l(i,{field:"acronym",header:"Acronym",sortable:""}),l(i,{field:"title",header:"Title",sortable:""}),l(i,{field:"doi",header:"DOI"},{body:c(t=>[e("a",{href:"https://doi.org/"+t.data.doi,target:"_blank"},_(t.data.doi),9,ae)]),_:1}),l(i,{field:"tags",header:"Tags"},{body:c(t=>[e("div",le,[(h(!0),T(V,null,$(t.data.tags,y=>(h(),S(M,{label:y},null,8,["label"]))),256))])]),_:1}),l(i,null,{body:c(t=>[l(m,{onClick:y=>U(t.data.acronym),label:"Details",icon:"pi pi-info-circle",rounded:"",outlined:""},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters","selection","expanded-rows"]),l(j)])}}};export{De as default};
