import{z as oe,A as se,s as ie,b as re,i as ne,q as l,B as de,v as ue,r as y,m as ce,e as f,h as i,j as e,t as G,p as d,k as r,C as m,l as D,w as pe,u as me,x as H,o as _,D as ve,E as fe}from"./entry.e2054ab2.js";import{a as $,M as _e}from"./menu.f5e3f6dc.js";const b=T=>(ve("data-v-c7097e8e"),T=T(),fe(),T),he={class:"flex flex-column gap-3"},ge={id:"container",class:"card flex justify-content-center"},ye={class:"flex flex-column gap-3 container"},be={id:"acronym_aliases",class:"flex flex-column gap-2"},xe={for:"acronym_aliases"},Ue={class:"pi pi-info-circle"},Ve={class:"card p-fluid p-hidden-label"},De={for:"title"},Te={class:"pi pi-info-circle"},Ce={key:0,class:"p-error"},Ie=b(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Ee={for:"name"},we={class:"pi pi-info-circle"},Re={key:0,class:"p-error"},Ae=b(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Fe={for:"email"},Se={class:"pi pi-info-circle"},ke={key:0,class:"p-error"},$e=b(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Ne={for:"paperTitle"},Oe={class:"pi pi-info-circle"},ze={key:0,class:"p-error"},Be=b(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),je={for:"authors"},qe={class:"pi pi-info-circle"},Le={class:"card p-fluid p-hidden-label"},Me={key:0,class:"p-error"},Pe=b(()=>e("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1)),Je={id:"description",class:"flex flex-column gap-2"},Xe={for:"Description"},Ge={class:"pi pi-info-circle"},He={id:"format",class:"flex flex-column gap-2"},Ke={for:"format"},Qe={class:"pi pi-info-circle"},We={id:"tags",class:"flex flex-column gap-2"},Ye={for:"tags"},Ze={class:"pi pi-info-circle"},ea={class:"card p-fluid p-hidden-label"},aa={id:"doi",class:"flex flex-column gap-2"},la={for:"doi"},ta={class:"pi pi-info-circle"},oa={id:"originsDoi",class:"flex flex-column gap-2"},sa={for:"originsDoi"},ia={class:"pi pi-info-circle"},ra={for:"url"},na={class:"pi pi-info-circle"},da={for:"url"},ua={class:"pi pi-info-circle"},ca={key:0},pa={key:1},ma=b(()=>e("p",{class:"flex justify-content-center"}," Drag and drop file here to upload. ",-1)),va={class:"flex justify-content-between"},fa={__name:"[aliases]",setup(T){se();const z=ie(),x=re();ne("dialogRef");const p=l(""),h=l(""),s=l(),N=l(""),K=l(!1),g=l("");l(!1);const C=l(""),B=l(!1),I=l(""),j=l(!1),U=l(""),q=l(!1),E=l("");l(!1);const w=l(""),Q=l(!1),R=l(""),W=l(!1),A=l(""),Y=l(!1),F=l(""),L=l(!1),S=l(""),M=l(!1),k=l(""),P=l(!1),V=l(),O=l(null);de(N,o=>{K.value=o.length===0});const Z=(o,a)=>{$.get(`/api/datasets/${encodeURIComponent(o)}/${a}`).then(u=>{s.value=u.data.dataset,console.log(s.value),N.value=s.value.acronym,g.value=s.value.acronym_aliases.filter(c=>c!==""),C.value=s.value.title,I.value=s.value.paper_title,U.value=s.value.authors.filter(c=>c!==""),E.value=s.value.description,w.value=s.value.format,R.value=s.value.doi,A.value=s.value.origins_doi,F.value=s.value.submitter.name,k.value=s.value.submitter.email,V.value=s.value.tags.filter(c=>c!==""),S.value=s.value.url}).catch(u=>{x.add({severity:"error",summary:"Error while getting dataset",detail:u.response.data,life:3e3})})};async function ee(){const o=new FormData;o.append("acronym_aliases",g.value===void 0?[]:g.value),o.append("title",C.value),o.append("paper_title",I.value),o.append("authors",U.value===void 0?[]:U.value),o.append("description",E.value),o.append("format",w.value),o.append("doi",R.value),o.append("origins_doi",A.value),o.append("submitter",JSON.stringify({name:F.value,email:k.value})),o.append("tags",V.value===void 0?[]:V.value),o.append("url",S.value),await $.post(`/api/datasets/${encodeURIComponent(p.value)}/${encodeURIComponent(h.value)}/edit`,o,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{let a=g.value;a==""&&(a=N.value),H(`/detail/${encodeURIComponent(p.value)}/${encodeURIComponent(a)}`)}).catch(a=>{console.log(a),x.add({severity:"error",summary:"Edit Error",detail:a.response.data.detail,life:3e3})})}function J(){O.value.clear(),O.value.uploadedFileCount=0}async function ae(o){const a=new FormData;o.files!==void 0&&a.append("file",o.files[0]),a.forEach(u=>{console.log(u)}),await $.post(`/api/datasets/${encodeURIComponent(p.value)}/${encodeURIComponent(h.value)}/upload`,a,{headers:{"Content-Type":"multipart/form-data"}}).then(u=>{console.log(u.data),x.add({severity:"success",summary:"File Uploaded",detail:`File for ${p.value} has been uploaded.`,life:3e3}),J(),$.get(`/api/datasets/${encodeURIComponent(p.value)}/${encodeURIComponent(h.value)}`).then(c=>{s.value.filename=c.data.dataset.filename}).catch(c=>{x.add({severity:"error",summary:"Error while getting dataset",detail:c.response.data,life:3e3})})}).catch(u=>{console.log(u),x.add({severity:"error",summary:"Upload Error",detail:u.response.data.detail,life:3e3}),J()})}return ue(()=>{p.value=decodeURIComponent(z.params.acronym),h.value=decodeURIComponent(z.params.aliases),h.value==p.value&&(h.value=""),Z(p.value,h.value)}),(o,a)=>{const u=y("Toast"),c=y("Chips"),v=y("InputText"),le=y("TextArea"),te=y("FileUpload"),X=y("Button"),n=ce("tooltip");return _(),f("div",he,[i(u,{position:"bottom-right"}),i(_e),e("div",ge,[e("div",ye,[i(u,{position:"bottom-right"}),e("h1",null," Editing "+G(p.value),1),e("div",be,[e("label",xe,[d(e("i",Ue,null,512),[[n,`Additional alias for the Dataset Acronym (e.g. CESNET-TLS22-XS).
Used to filter the different subsection of the original dataset`,void 0,{right:!0}]]),r(" Dataset Acronym Aliases ")]),e("div",Ve,[d(i(c,{id:"acronym_aliases",modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=t=>g.value=t),separator:",",placeholder:"Acronym Aliases...","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[n,"Acronym Aliases.",void 0,{bottom:!0}]])])]),e("div",{id:"title",class:m([{error:B.value},"flex flex-column gap-2"])},[e("label",De,[d(e("i",Te,null,512),[[n,"Full name of the dataset",void 0,{right:!0}]]),r(" Dataset Title ")]),i(v,{id:"title",modelValue:C.value,"onUpdate:modelValue":a[1]||(a[1]=t=>C.value=t),"aria-describedby":"title-help",placeholder:"Dataset Title"},null,8,["modelValue"]),B.value?(_(),f("small",Ce,[Ie,r(" Dataset Title is required. ")])):D("",!0)],2),e("div",{id:"name",class:m([{error:L.value},"flex flex-column gap-2"])},[e("label",Ee,[d(e("i",we,null,512),[[n,"Full name of the submitter",void 0,{right:!0}]]),r(" Submitter Name ")]),i(v,{id:"name",modelValue:F.value,"onUpdate:modelValue":a[2]||(a[2]=t=>F.value=t),"aria-describedby":"name-help",placeholder:"Name Surname"},null,8,["modelValue"]),L.value?(_(),f("small",Re,[Ae,r(" Submitter Name is required. ")])):D("",!0)],2),e("div",{id:"email",class:m([{error:P.value},"flex flex-column gap-2"])},[e("label",Fe,[d(e("i",Se,null,512),[[n,"Email of the submitter",void 0,{right:!0}]]),r(" Submitter Email ")]),i(v,{id:"email",modelValue:k.value,"onUpdate:modelValue":a[3]||(a[3]=t=>k.value=t),"aria-describedby":"email-help",placeholder:"submitter@email"},null,8,["modelValue"]),P.value?(_(),f("small",ke,[$e,r(" Submitter Email is required. ")])):D("",!0)],2),e("div",{id:"paperTitle",class:m([{error:j.value},"flex flex-column gap-2"])},[e("label",Ne,[d(e("i",Oe,null,512),[[n,"Full title of the paper describing the dataset",void 0,{right:!0}]]),r(" Paper Title ")]),i(v,{id:"paperTitle",modelValue:I.value,"onUpdate:modelValue":a[4]||(a[4]=t=>I.value=t),"aria-describedby":"paperTitle-help",placeholder:"Paper Title"},null,8,["modelValue"]),j.value?(_(),f("small",ze,[Be,r(" Paper Title is required. ")])):D("",!0)],2),e("div",{id:"datasetAuthors",class:m([{error:q.value},"flex flex-column gap-2"])},[e("label",je,[d(e("i",qe,null,512),[[n,"Authors of the dataset (comma separated)",void 0,{right:!0}]]),r(" Dataset Authors ")]),e("div",Le,[d(i(c,{id:"authors",modelValue:U.value,"onUpdate:modelValue":a[5]||(a[5]=t=>U.value=t),separator:",",placeholder:"Authors...","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[n,"The dataset authors.",void 0,{bottom:!0}]])]),q.value?(_(),f("small",Me,[Pe,r(" Dataset Author is required. ")])):D("",!0)],2),e("div",Je,[e("label",Xe,[d(e("i",Ge,null,512),[[n,"Short overview description of the dataset",void 0,{right:!0}]]),r(" Description ")]),d(i(le,{id:"description",modelValue:E.value,"onUpdate:modelValue":a[6]||(a[6]=t=>E.value=t),"aria-describedby":"description-help",placeholder:"Description...",rows:"5",cols:"30"},null,8,["modelValue"]),[[n,"The description of the dataset.",void 0,{bottom:!0}]])]),e("div",He,[e("label",Ke,[d(e("i",Qe,null,512),[[n,"Identify file format of the dataset (e.g. pcap, json, txt, â€¦)",void 0,{right:!0}]]),r(" Dataset Format ")]),i(v,{id:"format",modelValue:w.value,"onUpdate:modelValue":a[7]||(a[7]=t=>w.value=t),class:m({error:Q.value}),"aria-describedby":"format-help",placeholder:"Format"},null,8,["modelValue","class"])]),e("div",We,[e("label",Ye,[d(e("i",Ze,null,512),[[n,"Use tags to categorize the dataset (comma separated)",void 0,{right:!0}]]),r(" Tags ")]),e("div",ea,[d(i(c,{id:"tags",modelValue:V.value,"onUpdate:modelValue":a[8]||(a[8]=t=>V.value=t),separator:",",placeholder:"Tags...","add-on-blur":"true","allow-duplicate":"false"},null,8,["modelValue"]),[[n,"Tags to describe the dataset.",void 0,{bottom:!0}]])])]),e("div",aa,[e("label",la,[d(e("i",ta,null,512),[[n,"DOI of the dataset.",void 0,{right:!0}]]),r(" DOI ")]),i(v,{id:"doi",modelValue:R.value,"onUpdate:modelValue":a[9]||(a[9]=t=>R.value=t),class:m({error:W.value}),"aria-describedby":"doi-help",placeholder:"DOI"},null,8,["modelValue","class"])]),e("div",oa,[e("label",sa,[d(e("i",ia,null,512),[[n,"DOI of the original dataset",void 0,{right:!0}]]),r(" Origins DOI ")]),i(v,{id:"originsDoi",modelValue:A.value,"onUpdate:modelValue":a[10]||(a[10]=t=>A.value=t),class:m({error:Y.value}),"aria-describedby":"originsDoi-help",placeholder:"Origins DOI"},null,8,["modelValue","class"])]),e("div",{id:"url",class:m([{error:M.value},"flex flex-column gap-2"])},[e("label",ra,[d(e("i",na,null,512),[[n,"URL of the dataset.",void 0,{right:!0}]]),r(" Dataset File URL ")]),i(v,{id:"url",modelValue:S.value,"onUpdate:modelValue":a[11]||(a[11]=t=>S.value=t),"aria-describedby":"url-help",placeholder:"URL"},null,8,["modelValue"])],2),e("div",{id:"url",class:m([{error:M.value},"flex flex-column gap-2"])},[e("label",da,[d(e("i",ua,null,512),[[n,"Upload new file.",void 0,{right:!0}]]),r(" Dataset File Upload ")]),s.value.filename?(_(),f("em",ca,"(Current file: "+G(s.value.filename)+")",1)):(_(),f("em",pa,"(No file uploaded yet)")),i(te,{name:"upload",auto:!1,multiple:!1,fileLimit:1,"custom-upload":"",ref_key:"fileUpload",ref:O,onUploader:ae,"upload-label":"Upload"},{empty:pe(()=>[ma]),_:1},512)],2),e("footer",va,[i(X,{label:"Save",icon:"pi pi-save",class:"mr-2",severity:"success",onClick:a[12]||(a[12]=t=>ee())}),i(X,{label:"Back",icon:"pi pi-arrow-left",class:"mr-2",severity:"secondary",onClick:a[13]||(a[13]=t=>("navigateTo"in o?o.navigateTo:me(H))(`/detail/${encodeURIComponent(p.value)}`))})])])])])}}},ga=oe(fa,[["__scopeId","data-v-c7097e8e"]]);export{ga as default};
