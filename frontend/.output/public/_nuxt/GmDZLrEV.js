import{_ as b,a1 as C,n as E,K as V,r as n,q,f as w,c as p,o as f,a as o,b as u,y as $,P as v,C as k,d as _,$ as A,D as B,T as D}from"./DU3s_J-k.js";import{a as N}from"./DW_MHI2K.js";const R={id:"container",class:"card flex justify-center"},j={class:"flex flex-col gap-4 container"},z={id:"text",class:"flex flex-col gap-2"},F={for:"Text"},I={class:"pi pi-info-circle"},K={key:0,class:"p-error"},M={__name:"create_comment",setup(P){C();const i=E(),l=V("dialogRef"),a=n(""),d=n(!1),c=n(""),s=n(!1),r=n("");q(()=>{c.value=l.value.data.belongs_to,s.value=l.value.data.edit,a.value=l.value.data.text,r.value=l.value.data.comment_id});async function x(){const t=new FormData;if(t.append("text",a.value),a.value.length==0){d.value=!0,i.add({severity:"error",summary:"Request Error",detail:"Text is required.",life:3e3});return}s.value||(t.append("belongs_to",c.value),r.value!=null&&t.append("parent_id",r.value)),await N.post(`/api/comments${s.value?`/${r.value}`:""}`,t,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{i.add({severity:"success",summary:s?"Comment Edited":"Comment Added",life:1e3}),l.value.close(c.value)}).catch(e=>{console.log(e),i.add({severity:"error",summary:s?"Comment Edit Error":"Comment Add Error",detail:e.response.data.detail,life:3e3})})}return w(a,t=>{d.value=t.length===0}),(t,e)=>{const T=$,h=A,y=B,m=D;return f(),p("div",R,[o("div",j,[u(T,{position:"bottom-right"}),o("div",z,[o("label",F,[v(o("i",I,null,512),[[m,"Text of the comment.",void 0,{right:!0}]]),e[1]||(e[1]=_(" Text "))]),v(u(h,{id:"text",modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=g=>a.value=g),"aria-describedby":"text-help",placeholder:"Text...",rows:"5",cols:"30",required:""},null,8,["modelValue"]),[[m,"The text of the comment.",void 0,{bottom:!0}]]),d.value?(f(),p("small",K,e[2]||(e[2]=[o("i",{class:"pi pi-exclamation-circle",style:{"font-size":"0.8rem"}},null,-1),_(" Text is required. ")]))):k("",!0)]),u(y,{label:s.value?"Edit Comment":"Add Comment",onClick:x},null,8,["label"]),e[3]||(e[3]=o("footer",null,[o("small",null,"* required field")],-1))])])}}},H=b(M,[["__scopeId","data-v-a85dd18f"]]);export{H as default};
